{"version":3,"file":"index-D-dfsZWT.js","sources":["../../node_modules/react/cjs/react-jsx-runtime.production.min.js","../../node_modules/react/jsx-runtime.js","../../node_modules/react-dom/client.js","../../node_modules/@heroicons/react/24/outline/esm/ArrowDownIcon.js","../../node_modules/@heroicons/react/24/outline/esm/ArrowLeftIcon.js","../../node_modules/@heroicons/react/24/outline/esm/ArrowPathIcon.js","../../node_modules/@heroicons/react/24/outline/esm/ArrowRightIcon.js","../../node_modules/@heroicons/react/24/outline/esm/ArrowUpIcon.js","../../node_modules/@heroicons/react/24/outline/esm/Battery0Icon.js","../../node_modules/@heroicons/react/24/outline/esm/BellIcon.js","../../node_modules/@heroicons/react/24/outline/esm/BoltSlashIcon.js","../../node_modules/@heroicons/react/24/outline/esm/BoltIcon.js","../../node_modules/@heroicons/react/24/outline/esm/ChartBarIcon.js","../../node_modules/@heroicons/react/24/outline/esm/CheckCircleIcon.js","../../node_modules/@heroicons/react/24/outline/esm/CheckIcon.js","../../node_modules/@heroicons/react/24/outline/esm/ChevronDownIcon.js","../../node_modules/@heroicons/react/24/outline/esm/ChevronLeftIcon.js","../../node_modules/@heroicons/react/24/outline/esm/ChevronRightIcon.js","../../node_modules/@heroicons/react/24/outline/esm/ChevronUpIcon.js","../../node_modules/@heroicons/react/24/outline/esm/ClockIcon.js","../../node_modules/@heroicons/react/24/outline/esm/Cog6ToothIcon.js","../../node_modules/@heroicons/react/24/outline/esm/CogIcon.js","../../node_modules/@heroicons/react/24/outline/esm/CpuChipIcon.js","../../node_modules/@heroicons/react/24/outline/esm/ExclamationTriangleIcon.js","../../node_modules/@heroicons/react/24/outline/esm/EyeIcon.js","../../node_modules/@heroicons/react/24/outline/esm/FireIcon.js","../../node_modules/@heroicons/react/24/outline/esm/FunnelIcon.js","../../node_modules/@heroicons/react/24/outline/esm/GlobeAltIcon.js","../../node_modules/@heroicons/react/24/outline/esm/InformationCircleIcon.js","../../node_modules/@heroicons/react/24/outline/esm/MagnifyingGlassIcon.js","../../node_modules/@heroicons/react/24/outline/esm/MapPinIcon.js","../../node_modules/@heroicons/react/24/outline/esm/PauseIcon.js","../../node_modules/@heroicons/react/24/outline/esm/PencilIcon.js","../../node_modules/@heroicons/react/24/outline/esm/PlayIcon.js","../../node_modules/@heroicons/react/24/outline/esm/PlusIcon.js","../../node_modules/@heroicons/react/24/outline/esm/QueueListIcon.js","../../node_modules/@heroicons/react/24/outline/esm/RocketLaunchIcon.js","../../node_modules/@heroicons/react/24/outline/esm/ShieldCheckIcon.js","../../node_modules/@heroicons/react/24/outline/esm/ShieldExclamationIcon.js","../../node_modules/@heroicons/react/24/outline/esm/SignalSlashIcon.js","../../node_modules/@heroicons/react/24/outline/esm/SignalIcon.js","../../node_modules/@heroicons/react/24/outline/esm/StopIcon.js","../../node_modules/@heroicons/react/24/outline/esm/TrashIcon.js","../../node_modules/@heroicons/react/24/outline/esm/UserIcon.js","../../node_modules/@heroicons/react/24/outline/esm/WifiIcon.js","../../node_modules/@heroicons/react/24/outline/esm/WrenchScrewdriverIcon.js","../../node_modules/@heroicons/react/24/outline/esm/XCircleIcon.js","../../node_modules/@heroicons/react/24/outline/esm/XMarkIcon.js","../../src/components/fleet/FleetMap/DroneMarker.tsx","../../src/components/fleet/FleetMap/MissionPath.tsx","../../src/components/fleet/FleetMap/index.tsx","../../src/components/telemetry/BatteryIndicator/index.tsx","../../src/components/fleet/FleetStatus/DroneStatusCard.tsx","../../src/components/fleet/FleetStatus/FleetSummary.tsx","../../src/components/fleet/FleetStatus/index.tsx","../../src/components/telemetry/ConnectionStatus/index.tsx","../../src/components/telemetry/TelemetryPanel/TelemetryChart.tsx","../../src/components/telemetry/TelemetryPanel/AlertsList.tsx","../../src/components/telemetry/TelemetryPanel/index.tsx","../../src/services/websocket.ts","../../src/components/common/ConnectionStatusIndicator.tsx","../../node_modules/zustand/esm/vanilla.mjs","../../node_modules/use-sync-external-store/cjs/use-sync-external-store-shim.production.js","../../node_modules/use-sync-external-store/shim/index.js","../../node_modules/use-sync-external-store/cjs/use-sync-external-store-shim/with-selector.production.js","../../node_modules/use-sync-external-store/shim/with-selector.js","../../node_modules/zustand/esm/index.mjs","../../node_modules/zustand/esm/middleware.mjs","../../src/services/coordinationService.ts","../../src/services/chargingService.ts","../../src/services/mockData.ts","../../src/store/fleet.ts","../../src/components/safety/EmergencyPanel/index.tsx","../../src/components/coordination/CoordinationPanel/index.tsx","../../src/components/charging/ChargingPanel/index.tsx","../../src/components/safety/SafetyPanel/index.tsx","../../src/components/common/ResizablePanel.tsx","../../src/components/mission/WaypointManager/index.tsx","../../src/store/mission.ts","../../src/components/mission/MissionCreator/index.tsx","../../src/components/mission/DroneAssignment/index.tsx","../../src/components/mission/QuickAssignment/index.tsx","../../src/components/mission/MissionList/index.tsx","../../src/components/mission/MissionPanel/index.tsx","../../src/components/mission/AssignmentManager/index.tsx","../../src/components/mission/MissionControls/index.tsx","../../src/App.tsx","../../src/main.tsx"],"sourcesContent":["/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","import * as React from \"react\";\nfunction ArrowDownIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M19.5 13.5 12 21m0 0-7.5-7.5M12 21V3\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(ArrowDownIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction ArrowLeftIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(ArrowLeftIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction ArrowPathIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(ArrowPathIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction ArrowRightIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(ArrowRightIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction ArrowUpIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M4.5 10.5 12 3m0 0 7.5 7.5M12 3v18\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(ArrowUpIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction Battery0Icon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M21 10.5h.375c.621 0 1.125.504 1.125 1.125v2.25c0 .621-.504 1.125-1.125 1.125H21M3.75 18h15A2.25 2.25 0 0 0 21 15.75v-6a2.25 2.25 0 0 0-2.25-2.25h-15A2.25 2.25 0 0 0 1.5 9.75v6A2.25 2.25 0 0 0 3.75 18Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(Battery0Icon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction BellIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(BellIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction BoltSlashIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M11.412 15.655 9.75 21.75l3.745-4.012M9.257 13.5H3.75l2.659-2.849m2.048-2.194L14.25 2.25 12 10.5h8.25l-4.707 5.043M8.457 8.457 3 3m5.457 5.457 7.086 7.086m0 0L21 21\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(BoltSlashIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction BoltIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"m3.75 13.5 10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(BoltIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction ChartBarIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(ChartBarIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction CheckCircleIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(CheckCircleIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction CheckIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"m4.5 12.75 6 6 9-13.5\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(CheckIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction ChevronDownIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"m19.5 8.25-7.5 7.5-7.5-7.5\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(ChevronDownIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction ChevronLeftIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M15.75 19.5 8.25 12l7.5-7.5\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(ChevronLeftIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction ChevronRightIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"m8.25 4.5 7.5 7.5-7.5 7.5\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(ChevronRightIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction ChevronUpIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"m4.5 15.75 7.5-7.5 7.5 7.5\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(ChevronUpIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction ClockIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(ClockIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction Cog6ToothIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(Cog6ToothIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction CogIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M4.5 12a7.5 7.5 0 0 0 15 0m-15 0a7.5 7.5 0 1 1 15 0m-15 0H3m16.5 0H21m-1.5 0H12m-8.457 3.077 1.41-.513m14.095-5.13 1.41-.513M5.106 17.785l1.15-.964m11.49-9.642 1.149-.964M7.501 19.795l.75-1.3m7.5-12.99.75-1.3m-6.063 16.658.26-1.477m2.605-14.772.26-1.477m0 17.726-.26-1.477M10.698 4.614l-.26-1.477M16.5 19.794l-.75-1.299M7.5 4.205 12 12m6.894 5.785-1.149-.964M6.256 7.178l-1.15-.964m15.352 8.864-1.41-.513M4.954 9.435l-1.41-.514M12.002 12l-3.75 6.495\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(CogIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction CpuChipIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M8.25 3v1.5M4.5 8.25H3m18 0h-1.5M4.5 12H3m18 0h-1.5m-15 3.75H3m18 0h-1.5M8.25 19.5V21M12 3v1.5m0 15V21m3.75-18v1.5m0 15V21m-9-1.5h10.5a2.25 2.25 0 0 0 2.25-2.25V6.75a2.25 2.25 0 0 0-2.25-2.25H6.75A2.25 2.25 0 0 0 4.5 6.75v10.5a2.25 2.25 0 0 0 2.25 2.25Zm.75-12h9v9h-9v-9Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(CpuChipIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction ExclamationTriangleIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(ExclamationTriangleIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction EyeIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(EyeIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction FireIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M15.362 5.214A8.252 8.252 0 0 1 12 21 8.25 8.25 0 0 1 6.038 7.047 8.287 8.287 0 0 0 9 9.601a8.983 8.983 0 0 1 3.361-6.867 8.21 8.21 0 0 0 3 2.48Z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M12 18a3.75 3.75 0 0 0 .495-7.468 5.99 5.99 0 0 0-1.925 3.547 5.975 5.975 0 0 1-2.133-1.001A3.75 3.75 0 0 0 12 18Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(FireIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction FunnelIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(FunnelIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction GlobeAltIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M12 21a9.004 9.004 0 0 0 8.716-6.747M12 21a9.004 9.004 0 0 1-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 0 1 7.843 4.582M12 3a8.997 8.997 0 0 0-7.843 4.582m15.686 0A11.953 11.953 0 0 1 12 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0 1 21 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0 1 12 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 0 1 3 12c0-1.605.42-3.113 1.157-4.418\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(GlobeAltIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction InformationCircleIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(InformationCircleIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction MagnifyingGlassIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(MagnifyingGlassIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction MapPinIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(MapPinIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction PauseIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M15.75 5.25v13.5m-7.5-13.5v13.5\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(PauseIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction PencilIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(PencilIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction PlayIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(PlayIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction PlusIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M12 4.5v15m7.5-7.5h-15\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(PlusIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction QueueListIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 0 1 0 3.75H5.625a1.875 1.875 0 0 1 0-3.75Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(QueueListIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction RocketLaunchIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M15.59 14.37a6 6 0 0 1-5.84 7.38v-4.8m5.84-2.58a14.98 14.98 0 0 0 6.16-12.12A14.98 14.98 0 0 0 9.631 8.41m5.96 5.96a14.926 14.926 0 0 1-5.841 2.58m-.119-8.54a6 6 0 0 0-7.381 5.84h4.8m2.581-5.84a14.927 14.927 0 0 0-2.58 5.84m2.699 2.7c-.103.021-.207.041-.311.06a15.09 15.09 0 0 1-2.448-2.448 14.9 14.9 0 0 1 .06-.312m-2.24 2.39a4.493 4.493 0 0 0-1.757 4.306 4.493 4.493 0 0 0 4.306-1.758M16.5 9a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(RocketLaunchIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction ShieldCheckIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M9 12.75 11.25 15 15 9.75m-3-7.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(ShieldCheckIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction ShieldExclamationIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M12 9v3.75m0-10.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.75c0 5.592 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.57-.598-3.75h-.152c-3.196 0-6.1-1.25-8.25-3.286Zm0 13.036h.008v.008H12v-.008Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(ShieldExclamationIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction SignalSlashIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"m3 3 8.735 8.735m0 0a.374.374 0 1 1 .53.53m-.53-.53.53.53m0 0L21 21M14.652 9.348a3.75 3.75 0 0 1 0 5.304m2.121-7.425a6.75 6.75 0 0 1 0 9.546m2.121-11.667c3.808 3.807 3.808 9.98 0 13.788m-9.546-4.242a3.733 3.733 0 0 1-1.06-2.122m-1.061 4.243a6.75 6.75 0 0 1-1.625-6.929m-.496 9.05c-3.068-3.067-3.664-7.67-1.79-11.334M12 12h.008v.008H12V12Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(SignalSlashIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction SignalIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M9.348 14.652a3.75 3.75 0 0 1 0-5.304m5.304 0a3.75 3.75 0 0 1 0 5.304m-7.425 2.121a6.75 6.75 0 0 1 0-9.546m9.546 0a6.75 6.75 0 0 1 0 9.546M5.106 18.894c-3.808-3.807-3.808-9.98 0-13.788m13.788 0c3.808 3.807 3.808 9.98 0 13.788M12 12h.008v.008H12V12Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(SignalIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction StopIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M5.25 7.5A2.25 2.25 0 0 1 7.5 5.25h9a2.25 2.25 0 0 1 2.25 2.25v9a2.25 2.25 0 0 1-2.25 2.25h-9a2.25 2.25 0 0 1-2.25-2.25v-9Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(StopIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction TrashIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(TrashIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction UserIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(UserIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction WifiIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M8.288 15.038a5.25 5.25 0 0 1 7.424 0M5.106 11.856c3.807-3.808 9.98-3.808 13.788 0M1.924 8.674c5.565-5.565 14.587-5.565 20.152 0M12.53 18.22l-.53.53-.53-.53a.75.75 0 0 1 1.06 0Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(WifiIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction WrenchScrewdriverIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M11.42 15.17 17.25 21A2.652 2.652 0 0 0 21 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.317-.384.74-.626 1.208-.766M11.42 15.17l-4.655 5.653a2.548 2.548 0 1 1-3.586-3.586l6.837-5.63m5.108-.233c.55-.164 1.163-.188 1.743-.14a4.5 4.5 0 0 0 4.486-6.336l-3.276 3.277a3.004 3.004 0 0 1-2.25-2.25l3.276-3.276a4.5 4.5 0 0 0-6.336 4.486c.091 1.076-.071 2.264-.904 2.95l-.102.085m-1.745 1.437L5.909 7.5H4.5L2.25 3.75l1.5-1.5L7.5 4.5v1.409l4.26 4.26m-1.745 1.437 1.745-1.437m6.615 8.206L15.75 15.75M4.867 19.125h.008v.008h-.008v-.008Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(WrenchScrewdriverIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction XCircleIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(XCircleIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction XMarkIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M6 18 18 6M6 6l12 12\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(XMarkIcon);\nexport default ForwardRef;","import React from 'react';\nimport { Marker, Popup } from 'react-leaflet';\nimport { divIcon } from 'leaflet';\nimport { \n  Battery0Icon as BatteryIcon, \n  SignalIcon, \n  ExclamationTriangleIcon,\n} from '@heroicons/react/24/outline';\nimport { DroneData } from '@/types/fleet';\n\ninterface DroneMarkerProps {\n  drone: DroneData;\n  isSelected: boolean;\n  onSelect: () => void;\n  getBatteryColor: (percentage: number) => string;\n  getStatusColor: (status: string) => string;\n}\n\nconst DroneMarker: React.FC<DroneMarkerProps> = ({\n  drone,\n  isSelected,\n  onSelect,\n  getBatteryColor,\n  getStatusColor\n}) => {\n  const createDroneIcon = () => {\n    const statusColor = getStatusColor(drone.status);\n    const batteryColor = getBatteryColor(drone.batteryLevel);\n    const isLowBattery = drone.batteryLevel < 30;\n    \n    return divIcon({\n      html: `\n        <div class=\"relative\">\n          <!-- Pulse animation for selected drone -->\n          ${isSelected ? `\n            <div class=\"absolute inset-0 animate-ping\">\n              <div class=\"w-6 h-6 bg-blue-400 rounded-full opacity-30\"></div>\n            </div>\n          ` : ''}\n          \n          <!-- Low battery warning pulse -->\n          ${isLowBattery ? `\n            <div class=\"absolute inset-0 animate-pulse\">\n              <div class=\"w-6 h-6 bg-red-400 rounded-full opacity-40\"></div>\n            </div>\n          ` : ''}\n          \n          <!-- Main drone icon -->\n          <div class=\"relative w-6 h-6 rounded-full border-2 flex items-center justify-center transform transition-transform hover:scale-110\"\n               style=\"background-color: #161b22; border-color: ${statusColor}\">\n            <!-- Drone symbol -->\n            <svg class=\"w-3 h-3\" style=\"color: ${statusColor}\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path d=\"M12 2l3.5 3.5h-7L12 2zM5.5 8.5L2 12l3.5 3.5V8.5zM18.5 8.5v7L22 12l-3.5-3.5zM8.5 18.5L12 22l3.5-3.5h-7z\"/>\n              <circle cx=\"12\" cy=\"12\" r=\"2\"/>\n            </svg>\n          </div>\n          \n          <!-- Battery indicator -->\n          <div class=\"absolute -bottom-1 -right-1 w-3 h-1.5 rounded-sm border\"\n               style=\"background-color: ${batteryColor}; border-color: #30363d\">\n          </div>\n          \n          <!-- Status indicator dot -->\n          <div class=\"absolute -top-1 -right-1 w-2 h-2 rounded-full\"\n               style=\"background-color: ${statusColor}\">\n          </div>\n        </div>\n      `,\n      className: 'drone-marker',\n      iconSize: [32, 32],\n      iconAnchor: [16, 16],\n      popupAnchor: [0, -16],\n    });\n  };\n\n  const formatLastUpdate = (timestamp: string) => {\n    const date = new Date(timestamp);\n    const now = new Date();\n    const diffMs = now.getTime() - date.getTime();\n    const diffSeconds = Math.floor(diffMs / 1000);\n    \n    if (diffSeconds < 60) return `${diffSeconds}s ago`;\n    if (diffSeconds < 3600) return `${Math.floor(diffSeconds / 60)}m ago`;\n    return `${Math.floor(diffSeconds / 3600)}h ago`;\n  };\n\n  const getConnectionQuality = (signalStrength: number) => {\n    if (signalStrength > -50) return { level: 'Excellent', color: '#238636' };\n    if (signalStrength > -70) return { level: 'Good', color: '#d29922' };\n    if (signalStrength > -90) return { level: 'Poor', color: '#da3633' };\n    return { level: 'Very Poor', color: '#f85149' };\n  };\n\n  const connection = getConnectionQuality(drone.signalStrength);\n\n  if (!drone.position.lat || !drone.position.lng) return null;\n\n  return (\n    <Marker\n      position={[drone.position.lat, drone.position.lng]}\n      icon={createDroneIcon()}\n      eventHandlers={{\n        click: onSelect,\n      }}\n    >\n      <Popup className=\"drone-popup\" maxWidth={320} minWidth={280}>\n        <div className=\"bg-dark-secondary text-text-primary p-4 rounded-lg border border-dark-border\">\n          {/* Header */}\n          <div className=\"flex items-center justify-between mb-3\">\n            <div>\n              <h3 className=\"font-semibold text-lg\">{drone.name}</h3>\n              <p className=\"text-text-secondary text-sm\">{drone.id}</p>\n            </div>\n            <div className=\"text-right\">\n              <div className={`inline-flex items-center px-2 py-1 rounded text-xs font-medium`}\n                   style={{ backgroundColor: getStatusColor(drone.status) + '20', color: getStatusColor(drone.status) }}>\n                {drone.status.toUpperCase()}\n              </div>\n            </div>\n          </div>\n\n          {/* Key Metrics */}\n          <div className=\"grid grid-cols-2 gap-3 mb-3\">\n            {/* Battery */}\n            <div className=\"bg-dark-tertiary rounded p-2\">\n              <div className=\"flex items-center gap-2 mb-1\">\n                <BatteryIcon className=\"w-4 h-4 text-text-secondary\" />\n                <span className=\"text-xs text-text-secondary\">Battery</span>\n              </div>\n              <div className=\"flex items-center gap-2\">\n                <div className=\"flex-1 bg-dark-border rounded-full h-1.5\">\n                  <div \n                    className=\"h-full rounded-full transition-all duration-300\"\n                    style={{ \n                      width: `${drone.batteryLevel}%`, \n                      backgroundColor: getBatteryColor(drone.batteryLevel) \n                    }}\n                  />\n                </div>\n                <span className=\"text-sm font-mono\">{drone.batteryLevel}%</span>\n              </div>\n            </div>\n\n            {/* Signal */}\n            <div className=\"bg-dark-tertiary rounded p-2\">\n              <div className=\"flex items-center gap-2 mb-1\">\n                <SignalIcon className=\"w-4 h-4 text-text-secondary\" />\n                <span className=\"text-xs text-text-secondary\">Signal</span>\n              </div>\n              <div className=\"flex items-center justify-between\">\n                <span className=\"text-xs\" style={{ color: connection.color }}>\n                  {connection.level}\n                </span>\n                <span className=\"text-sm font-mono text-text-secondary\">\n                  {drone.signalStrength}dBm\n                </span>\n              </div>\n            </div>\n          </div>\n\n          {/* Position & Telemetry */}\n          <div className=\"space-y-2 text-sm\">\n            <div className=\"flex justify-between\">\n              <span className=\"text-text-secondary\">Altitude</span>\n              <span className=\"font-mono\">{drone.position.alt.toFixed(1)}m</span>\n            </div>\n            <div className=\"flex justify-between\">\n              <span className=\"text-text-secondary\">Speed</span>\n              <span className=\"font-mono\">{drone.speed.toFixed(1)} m/s</span>\n            </div>\n            <div className=\"flex justify-between\">\n              <span className=\"text-text-secondary\">Heading</span>\n              <span className=\"font-mono\">{drone.heading.toFixed(0)}</span>\n            </div>\n          </div>\n\n          {/* Mission Info */}\n          {drone.currentMission && (\n            <div className=\"mt-3 pt-3 border-t border-dark-border\">\n              <div className=\"flex items-center gap-2 mb-2\">\n                <div className=\"w-2 h-2 rounded-full bg-status-active\"></div>\n                <span className=\"text-sm font-medium\">Active Mission</span>\n              </div>\n              <div className=\"text-sm space-y-1\">\n                <div className=\"flex justify-between\">\n                  <span className=\"text-text-secondary\">Mission</span>\n                  <span>{drone.currentMission.name}</span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span className=\"text-text-secondary\">Progress</span>\n                  <span>{drone.currentMission.progress}%</span>\n                </div>\n                {drone.currentMission.eta && (\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-text-secondary\">ETA</span>\n                    <span>{drone.currentMission.eta}</span>\n                  </div>\n                )}\n              </div>\n            </div>\n          )}\n\n          {/* Alerts */}\n          {drone.alerts && drone.alerts.length > 0 && (\n            <div className=\"mt-3 pt-3 border-t border-dark-border\">\n              <div className=\"flex items-center gap-2 mb-2\">\n                <ExclamationTriangleIcon className=\"w-4 h-4 text-status-warning\" />\n                <span className=\"text-sm font-medium text-status-warning\">\n                  {drone.alerts.length} Alert{drone.alerts.length > 1 ? 's' : ''}\n                </span>\n              </div>\n              <div className=\"space-y-1\">\n                {drone.alerts.slice(0, 2).map((alert, index) => (\n                  <div key={index} className=\"text-xs p-2 bg-dark-primary rounded border-l-2\"\n                       style={{ borderLeftColor: alert.severity === 'critical' ? '#da3633' : '#d29922' }}>\n                    {alert.message}\n                  </div>\n                ))}\n                {drone.alerts.length > 2 && (\n                  <p className=\"text-xs text-text-secondary\">\n                    +{drone.alerts.length - 2} more alerts\n                  </p>\n                )}\n              </div>\n            </div>\n          )}\n\n          {/* Footer */}\n          <div className=\"mt-3 pt-3 border-t border-dark-border text-xs text-text-muted\">\n            Last updated: {formatLastUpdate(drone.lastUpdate)}\n          </div>\n        </div>\n      </Popup>\n    </Marker>\n  );\n};\n\nexport default DroneMarker;","import React from 'react';\nimport { Polyline, Marker, Popup } from 'react-leaflet';\nimport { divIcon } from 'leaflet';\nimport { MissionData } from '@/types/fleet';\n\ninterface MissionPathProps {\n  mission: MissionData;\n}\n\nconst MissionPath: React.FC<MissionPathProps> = ({ mission }) => {\n  const getPathColor = (status: string) => {\n    switch (status.toLowerCase()) {\n      case 'active':\n      case 'in_progress':\n        return '#1f6feb'; // Blue\n      case 'completed':\n        return '#238636'; // Green\n      case 'failed':\n      case 'cancelled':\n        return '#da3633'; // Red\n      case 'pending':\n      default:\n        return '#8b949e'; // Gray\n    }\n  };\n\n  const createWaypointIcon = (waypoint: any, index: number) => {\n    const isCompleted = waypoint.completed || index < (mission.currentWaypoint || 0);\n    const isCurrent = index === (mission.currentWaypoint || 0);\n    \n    return divIcon({\n      html: `\n        <div class=\"relative\">\n          <div class=\"w-4 h-4 rounded-full border-2 flex items-center justify-center text-xs font-bold\"\n               style=\"background-color: ${isCompleted ? '#238636' : isCurrent ? '#1f6feb' : '#161b22'}; \n                      border-color: ${isCompleted ? '#238636' : isCurrent ? '#1f6feb' : '#8b949e'};\n                      color: #f0f6fc\">\n            ${index + 1}\n          </div>\n          ${isCurrent ? `\n            <div class=\"absolute inset-0 animate-ping\">\n              <div class=\"w-4 h-4 bg-blue-400 rounded-full opacity-30\"></div>\n            </div>\n          ` : ''}\n        </div>\n      `,\n      className: 'waypoint-marker',\n      iconSize: [16, 16],\n      iconAnchor: [8, 8],\n      popupAnchor: [0, -8],\n    });\n  };\n\n  const getActionIcon = (action: string) => {\n    switch (action.toLowerCase()) {\n      case 'pickup':\n        return '';\n      case 'delivery':\n        return '';\n      case 'hover':\n        return '';\n      case 'survey':\n        return '';\n      default:\n        return '';\n    }\n  };\n\n  if (!mission.waypoints || mission.waypoints.length === 0) return null;\n\n  const pathPositions: [number, number][] = mission.waypoints\n    .filter(wp => wp.position.lat && wp.position.lng)\n    .map(wp => [wp.position.lat, wp.position.lng]);\n\n  if (pathPositions.length === 0) return null;\n\n  const pathColor = getPathColor(mission.status);\n\n  return (\n    <>\n      {/* Mission path */}\n      <Polyline\n        positions={pathPositions}\n        pathOptions={{\n          color: pathColor,\n          weight: 3,\n          opacity: 0.8,\n          dashArray: mission.status === 'pending' ? '10, 5' : undefined,\n        }}\n      />\n\n      {/* Waypoint markers */}\n      {mission.waypoints.map((waypoint, index) => {\n        if (!waypoint.position.lat || !waypoint.position.lng) return null;\n\n        return (\n          <Marker\n            key={`${mission.id}-wp-${index}`}\n            position={[waypoint.position.lat, waypoint.position.lng]}\n            icon={createWaypointIcon(waypoint, index)}\n          >\n            <Popup className=\"waypoint-popup\" maxWidth={250}>\n              <div className=\"bg-dark-secondary text-text-primary p-3 rounded-lg border border-dark-border\">\n                <div className=\"flex items-center justify-between mb-2\">\n                  <h4 className=\"font-semibold\">\n                    Waypoint {index + 1}\n                  </h4>\n                  <span className=\"text-lg\">\n                    {getActionIcon(waypoint.action)}\n                  </span>\n                </div>\n                \n                <div className=\"space-y-2 text-sm\">\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-text-secondary\">Action</span>\n                    <span className=\"capitalize\">{waypoint.action}</span>\n                  </div>\n                  \n                  <div className=\"flex justify-between\">\n                    <span className=\"text-text-secondary\">Altitude</span>\n                    <span className=\"font-mono\">{waypoint.position.alt}m</span>\n                  </div>\n                  \n                  {waypoint.hoverTime && (\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-text-secondary\">Hover Time</span>\n                      <span className=\"font-mono\">{waypoint.hoverTime}s</span>\n                    </div>\n                  )}\n                  \n                  <div className=\"flex justify-between\">\n                    <span className=\"text-text-secondary\">Status</span>\n                    <span className={`px-2 py-1 rounded text-xs font-medium ${\n                      waypoint.completed || index < (mission.currentWaypoint || 0)\n                        ? 'bg-green-900/30 text-green-400' \n                        : index === (mission.currentWaypoint || 0)\n                        ? 'bg-blue-900/30 text-blue-400'\n                        : 'bg-gray-900/30 text-gray-400'\n                    }`}>\n                      {waypoint.completed || index < (mission.currentWaypoint || 0) \n                        ? 'Completed' \n                        : index === (mission.currentWaypoint || 0)\n                        ? 'Current'\n                        : 'Pending'}\n                    </span>\n                  </div>\n                </div>\n\n                {waypoint.notes && (\n                  <div className=\"mt-2 pt-2 border-t border-dark-border\">\n                    <p className=\"text-xs text-text-secondary\">{waypoint.notes}</p>\n                  </div>\n                )}\n              </div>\n            </Popup>\n          </Marker>\n        );\n      })}\n    </>\n  );\n};\n\nexport default MissionPath;","import React, { useEffect, useState, useRef } from 'react';\nimport { MapContainer, TileLayer, useMap } from 'react-leaflet';\nimport { motion } from 'framer-motion';\nimport { DroneData, MissionData } from '@/types/fleet';\nimport DroneMarker from './DroneMarker';\nimport MissionPath from './MissionPath';\nimport 'leaflet/dist/leaflet.css';\nimport './FleetMap.css';\n\ninterface FleetMapProps {\n  drones: DroneData[];\n  missions?: MissionData[];\n  selectedDroneId?: string;\n  onDroneSelect: (droneId: string) => void;\n  className?: string;\n}\n\n// Component to handle map resizing\nconst MapResizer: React.FC = () => {\n  const map = useMap();\n  \n  useEffect(() => {\n    // Force map to resize when component mounts\n    const timer = setTimeout(() => {\n      map.invalidateSize();\n    }, 100);\n    \n    return () => clearTimeout(timer);\n  }, [map]);\n\n  return null;\n};\n\nconst FleetMap: React.FC<FleetMapProps> = ({\n  drones,\n  missions = [],\n  selectedDroneId,\n  onDroneSelect,\n  className = ''\n}) => {\n  const [mapCenter, setMapCenter] = useState<[number, number]>([37.7749, -122.4194]); // San Francisco\n  const [zoom, setZoom] = useState(12);\n  const mapContainerRef = useRef<HTMLDivElement>(null);\n\n  // Calculate map center based on drone positions\n  useEffect(() => {\n    if (drones.length > 0) {\n      const validDrones = drones.filter(drone => drone.position.lat && drone.position.lng);\n      if (validDrones.length > 0) {\n        const avgLat = validDrones.reduce((sum, drone) => sum + drone.position.lat, 0) / validDrones.length;\n        const avgLng = validDrones.reduce((sum, drone) => sum + drone.position.lng, 0) / validDrones.length;\n        setMapCenter([avgLat, avgLng]);\n      }\n    }\n  }, [drones]);\n\n  // Force map resize on container size changes\n  useEffect(() => {\n    const resizeObserver = new ResizeObserver(() => {\n      // Trigger a small delay to allow CSS to settle\n      setTimeout(() => {\n        window.dispatchEvent(new Event('resize'));\n      }, 100);\n    });\n\n    if (mapContainerRef.current) {\n      resizeObserver.observe(mapContainerRef.current);\n    }\n\n    return () => {\n      resizeObserver.disconnect();\n    };\n  }, []);\n\n  const getBatteryColor = (percentage: number): string => {\n    if (percentage > 70) return '#238636'; // Green\n    if (percentage > 30) return '#d29922'; // Amber\n    if (percentage > 15) return '#da3633'; // Red\n    return '#f85149'; // Critical red\n  };\n\n  const getStatusColor = (status: string): string => {\n    switch (status.toLowerCase()) {\n      case 'active':\n      case 'in_flight':\n        return '#238636'; // Green\n      case 'charging':\n      case 'returning':\n        return '#d29922'; // Amber\n      case 'maintenance':\n      case 'emergency':\n        return '#da3633'; // Red\n      case 'idle':\n      default:\n        return '#8b949e'; // Secondary text\n    }\n  };\n\n  return (\n    <div \n      ref={mapContainerRef}\n      className={`fleet-map-container relative h-full w-full bg-dark-primary rounded-lg overflow-hidden border border-dark-border ${className}`}\n    >\n      {/* Map Header */}\n      <motion.div \n        className=\"absolute top-4 left-4 z-[1000] bg-dark-secondary/90 backdrop-blur-sm rounded-lg p-3 shadow-lg border border-dark-border\"\n        initial={{ opacity: 0, y: -20 }}\n        animate={{ opacity: 1, y: 0 }}\n        transition={{ duration: 0.3 }}\n      >\n        <h3 className=\"text-text-primary font-semibold mb-2\">Fleet Overview</h3>\n        <div className=\"flex gap-4 text-sm\">\n          <div className=\"flex items-center gap-1\">\n            <div className=\"w-2 h-2 rounded-full bg-status-operational\"></div>\n            <span className=\"text-text-secondary\">\n              {drones.filter(d => d.status === 'active' || d.status === 'in_flight').length} Active\n            </span>\n          </div>\n          <div className=\"flex items-center gap-1\">\n            <div className=\"w-2 h-2 rounded-full bg-status-warning\"></div>\n            <span className=\"text-text-secondary\">\n              {drones.filter(d => d.status === 'charging' || d.status === 'idle').length} Standby\n            </span>\n          </div>\n          <div className=\"flex items-center gap-1\">\n            <div className=\"w-2 h-2 rounded-full bg-status-critical\"></div>\n            <span className=\"text-text-secondary\">\n              {drones.filter(d => d.status === 'maintenance' || d.status === 'emergency').length} Issues\n            </span>\n          </div>\n        </div>\n      </motion.div>\n\n      {/* Map Controls */}\n      <motion.div \n        className=\"absolute top-4 right-4 z-[1000] bg-dark-secondary/90 backdrop-blur-sm rounded-lg p-2 shadow-lg border border-dark-border\"\n        initial={{ opacity: 0, y: -20 }}\n        animate={{ opacity: 1, y: 0 }}\n        transition={{ duration: 0.3, delay: 0.1 }}\n      >\n        <div className=\"flex flex-col gap-2\">\n          <button\n            className=\"px-3 py-1 text-xs bg-dark-tertiary hover:bg-dark-hover text-text-primary rounded border border-dark-border transition-colors\"\n            onClick={() => setZoom(Math.min(zoom + 1, 18))}\n          >\n            Zoom In\n          </button>\n          <button\n            className=\"px-3 py-1 text-xs bg-dark-tertiary hover:bg-dark-hover text-text-primary rounded border border-dark-border transition-colors\"\n            onClick={() => setZoom(Math.max(zoom - 1, 1))}\n          >\n            Zoom Out\n          </button>\n          <button\n            className=\"px-3 py-1 text-xs bg-dark-tertiary hover:bg-dark-hover text-text-primary rounded border border-dark-border transition-colors\"\n            onClick={() => {\n              if (drones.length > 0) {\n                const validDrones = drones.filter(drone => drone.position.lat && drone.position.lng);\n                if (validDrones.length > 0) {\n                  const avgLat = validDrones.reduce((sum, drone) => sum + drone.position.lat, 0) / validDrones.length;\n                  const avgLng = validDrones.reduce((sum, drone) => sum + drone.position.lng, 0) / validDrones.length;\n                  setMapCenter([avgLat, avgLng]);\n                  setZoom(12);\n                }\n              }\n            }}\n          >\n            Center Fleet\n          </button>\n        </div>\n      </motion.div>\n\n      {/* Leaflet Map - Full Height */}\n      <div className=\"absolute inset-0 w-full h-full\">\n        <MapContainer\n          center={mapCenter}\n          zoom={zoom}\n          style={{ height: '100%', width: '100%', minHeight: '400px' }}\n          zoomControl={false}\n          attributionControl={false}\n          className=\"leaflet-container bg-dark-primary\"\n        >\n          {/* Map Resizer Component */}\n          <MapResizer />\n          \n          {/* Dark mode tile layer */}\n          <TileLayer\n            url=\"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png\"\n            attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors &copy; <a href=\"https://carto.com/attributions\">CARTO</a>'\n          />\n\n          {/* Mission paths */}\n          {missions.map((mission) => (\n            <MissionPath key={mission.id} mission={mission} />\n          ))}\n\n          {/* Drone markers */}\n          {drones.map((drone) => (\n            <DroneMarker\n              key={drone.id}\n              drone={drone}\n              isSelected={drone.id === selectedDroneId}\n              onSelect={() => onDroneSelect(drone.id)}\n              getBatteryColor={getBatteryColor}\n              getStatusColor={getStatusColor}\n            />\n          ))}\n        </MapContainer>\n      </div>\n\n      {/* Legend */}\n      <motion.div \n        className=\"absolute bottom-4 left-4 z-[1000] bg-dark-secondary/90 backdrop-blur-sm rounded-lg p-3 shadow-lg border border-dark-border\"\n        initial={{ opacity: 0, y: 20 }}\n        animate={{ opacity: 1, y: 0 }}\n        transition={{ duration: 0.3, delay: 0.2 }}\n      >\n        <h4 className=\"text-text-primary font-medium text-sm mb-2\">Legend</h4>\n        <div className=\"space-y-1 text-xs\">\n          <div className=\"flex items-center gap-2\">\n            <div className=\"w-3 h-3 rounded-full bg-status-operational border border-dark-border\"></div>\n            <span className=\"text-text-secondary\">Active Drone</span>\n          </div>\n          <div className=\"flex items-center gap-2\">\n            <div className=\"w-3 h-3 rounded-full bg-status-warning border border-dark-border\"></div>\n            <span className=\"text-text-secondary\">Standby/Charging</span>\n          </div>\n          <div className=\"flex items-center gap-2\">\n            <div className=\"w-3 h-3 rounded-full bg-status-critical border border-dark-border\"></div>\n            <span className=\"text-text-secondary\">Issue/Maintenance</span>\n          </div>\n          <div className=\"flex items-center gap-2\">\n            <div className=\"w-3 h-0.5 bg-status-active\"></div>\n            <span className=\"text-text-secondary\">Mission Path</span>\n          </div>\n        </div>\n      </motion.div>\n    </div>\n  );\n};\n\nexport default FleetMap;","import React from 'react';\nimport { motion } from 'framer-motion';\nimport { BoltIcon } from '@heroicons/react/24/outline';\n\ninterface BatteryIndicatorProps {\n  level: number;\n  voltage?: number;\n  status?: \"active\" | \"idle\" | \"in_flight\" | \"charging\" | \"maintenance\" | \"emergency\";\n  size?: 'sm' | 'md' | 'lg';\n  showLabel?: boolean;\n  showVoltage?: boolean;\n  inFlight?: boolean;\n  className?: string;\n}\n\nconst BatteryIndicator: React.FC<BatteryIndicatorProps> = ({\n  level,\n  voltage,\n  size = 'md',\n  showLabel = false,\n  showVoltage = false,\n  className = ''\n}) => {\n  const getBatteryColor = (percentage: number) => {\n    if (percentage > 70) return '#238636'; // Green\n    if (percentage > 30) return '#d29922'; // Amber\n    if (percentage > 15) return '#da3633'; // Red\n    return '#f85149'; // Critical red\n  };\n\n  const getBatteryWidth = () => {\n    switch (size) {\n      case 'sm': return 'w-12';\n      case 'lg': return 'w-20';\n      default: return 'w-16';\n    }\n  };\n\n  const getBatteryHeight = () => {\n    switch (size) {\n      case 'sm': return 'h-6';\n      case 'lg': return 'h-10';\n      default: return 'h-8';\n    }\n  };\n\n  const getTextSize = () => {\n    switch (size) {\n      case 'sm': return 'text-xs';\n      case 'lg': return 'text-base';\n      default: return 'text-sm';\n    }\n  };\n\n  const color = getBatteryColor(level);\n  const isLow = level < 30;\n  const isCritical = level < 15;\n\n  return (\n    <div className={`flex items-center gap-2 ${className}`}>\n      <div className=\"flex items-center gap-1\">\n        {/* Battery Icon */}\n        <div className=\"relative\">\n          <div \n            className={`${getBatteryWidth()} ${getBatteryHeight()} border-2 rounded-sm relative overflow-hidden`}\n            style={{ borderColor: color }}\n          >\n            {/* Battery Fill */}\n            <motion.div\n              className=\"h-full rounded-sm\"\n              style={{ backgroundColor: color }}\n              initial={{ width: 0 }}\n              animate={{ width: `${Math.max(level, 0)}%` }}\n              transition={{ duration: 0.5, ease: \"easeOut\" }}\n            />\n            \n            {/* Low battery pulse effect */}\n            {isCritical && (\n              <motion.div\n                className=\"absolute inset-0 bg-red-500\"\n                animate={{ opacity: [0.3, 0.7, 0.3] }}\n                transition={{ duration: 1, repeat: Infinity }}\n              />\n            )}\n          </div>\n          \n          {/* Battery Terminal */}\n          <div \n            className={`absolute -right-1 top-1/2 transform -translate-y-1/2 w-1 bg-current rounded-r-sm ${\n              size === 'sm' ? 'h-2' : size === 'lg' ? 'h-4' : 'h-3'\n            }`}\n            style={{ color: color }}\n          />\n          \n          {/* Low battery warning icon */}\n          {isLow && (\n            <div className=\"absolute -top-1 -right-1\">\n              <BoltIcon \n                className={`${size === 'sm' ? 'w-3 h-3' : 'w-4 h-4'} text-red-500`}\n              />\n            </div>\n          )}\n        </div>\n\n        {/* Percentage Label */}\n        {showLabel && (\n          <span \n            className={`font-mono font-semibold ${getTextSize()}`}\n            style={{ color }}\n          >\n            {level.toFixed(0)}%\n          </span>\n        )}\n      </div>\n\n      {/* Voltage Display */}\n      {showVoltage && voltage && (\n        <div className={`text-text-secondary ${getTextSize()}`}>\n          <span className=\"font-mono\">{voltage.toFixed(1)}V</span>\n        </div>\n      )}\n\n      {/* Status Text */}\n      {showLabel && size !== 'sm' && (\n        <div className={`${getTextSize()} text-text-secondary`}>\n          {isCritical ? 'Critical' : isLow ? 'Low' : level > 80 ? 'Excellent' : 'Good'}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default BatteryIndicator;","import React from 'react';\nimport { motion } from 'framer-motion';\nimport { \n  Battery0Icon as BoltIcon,\n  ClockIcon,\n  ExclamationTriangleIcon,\n  EyeIcon,\n  CheckCircleIcon,\n  ShieldExclamationIcon,\n  FireIcon,\n  ArrowPathIcon,\n  QueueListIcon\n} from '@heroicons/react/24/outline';\nimport { DroneData } from '@/types/fleet';\nimport BatteryIndicator from '@/components/telemetry/BatteryIndicator';\n\ninterface DroneStatusCardProps {\n  drone: DroneData;\n  isSelected: boolean;\n  onSelect: () => void;\n  onAction?: (droneId: string, action: string) => void;\n  index: number;\n}\n\nconst DroneStatusCard: React.FC<DroneStatusCardProps> = ({\n  drone,\n  isSelected,\n  onSelect,\n  onAction,\n  index\n}) => {\n  const getStatusConfig = (status: string) => {\n    switch (status.toLowerCase()) {\n      case 'active':\n      case 'in_flight':\n        return {\n          color: '#238636',\n          bgColor: '#238636',\n          label: 'Active',\n          icon: CheckCircleIcon,\n        };\n      case 'charging':\n        return {\n          color: '#d29922',\n          bgColor: '#d29922',\n          label: 'Charging',\n          icon: BoltIcon,\n        };\n      case 'maintenance':\n        return {\n          color: '#da3633',\n          bgColor: '#da3633',\n          label: 'Maintenance',\n          icon: ExclamationTriangleIcon,\n        };\n      case 'emergency':\n        return {\n          color: '#f85149',\n          bgColor: '#f85149',\n          label: 'Emergency',\n          icon: ShieldExclamationIcon,\n        };\n      case 'idle':\n      default:\n        return {\n          color: '#8b949e',\n          bgColor: '#8b949e',\n          label: 'Idle',\n          icon: ClockIcon,\n        };\n    }\n  };\n\n  const formatTimeAgo = (timestamp: string) => {\n    const date = new Date(timestamp);\n    const now = new Date();\n    const diffMs = now.getTime() - date.getTime();\n    const diffSeconds = Math.floor(diffMs / 1000);\n    \n    if (diffSeconds < 60) return `${diffSeconds}s ago`;\n    if (diffSeconds < 3600) return `${Math.floor(diffSeconds / 60)}m ago`;\n    return `${Math.floor(diffSeconds / 3600)}h ago`;\n  };\n\n  const statusConfig = getStatusConfig(drone.status);\n  const StatusIcon = statusConfig.icon;\n\n  const handleAction = (actionId: string, e: React.MouseEvent) => {\n    e.stopPropagation();\n    if (actionId === 'view') {\n      onSelect();\n    } else if (onAction) {\n      onAction(drone.id, actionId);\n    }\n  };\n\n  return (\n    <motion.div\n      layout\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      exit={{ opacity: 0, y: -20 }}\n      transition={{ duration: 0.3, delay: index * 0.05 }}\n      onClick={onSelect}\n      className={`\n        relative bg-dark-tertiary rounded-lg p-3 border cursor-pointer transition-all duration-200 hover:bg-dark-hover w-full\n        ${isSelected \n          ? 'border-status-active shadow-glow' \n          : 'border-dark-border hover:border-dark-hover'\n        }\n      `}\n    >\n      {/* Compact Header Row */}\n      <div className=\"flex items-center justify-between mb-2\">\n        <div className=\"flex items-center gap-3 flex-1\">\n          {/* Status Icon - Smaller */}\n          <div className=\"flex-shrink-0 relative\">\n            <div \n              className=\"w-8 h-8 rounded-full flex items-center justify-center border\"\n              style={{ \n                backgroundColor: statusConfig.bgColor + '20',\n                borderColor: statusConfig.color \n              }}\n            >\n              <StatusIcon className=\"w-4 h-4\" style={{ color: statusConfig.color }} />\n            </div>\n            \n            {/* Compact Alert Badge */}\n            {drone.alerts && drone.alerts.length > 0 && (\n              <div className=\"absolute -top-1 -right-1 w-3 h-3 bg-status-warning rounded-full flex items-center justify-center\">\n                <span className=\"text-xs font-bold text-white text-[10px]\">{drone.alerts.length}</span>\n              </div>\n            )}\n          </div>\n\n          {/* Drone Name & Status */}\n          <div className=\"flex-1 min-w-0\">\n            <div className=\"flex items-center gap-2\">\n              <h3 className=\"font-medium text-text-primary text-sm truncate\">{drone.name}</h3>\n              <span className=\"text-text-secondary text-xs font-mono\">{drone.id}</span>\n            </div>\n            <div className={`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium mt-1`}\n                 style={{ \n                   backgroundColor: statusConfig.color + '20', \n                   color: statusConfig.color \n                 }}>\n              {statusConfig.label}\n            </div>\n          </div>\n        </div>\n\n        {/* Quick Action - Only View */}\n        <button\n          onClick={(e) => handleAction('view', e)}\n          className=\"p-1.5 rounded hover:bg-dark-secondary transition-colors flex-shrink-0\"\n          title=\"View Details\"\n          style={{ color: '#1f6feb' }}\n        >\n          <EyeIcon className=\"w-4 h-4\" />\n        </button>\n      </div>\n\n      {/* Compact Metrics - Vertical Stack for better spacing */}\n      <div className=\"space-y-2\">\n        {/* Battery Row */}\n        <div className=\"flex items-center justify-between\">\n          <span className=\"text-text-secondary text-xs\">Battery</span>\n          <div className=\"flex items-center gap-1\">\n            <div className=\"w-16\">\n              <BatteryIndicator\n                level={drone.batteryLevel}\n                voltage={drone.batteryVoltage}\n                inFlight={['active', 'in_flight'].includes(drone.status)}\n                status={drone.status}\n                size=\"sm\"\n                showVoltage={false}\n              />\n            </div>\n            <span className=\"text-xs text-text-primary font-mono\">{Math.round(drone.batteryLevel)}%</span>\n          </div>\n        </div>\n\n        {/* Signal Row */}\n        <div className=\"flex items-center justify-between\">\n          <span className=\"text-text-secondary text-xs\">Signal</span>\n          <div className=\"flex items-center gap-2\">\n            <div className=\"flex items-end gap-0.5\">\n              {[0, 1, 2, 3].map((bar) => (\n                <div\n                  key={bar}\n                  className={`w-0.5 rounded-sm ${\n                    bar === 0 ? 'h-2' : bar === 1 ? 'h-3' : bar === 2 ? 'h-4' : 'h-4'\n                  }`}\n                  style={{ \n                    backgroundColor: drone.signalStrength > -50 - (bar * 20) ? '#238636' : '#30363d'\n                  }}\n                />\n              ))}\n            </div>\n            <span className=\"text-xs font-mono text-text-secondary truncate\">{Math.round(drone.signalStrength)}dBm</span>\n          </div>\n        </div>\n\n        {/* Emergency State Row */}\n        {drone.emergencyState && !drone.emergencyState.resolved && (\n          <div className=\"flex items-center justify-between bg-red-900/20 border border-red-500/30 rounded p-1.5\">\n            <div className=\"flex items-center gap-2\">\n              <FireIcon className=\"w-3 h-3 text-red-400 flex-shrink-0\" />\n              <span className=\"text-xs font-medium text-red-400\">EMERGENCY</span>\n            </div>\n            <div className=\"flex items-center gap-1\">\n              <span className=\"text-xs text-red-300 truncate max-w-20\" title={drone.emergencyState.description}>\n                {drone.emergencyState.type.replace('_', ' ').toUpperCase()}\n              </span>\n            </div>\n          </div>\n        )}\n\n        {/* Coordination Status Row */}\n        {drone.alerts?.some(alert => alert.category === 'coordination') && (\n          <div className=\"flex items-center justify-between bg-blue-900/20 border border-blue-500/30 rounded p-1.5\">\n            <div className=\"flex items-center gap-2\">\n              <ArrowPathIcon className=\"w-3 h-3 text-blue-400 flex-shrink-0\" />\n              <span className=\"text-xs font-medium text-blue-400\">COORDINATION</span>\n            </div>\n            <div className=\"flex items-center gap-1\">\n              <span className=\"text-xs text-blue-300 truncate max-w-24\">\n                {drone.alerts.find(a => a.category === 'coordination')?.message.includes('avoidance') ? 'MANEUVER' : 'WARNING'}\n              </span>\n            </div>\n          </div>\n        )}\n\n        {/* Charging Status Row */}\n        {drone.alerts?.some(alert => alert.category === 'charging') && (\n          <div className=\"flex items-center justify-between bg-yellow-900/20 border border-yellow-500/30 rounded p-1.5\">\n            <div className=\"flex items-center gap-2\">\n              {drone.status === 'charging' ? (\n                <BoltIcon className=\"w-3 h-3 text-yellow-400 flex-shrink-0\" />\n              ) : (\n                <QueueListIcon className=\"w-3 h-3 text-yellow-400 flex-shrink-0\" />\n              )}\n              <span className=\"text-xs font-medium text-yellow-400\">\n                {drone.status === 'charging' ? 'CHARGING' : 'QUEUED'}\n              </span>\n            </div>\n            <div className=\"flex items-center gap-1\">\n              <span className=\"text-xs text-yellow-300 truncate max-w-24\">\n                {drone.status === 'charging' ? \n                  drone.alerts.find(a => a.category === 'charging')?.message.match(/\\d+min/)?.[0] || 'ACTIVE' :\n                  `POS ${drone.alerts.find(a => a.category === 'charging')?.message.match(/position (\\d+)/)?.[1] || '?'}`\n                }\n              </span>\n            </div>\n          </div>\n        )}\n\n        {/* Mission/Altitude Row */}\n        <div className=\"flex items-center justify-between\">\n          <span className=\"text-text-secondary text-xs\">\n            {drone.currentMission ? 'Mission' : 'Altitude'}\n          </span>\n          {drone.currentMission ? (\n            <div className=\"flex items-center gap-1\">\n              <div className=\"w-1.5 h-1.5 bg-status-active rounded-full\"></div>\n              <span className=\"text-xs text-text-primary font-medium\">{Math.round(drone.currentMission.progress)}%</span>\n            </div>\n          ) : (\n            <span className=\"text-xs text-text-primary font-mono\">{Math.round(drone.position.alt)}m</span>\n          )}\n        </div>\n      </div>\n\n      {/* Bottom Info Row */}\n      <div className=\"flex items-center justify-between mt-2 pt-2 border-t border-dark-border text-xs\">\n        <div className=\"flex items-center gap-2 min-w-0 flex-1\">\n          <span className=\"text-text-secondary whitespace-nowrap\">{Math.round(drone.speed * 10) / 10}m/s</span>\n          {drone.alerts && drone.alerts.length > 0 && (\n            <span className=\"text-status-warning whitespace-nowrap\">{drone.alerts.length} alerts</span>\n          )}\n        </div>\n        <span className=\"text-text-muted text-right whitespace-nowrap flex-shrink-0\">{formatTimeAgo(drone.lastUpdate)}</span>\n      </div>\n    </motion.div>\n  );\n};\n\nexport default DroneStatusCard;","import React from 'react';\nimport { motion } from 'framer-motion';\nimport { \n  Battery0Icon as BoltIcon, \n  ExclamationTriangleIcon, \n  CheckCircleIcon\n} from '@heroicons/react/24/outline';\n\ninterface FleetSummaryProps {\n  stats: {\n    total: number;\n    active: number;\n    charging: number;\n    maintenance: number;\n    idle: number;\n    lowBattery: number;\n    alerts: number;\n    avgBattery: number;\n  };\n}\n\nconst FleetSummary: React.FC<FleetSummaryProps> = ({ stats }) => {\n  const getBatteryColor = (percentage: number) => {\n    if (percentage > 70) return '#238636';\n    if (percentage > 30) return '#d29922';\n    return '#da3633';\n  };\n\n  const summaryItems = [\n    {\n      label: 'Total Drones',\n      value: stats.total,\n      color: '#8b949e',\n      icon: null,\n    },\n    {\n      label: 'Active',\n      value: stats.active,\n      color: '#238636',\n      icon: CheckCircleIcon,\n    },\n    {\n      label: 'Avg Battery',\n      value: `${stats.avgBattery.toFixed(0)}%`,\n      color: getBatteryColor(stats.avgBattery),\n      icon: BoltIcon,\n    },\n    {\n      label: 'Alerts',\n      value: stats.alerts,\n      color: stats.alerts > 0 ? '#d29922' : '#8b949e',\n      icon: ExclamationTriangleIcon,\n      highlight: stats.alerts > 0,\n    },\n  ];\n\n  return (\n    <div className=\"grid grid-cols-4 gap-4\">\n      {summaryItems.map((item, index) => (\n        <motion.div\n          key={item.label}\n          initial={{ opacity: 0, y: 10 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.3, delay: index * 0.1 }}\n          className={`text-center p-3 rounded-lg ${\n            item.highlight ? 'bg-dark-tertiary border border-status-warning/30' : 'bg-dark-tertiary'\n          }`}\n        >\n          {item.icon && (\n            <div className=\"flex justify-center mb-1\">\n              <item.icon className=\"w-4 h-4\" style={{ color: item.color }} />\n            </div>\n          )}\n          <div \n            className=\"text-xl font-bold\"\n            style={{ color: item.color }}\n          >\n            {item.value}\n          </div>\n          <div className=\"text-xs text-text-secondary\">{item.label}</div>\n        </motion.div>\n      ))}\n    </div>\n  );\n};\n\nexport default FleetSummary;","import React, { useState } from 'react';\nimport { AnimatePresence } from 'framer-motion';\nimport { XCircleIcon } from '@heroicons/react/24/outline';\nimport { DroneData } from '@/types/fleet';\nimport DroneStatusCard from './DroneStatusCard';\nimport FleetSummary from './FleetSummary';\n\ninterface FleetStatusProps {\n  drones: DroneData[];\n  selectedDroneId?: string;\n  onDroneSelect: (droneId: string) => void;\n  onDroneAction?: (droneId: string, action: string) => void;\n  className?: string;\n}\n\nconst FleetStatus: React.FC<FleetStatusProps> = ({\n  drones,\n  selectedDroneId,\n  onDroneSelect,\n  onDroneAction,\n  className = ''\n}) => {\n  const [filterStatus, setFilterStatus] = useState<'all' | 'active' | 'issues' | 'idle'>('all');\n  const [sortBy, setSortBy] = useState<'name' | 'battery' | 'status' | 'lastUpdate'>('status');\n\n  // Calculate fleet statistics\n  const stats = {\n    total: drones.length,\n    active: drones.filter(d => d.status === 'active' || d.status === 'in_flight').length,\n    charging: drones.filter(d => d.status === 'charging').length,\n    maintenance: drones.filter(d => d.status === 'maintenance' || d.status === 'emergency').length,\n    idle: drones.filter(d => d.status === 'idle').length,\n    lowBattery: drones.filter(d => d.batteryLevel < 30).length,\n    alerts: drones.reduce((sum, d) => sum + (d.alerts?.length || 0), 0),\n    avgBattery: drones.length > 0 ? drones.reduce((sum, d) => sum + d.batteryLevel, 0) / drones.length : 0,\n  };\n\n  // Filter and sort drones\n  const filteredDrones = drones\n    .filter(drone => {\n      switch (filterStatus) {\n        case 'active':\n          return drone.status === 'active' || drone.status === 'in_flight';\n        case 'issues':\n          return drone.status === 'maintenance' || drone.status === 'emergency' || (drone.alerts && drone.alerts.length > 0);\n        case 'idle':\n          return drone.status === 'idle' || drone.status === 'charging';\n        default:\n          return true;\n      }\n    })\n    .sort((a, b) => {\n      switch (sortBy) {\n        case 'name':\n          return a.name.localeCompare(b.name);\n        case 'battery':\n          return b.batteryLevel - a.batteryLevel;\n        case 'status':\n          const statusOrder = { emergency: 0, maintenance: 1, active: 2, in_flight: 2, charging: 3, idle: 4 };\n          return (statusOrder[a.status] || 5) - (statusOrder[b.status] || 5);\n        case 'lastUpdate':\n          return new Date(b.lastUpdate).getTime() - new Date(a.lastUpdate).getTime();\n        default:\n          return 0;\n      }\n    });\n\n  const filterOptions = [\n    { value: 'all', label: `All (${stats.total})`, count: stats.total },\n    { value: 'active', label: `Active (${stats.active})`, count: stats.active },\n    { value: 'issues', label: `Issues (${stats.maintenance})`, count: stats.maintenance },\n    { value: 'idle', label: `Idle (${stats.idle + stats.charging})`, count: stats.idle + stats.charging },\n  ];\n\n  const recentActivity = [\n    { id: '1', type: 'mission_complete', drone: 'DRN001', message: 'Delivery mission completed successfully', timestamp: new Date(Date.now() - 300000) },\n    { id: '2', type: 'battery_low', drone: 'DRN003', message: 'Battery level below 25%', timestamp: new Date(Date.now() - 600000) },\n    { id: '3', type: 'charging_start', drone: 'DRN002', message: 'Started charging at Station Alpha', timestamp: new Date(Date.now() - 900000) },\n    { id: '4', type: 'mission_start', drone: 'DRN004', message: 'Started emergency medical delivery', timestamp: new Date(Date.now() - 1200000) },\n    { id: '5', type: 'maintenance', drone: 'DRN005', message: 'Scheduled maintenance completed', timestamp: new Date(Date.now() - 1800000) },\n  ];\n\n  return (\n    <div className={`h-full flex flex-col ${className}`}>\n      {/* Fleet Summary */}\n      <div className=\"p-4 border-b border-dark-border\">\n        <FleetSummary stats={stats} />\n      </div>\n\n      {/* Controls */}\n      <div className=\"p-4 border-b border-dark-border\">\n        <div className=\"flex flex-col gap-3\">\n          {/* Filter Buttons */}\n          <div className=\"grid grid-cols-2 gap-1\">\n            {filterOptions.map((option) => (\n              <button\n                key={option.value}\n                onClick={() => setFilterStatus(option.value as any)}\n                className={`px-2 py-1 rounded text-xs font-medium transition-all duration-200 ${\n                  filterStatus === option.value\n                    ? 'bg-dark-tertiary text-text-primary border border-dark-border'\n                    : 'text-text-secondary hover:text-text-primary hover:bg-dark-hover'\n                }`}\n              >\n                {option.label}\n              </button>\n            ))}\n          </div>\n\n          {/* Sort Dropdown */}\n          <select\n            value={sortBy}\n            onChange={(e) => setSortBy(e.target.value as any)}\n            className=\"w-full px-2 py-1 bg-dark-tertiary text-text-primary rounded border border-dark-border text-xs focus:outline-none focus:ring-1 focus:ring-status-active\"\n          >\n            <option value=\"status\">Sort by Status</option>\n            <option value=\"name\">Sort by Name</option>\n            <option value=\"battery\">Sort by Battery</option>\n            <option value=\"lastUpdate\">Sort by Update</option>\n          </select>\n        </div>\n      </div>\n\n      {/* Drone Cards */}\n      <div className=\"flex-1 overflow-y-auto scrollbar-thin\">\n        <div className=\"p-2 space-y-3\">\n          <AnimatePresence mode=\"popLayout\">\n            {filteredDrones.map((drone, index) => (\n              <DroneStatusCard\n                key={drone.id}\n                drone={drone}\n                isSelected={drone.id === selectedDroneId}\n                onSelect={() => onDroneSelect(drone.id)}\n                onAction={onDroneAction}\n                index={index}\n              />\n            ))}\n          </AnimatePresence>\n\n          {filteredDrones.length === 0 && (\n            <div className=\"text-center py-8 text-text-secondary\">\n              <XCircleIcon className=\"w-8 h-8 mx-auto mb-2 opacity-50\" />\n              <p className=\"text-sm\">No drones match filter</p>\n              <button \n                onClick={() => setFilterStatus('all')}\n                className=\"mt-2 px-2 py-1 bg-dark-tertiary text-text-primary rounded text-xs hover:bg-dark-hover transition-colors\"\n              >\n                Show All\n              </button>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Activity Feed - Collapsed at bottom */}\n      <div className=\"border-t border-dark-border\">\n        <div className=\"p-3\">\n          <h4 className=\"text-sm font-medium text-text-primary mb-2\">Recent Activity</h4>\n          <div className=\"space-y-1\">\n            {recentActivity.slice(0, 3).map((activity) => (\n              <div key={activity.id} className=\"text-xs text-text-secondary\">\n                <span className=\"font-medium\">{activity.drone}:</span> {activity.message}\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default FleetStatus;","import React from 'react';\nimport { motion } from 'framer-motion';\nimport { WifiIcon } from '@heroicons/react/24/outline';\n\ninterface ConnectionStatusProps {\n  strength: number; // Signal strength in dBm\n  quality?: 'excellent' | 'good' | 'poor' | 'very_poor';\n  size?: 'sm' | 'md' | 'lg';\n  showLabel?: boolean;\n  showStrength?: boolean;\n  className?: string;\n}\n\nconst ConnectionStatus: React.FC<ConnectionStatusProps> = ({\n  strength,\n  quality,\n  size = 'md',\n  showLabel = false,\n  showStrength = false,\n  className = ''\n}) => {\n  const getConnectionQuality = (signalStrength: number) => {\n    if (signalStrength > -50) return { level: 'Excellent', color: '#238636', bars: 4 };\n    if (signalStrength > -70) return { level: 'Good', color: '#d29922', bars: 3 };\n    if (signalStrength > -85) return { level: 'Fair', color: '#d29922', bars: 2 };\n    if (signalStrength > -95) return { level: 'Poor', color: '#da3633', bars: 1 };\n    return { level: 'Very Poor', color: '#f85149', bars: 0 };\n  };\n\n  const getBarHeight = (barIndex: number) => {\n    switch (size) {\n      case 'sm':\n        return barIndex === 0 ? 'h-2' : barIndex === 1 ? 'h-3' : barIndex === 2 ? 'h-4' : 'h-5';\n      case 'lg':\n        return barIndex === 0 ? 'h-4' : barIndex === 1 ? 'h-6' : barIndex === 2 ? 'h-8' : 'h-10';\n      default:\n        return barIndex === 0 ? 'h-3' : barIndex === 1 ? 'h-4' : barIndex === 2 ? 'h-5' : 'h-6';\n    }\n  };\n\n  const getBarWidth = () => {\n    switch (size) {\n      case 'sm': return 'w-0.5';\n      case 'lg': return 'w-1';\n      default: return 'w-0.5';\n    }\n  };\n\n  const getTextSize = () => {\n    switch (size) {\n      case 'sm': return 'text-xs';\n      case 'lg': return 'text-base';\n      default: return 'text-sm';\n    }\n  };\n\n  const connection = getConnectionQuality(strength);\n  const qualityOverride = quality ? {\n    excellent: { level: 'Excellent', color: '#238636', bars: 4 },\n    good: { level: 'Good', color: '#238636', bars: 3 },\n    poor: { level: 'Poor', color: '#da3633', bars: 2 },\n    very_poor: { level: 'Very Poor', color: '#f85149', bars: 1 }\n  }[quality] : null;\n\n  const displayConfig = qualityOverride || connection;\n\n  return (\n    <div className={`flex items-center gap-2 ${className}`}>\n      {/* Signal Bars */}\n      <div className=\"flex items-end gap-0.5\">\n        {[0, 1, 2, 3].map((barIndex) => (\n          <motion.div\n            key={barIndex}\n            className={`${getBarWidth()} ${getBarHeight(barIndex)} rounded-sm`}\n            style={{ \n              backgroundColor: barIndex < displayConfig.bars ? displayConfig.color : '#30363d' \n            }}\n            initial={{ scaleY: 0 }}\n            animate={{ scaleY: 1 }}\n            transition={{ duration: 0.3, delay: barIndex * 0.1 }}\n          />\n        ))}\n      </div>\n\n      {/* Signal Quality Label */}\n      {showLabel && (\n        <span \n          className={`font-medium ${getTextSize()}`}\n          style={{ color: displayConfig.color }}\n        >\n          {displayConfig.level}\n        </span>\n      )}\n\n      {/* Signal Strength Value */}\n      {showStrength && (\n        <div className={`text-text-secondary ${getTextSize()}`}>\n          <span className=\"font-mono\">{strength}dBm</span>\n        </div>\n      )}\n\n      {/* Connection Icon for very poor signal */}\n      {displayConfig.bars === 0 && (\n        <div className=\"relative\">\n          <WifiIcon className={`${size === 'sm' ? 'w-3 h-3' : 'w-4 h-4'} text-red-500`} />\n          <div className=\"absolute inset-0 flex items-center justify-center\">\n            <div className=\"w-0.5 h-full bg-red-500 rotate-45\"></div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default ConnectionStatus;","import React, { useState } from 'react';\nimport { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, ReferenceLine } from 'recharts';\nimport { motion } from 'framer-motion';\nimport { DroneData } from '@/types/fleet';\n\ninterface TelemetryChartProps {\n  data: any[];\n  drone: DroneData;\n}\n\nconst TelemetryChart: React.FC<TelemetryChartProps> = ({ data }) => {\n  const [selectedMetric, setSelectedMetric] = useState<'battery' | 'altitude' | 'speed' | 'signal'>('battery');\n\n  const metrics = [\n    { \n      id: 'battery', \n      label: 'Battery Level', \n      color: '#238636', \n      unit: '%',\n      min: 0,\n      max: 100,\n      criticalLevel: 20\n    },\n    { \n      id: 'altitude', \n      label: 'Altitude', \n      color: '#1f6feb', \n      unit: 'm',\n      min: 0,\n      max: Math.max(150, Math.max(...data.map(d => d.altitude || 0)) + 20)\n    },\n    { \n      id: 'speed', \n      label: 'Ground Speed', \n      color: '#d29922', \n      unit: 'm/s',\n      min: 0,\n      max: Math.max(20, Math.max(...data.map(d => d.speed || 0)) + 5)\n    },\n    { \n      id: 'signal', \n      label: 'Signal Strength', \n      color: '#8957e5', \n      unit: 'dBm',\n      min: -100,\n      max: -30,\n      criticalLevel: -90\n    }\n  ];\n\n  const currentMetric = metrics.find(m => m.id === selectedMetric)!;\n\n  const formatData = (data: any[]) => {\n    return data.map(point => ({\n      ...point,\n      time: new Date(point.timestamp).toLocaleTimeString('en-US', { \n        hour12: false, \n        minute: '2-digit', \n        second: '2-digit' \n      })\n    }));\n  };\n\n  const CustomTooltip = ({ active, payload, label }: any) => {\n    if (active && payload && payload.length) {\n      return (\n        <div className=\"bg-dark-secondary border border-dark-border rounded-lg p-3 shadow-lg\">\n          <p className=\"text-text-secondary text-sm\">{`Time: ${label}`}</p>\n          <p className=\"text-text-primary font-semibold\">\n            {`${currentMetric.label}: ${payload[0].value.toFixed(1)}${currentMetric.unit}`}\n          </p>\n        </div>\n      );\n    }\n    return null;\n  };\n\n  if (data.length === 0) {\n    return (\n      <div className=\"text-center text-text-secondary py-8\">\n        <div className=\"text-4xl mb-2\"></div>\n        <p>No telemetry data available</p>\n        <p className=\"text-sm\">Charts will appear once data starts flowing</p>\n      </div>\n    );\n  }\n\n  const chartData = formatData(data);\n\n  return (\n    <div className=\"space-y-4\">\n      {/* Metric Selector */}\n      <div className=\"flex flex-wrap gap-2\">\n        {metrics.map((metric) => (\n          <button\n            key={metric.id}\n            onClick={() => setSelectedMetric(metric.id as any)}\n            className={`px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 ${\n              selectedMetric === metric.id\n                ? 'bg-dark-tertiary text-text-primary border border-dark-border'\n                : 'text-text-secondary hover:text-text-primary hover:bg-dark-hover'\n            }`}\n          >\n            <div className=\"flex items-center gap-2\">\n              <div \n                className=\"w-3 h-3 rounded-full\"\n                style={{ backgroundColor: metric.color }}\n              />\n              {metric.label}\n            </div>\n          </button>\n        ))}\n      </div>\n\n      {/* Chart */}\n      <motion.div\n        key={selectedMetric}\n        initial={{ opacity: 0, y: 20 }}\n        animate={{ opacity: 1, y: 0 }}\n        transition={{ duration: 0.3 }}\n        className=\"bg-dark-tertiary rounded-lg p-4\"\n      >\n        <div className=\"flex items-center justify-between mb-4\">\n          <h3 className=\"text-text-primary font-semibold\">\n            {currentMetric.label} Over Time\n          </h3>\n          <div className=\"text-text-secondary text-sm\">\n            Last {chartData.length} data points\n          </div>\n        </div>\n\n        <div className=\"h-64\">\n          <ResponsiveContainer width=\"100%\" height=\"100%\">\n            <LineChart data={chartData} margin={{ top: 5, right: 30, left: 20, bottom: 5 }}>\n              <CartesianGrid \n                strokeDasharray=\"3 3\" \n                stroke=\"#30363d\" \n              />\n              <XAxis \n                dataKey=\"time\" \n                stroke=\"#8b949e\"\n                fontSize={12}\n                interval=\"preserveStartEnd\"\n              />\n              <YAxis \n                stroke=\"#8b949e\"\n                fontSize={12}\n                domain={[currentMetric.min, currentMetric.max]}\n              />\n              <Tooltip content={<CustomTooltip />} />\n              \n              {/* Critical level reference line */}\n              {currentMetric.criticalLevel !== undefined && (\n                <ReferenceLine \n                  y={currentMetric.criticalLevel} \n                  stroke=\"#da3633\" \n                  strokeDasharray=\"5 5\"\n                  label={{ \n                    value: \"Critical\", \n                    position: \"top\",\n                    fill: \"#da3633\",\n                    fontSize: 10\n                  }}\n                />\n              )}\n              \n              <Line\n                type=\"monotone\"\n                dataKey={selectedMetric}\n                stroke={currentMetric.color}\n                strokeWidth={2}\n                dot={{ fill: currentMetric.color, strokeWidth: 2, r: 3 }}\n                activeDot={{ r: 5, stroke: currentMetric.color, strokeWidth: 2 }}\n                connectNulls={false}\n              />\n            </LineChart>\n          </ResponsiveContainer>\n        </div>\n\n        {/* Current Value Display */}\n        <div className=\"mt-4 pt-4 border-t border-dark-border\">\n          <div className=\"flex items-center justify-between\">\n            <span className=\"text-text-secondary\">Current Value:</span>\n            <div className=\"flex items-center gap-2\">\n              <span className=\"text-2xl font-bold text-text-primary\">\n                {chartData.length > 0 \n                  ? chartData[chartData.length - 1][selectedMetric]?.toFixed(1) || 'N/A'\n                  : 'N/A'\n                }\n              </span>\n              <span className=\"text-text-secondary\">{currentMetric.unit}</span>\n            </div>\n          </div>\n          \n          {/* Trend Indicator */}\n          {chartData.length > 1 && (\n            <div className=\"flex items-center justify-between mt-2\">\n              <span className=\"text-text-secondary\">Trend:</span>\n              {(() => {\n                const current = chartData[chartData.length - 1][selectedMetric];\n                const previous = chartData[chartData.length - 2][selectedMetric];\n                const diff = current - previous;\n                const isIncreasing = diff > 0;\n                const isDecreasing = diff < 0;\n                \n                return (\n                  <div className={`flex items-center gap-1 text-sm ${\n                    isIncreasing ? 'text-green-400' : isDecreasing ? 'text-red-400' : 'text-text-secondary'\n                  }`}>\n                    <span>\n                      {isIncreasing ? '' : isDecreasing ? '' : ''}\n                    </span>\n                    <span>\n                      {Math.abs(diff).toFixed(2)} {currentMetric.unit}\n                    </span>\n                  </div>\n                );\n              })()}\n            </div>\n          )}\n        </div>\n      </motion.div>\n\n      {/* Statistics Summary */}\n      <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-4\">\n        {['min', 'max', 'avg', 'current'].map((stat) => {\n          let value, label;\n          const values = chartData.map(d => d[selectedMetric]).filter(v => v !== undefined && v !== null);\n          \n          switch (stat) {\n            case 'min':\n              value = values.length > 0 ? Math.min(...values) : 0;\n              label = 'Minimum';\n              break;\n            case 'max':\n              value = values.length > 0 ? Math.max(...values) : 0;\n              label = 'Maximum';\n              break;\n            case 'avg':\n              value = values.length > 0 ? values.reduce((a, b) => a + b, 0) / values.length : 0;\n              label = 'Average';\n              break;\n            case 'current':\n              value = values.length > 0 ? values[values.length - 1] : 0;\n              label = 'Current';\n              break;\n            default:\n              value = 0;\n              label = '';\n          }\n          \n          return (\n            <div key={stat} className=\"bg-dark-tertiary rounded-lg p-3\">\n              <div className=\"text-text-secondary text-sm\">{label}</div>\n              <div className=\"text-xl font-bold text-text-primary\">\n                {value.toFixed(1)}\n              </div>\n              <div className=\"text-xs text-text-secondary\">{currentMetric.unit}</div>\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n};\n\nexport default TelemetryChart;","import React, { useMemo } from 'react';\nimport { motion } from 'framer-motion';\nimport { \n  ExclamationTriangleIcon, \n  XCircleIcon, \n  InformationCircleIcon,\n  ClockIcon,\n  CheckCircleIcon,\n  XMarkIcon\n} from '@heroicons/react/24/outline';\n\ninterface Alert {\n  id: string;\n  severity: 'info' | 'warning' | 'error' | 'critical';\n  message: string;\n  timestamp: string;\n  category?: string;\n  acknowledged?: boolean;\n  resolved?: boolean;\n}\n\ninterface AlertsListProps {\n  alerts: Alert[];\n  droneId: string;\n  onAcknowledge?: (alertId: string) => void;\n  onResolve?: (alertId: string) => void;\n  onDismiss?: (alertId: string) => void;\n}\n\nconst AlertsList: React.FC<AlertsListProps> = ({ \n  alerts, \n  droneId, \n  onAcknowledge, \n  onResolve, \n  onDismiss \n}) => {\n  const getSeverityConfig = (severity: string) => {\n    switch (severity) {\n      case 'critical':\n        return {\n          color: '#f85149',\n          bgColor: '#da3633',\n          icon: XCircleIcon,\n          label: 'Critical',\n        };\n      case 'error':\n        return {\n          color: '#da3633',\n          bgColor: '#da3633',\n          icon: XCircleIcon,\n          label: 'Error',\n        };\n      case 'warning':\n        return {\n          color: '#d29922',\n          bgColor: '#d29922',\n          icon: ExclamationTriangleIcon,\n          label: 'Warning',\n        };\n      case 'info':\n        return {\n          color: '#1f6feb',\n          bgColor: '#1f6feb',\n          icon: InformationCircleIcon,\n          label: 'Info',\n        };\n      default:\n        return {\n          color: '#8b949e',\n          bgColor: '#8b949e',\n          icon: InformationCircleIcon,\n          label: 'Unknown',\n        };\n    }\n  };\n\n  const formatTimeAgo = (timestamp: string) => {\n    const date = new Date(timestamp);\n    const now = new Date();\n    const diffMs = now.getTime() - date.getTime();\n    const diffSeconds = Math.floor(diffMs / 1000);\n    const diffMinutes = Math.floor(diffSeconds / 60);\n    const diffHours = Math.floor(diffMinutes / 60);\n    \n    if (diffSeconds < 60) return `${diffSeconds}s ago`;\n    if (diffMinutes < 60) return `${diffMinutes}m ago`;\n    if (diffHours < 24) return `${diffHours}h ago`;\n    return date.toLocaleDateString();\n  };\n\n  // Memoize sorted alerts to prevent constant resorting that causes flashing\n  const { activeAlerts, resolvedAlerts } = useMemo(() => {\n    const sortedAlerts = [...alerts].sort((a, b) => {\n      const severityOrder = { critical: 4, error: 3, warning: 2, info: 1 };\n      const severityDiff = (severityOrder[b.severity] || 0) - (severityOrder[a.severity] || 0);\n      if (severityDiff !== 0) return severityDiff;\n      \n      return new Date(b.timestamp).getTime() - new Date(a.timestamp).getTime();\n    });\n\n    return {\n      activeAlerts: sortedAlerts.filter(alert => !alert.resolved),\n      resolvedAlerts: sortedAlerts.filter(alert => alert.resolved)\n    };\n  }, [alerts]);\n\n  if (alerts.length === 0) {\n    return (\n      <div className=\"text-center py-8\">\n        <CheckCircleIcon className=\"w-12 h-12 mx-auto text-status-operational mb-3\" />\n        <h3 className=\"text-lg font-semibold text-text-primary mb-2\">No Active Alerts</h3>\n        <p className=\"text-text-secondary\">All systems are operating normally</p>\n      </div>\n    );\n  }\n\n  const AlertItem: React.FC<{ alert: Alert; index: number }> = React.memo(({ alert, index }) => {\n    const config = getSeverityConfig(alert.severity);\n    const IconComponent = config.icon;\n\n    return (\n      <motion.div\n        initial={{ opacity: 0, y: 10 }}\n        animate={{ opacity: 1, y: 0 }}\n        transition={{ duration: 0.2, delay: Math.min(index * 0.05, 0.3) }}\n        className={`bg-dark-tertiary rounded-lg border-l-4 p-4 ${\n          alert.acknowledged ? 'opacity-75' : ''\n        } ${alert.resolved ? 'opacity-50' : ''}`}\n        style={{ borderLeftColor: config.color }}\n      >\n        <div className=\"flex items-start justify-between\">\n          <div className=\"flex items-start gap-3 flex-1\">\n            <div className=\"flex-shrink-0 mt-0.5\">\n              <IconComponent className=\"w-5 h-5\" style={{ color: config.color }} />\n            </div>\n            \n            <div className=\"flex-1\">\n              <div className=\"flex items-center gap-2 mb-1\">\n                <span \n                  className=\"px-2 py-1 rounded text-xs font-medium\"\n                  style={{ \n                    backgroundColor: config.bgColor + '20', \n                    color: config.color \n                  }}\n                >\n                  {config.label}\n                </span>\n                \n                {alert.category && (\n                  <span className=\"px-2 py-1 bg-dark-border text-text-secondary rounded text-xs\">\n                    {alert.category}\n                  </span>\n                )}\n                \n                {alert.acknowledged && (\n                  <span className=\"px-2 py-1 bg-blue-900/30 text-blue-400 rounded text-xs\">\n                    Acknowledged\n                  </span>\n                )}\n                \n                {alert.resolved && (\n                  <span className=\"px-2 py-1 bg-green-900/30 text-green-400 rounded text-xs\">\n                    Resolved\n                  </span>\n                )}\n              </div>\n              \n              <p className=\"text-text-primary text-sm mb-2\">{alert.message}</p>\n              \n              <div className=\"flex items-center gap-4 text-xs text-text-secondary\">\n                <div className=\"flex items-center gap-1\">\n                  <ClockIcon className=\"w-3 h-3\" />\n                  {formatTimeAgo(alert.timestamp)}\n                </div>\n                \n                <div className=\"flex items-center gap-1\">\n                  <span>Drone:</span>\n                  <span className=\"font-mono\">{droneId}</span>\n                </div>\n              </div>\n            </div>\n          </div>\n          \n          {/* Action Buttons */}\n          <div className=\"flex items-center gap-2 ml-3\">\n            {!alert.resolved && !alert.acknowledged && onAcknowledge && (\n              <button\n                onClick={() => onAcknowledge(alert.id)}\n                className=\"px-2 py-1 bg-blue-900/30 text-blue-400 hover:bg-blue-900/50 rounded text-xs transition-colors\"\n                title=\"Acknowledge alert\"\n              >\n                Ack\n              </button>\n            )}\n            \n            {alert.acknowledged && !alert.resolved && onResolve && (\n              <button\n                onClick={() => onResolve(alert.id)}\n                className=\"px-2 py-1 bg-green-900/30 text-green-400 hover:bg-green-900/50 rounded text-xs transition-colors\"\n                title=\"Mark as resolved\"\n              >\n                Resolve\n              </button>\n            )}\n            \n            {onDismiss && (\n              <button\n                onClick={() => onDismiss(alert.id)}\n                className=\"p-1 text-text-secondary hover:text-text-primary transition-colors\"\n                title=\"Dismiss alert\"\n              >\n                <XMarkIcon className=\"w-4 h-4\" />\n              </button>\n            )}\n          </div>\n        </div>\n      </motion.div>\n    );\n  });\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Active Alerts */}\n      {activeAlerts.length > 0 && (\n        <div>\n          <div className=\"flex items-center justify-between mb-4\">\n            <h3 className=\"text-lg font-semibold text-text-primary\">\n              Active Alerts ({activeAlerts.length})\n            </h3>\n            \n            {activeAlerts.filter(a => a.severity === 'critical' || a.severity === 'error').length > 0 && (\n              <div className=\"flex items-center gap-1 text-status-critical text-sm\">\n                <ExclamationTriangleIcon className=\"w-4 h-4\" />\n                Attention Required\n              </div>\n            )}\n          </div>\n          \n          <div className=\"space-y-3\">\n            {activeAlerts.map((alert, index) => (\n              <AlertItem key={alert.id} alert={alert} index={index} />\n            ))}\n          </div>\n        </div>\n      )}\n      \n      {/* Resolved Alerts */}\n      {resolvedAlerts.length > 0 && (\n        <div>\n          <h3 className=\"text-lg font-semibold text-text-primary mb-4\">\n            Recent Resolved ({resolvedAlerts.length})\n          </h3>\n          \n          <div className=\"space-y-3\">\n            {resolvedAlerts.slice(0, 5).map((alert, index) => (\n              <AlertItem key={alert.id} alert={alert} index={index} />\n            ))}\n          </div>\n          \n          {resolvedAlerts.length > 5 && (\n            <p className=\"text-text-secondary text-sm mt-3 text-center\">\n              +{resolvedAlerts.length - 5} more resolved alerts\n            </p>\n          )}\n        </div>\n      )}\n      \n      {/* Alert Statistics */}\n      <div className=\"bg-dark-tertiary rounded-lg p-4\">\n        <h4 className=\"font-semibold text-text-primary mb-3\">Alert Summary</h4>\n        \n        <div className=\"grid grid-cols-2 gap-4 text-sm\">\n          <div>\n            <span className=\"text-text-secondary\">Total Alerts</span>\n            <div className=\"text-xl font-bold text-text-primary\">{alerts.length}</div>\n          </div>\n          \n          <div>\n            <span className=\"text-text-secondary\">Active</span>\n            <div className=\"text-xl font-bold text-status-warning\">{activeAlerts.length}</div>\n          </div>\n          \n          <div>\n            <span className=\"text-text-secondary\">Critical</span>\n            <div className=\"text-xl font-bold text-status-critical\">\n              {alerts.filter(a => a.severity === 'critical' && !a.resolved).length}\n            </div>\n          </div>\n          \n          <div>\n            <span className=\"text-text-secondary\">Resolved</span>\n            <div className=\"text-xl font-bold text-status-operational\">{resolvedAlerts.length}</div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default AlertsList;","import React, { useState, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { \n  Battery0Icon as BatteryIcon, \n  SignalIcon, \n  GlobeAltIcon as CompassIcon,\n  RocketLaunchIcon as SpeedIcon,\n  ExclamationTriangleIcon,\n  CheckCircleIcon,\n  MapPinIcon,\n  WifiIcon,\n  CpuChipIcon,\n  FireIcon as TemperatureIcon\n} from '@heroicons/react/24/outline';\nimport { DroneData } from '@/types/fleet';\nimport BatteryIndicator from '../BatteryIndicator';\nimport ConnectionStatus from '../ConnectionStatus';\nimport TelemetryChart from './TelemetryChart';\nimport AlertsList from './AlertsList';\n\ninterface TelemetryPanelProps {\n  drone: DroneData | null;\n  isLive?: boolean;\n  className?: string;\n}\n\nconst TelemetryPanel: React.FC<TelemetryPanelProps> = ({ \n  drone, \n  isLive = true,\n  className = '' \n}) => {\n  const [activeTab, setActiveTab] = useState<'overview' | 'charts' | 'alerts' | 'system'>('overview');\n  const [telemetryHistory, setTelemetryHistory] = useState<any[]>([]);\n\n  // Simulate telemetry history for charts\n  useEffect(() => {\n    if (drone && isLive) {\n      const newDataPoint = {\n        timestamp: Date.now(),\n        battery: drone.batteryLevel,\n        altitude: drone.position.alt,\n        speed: drone.speed,\n        signalStrength: drone.signalStrength,\n      };\n      \n      setTelemetryHistory(prev => {\n        const updated = [...prev, newDataPoint];\n        // Keep last 50 data points\n        return updated.slice(-50);\n      });\n    }\n  }, [drone, isLive]);\n\n  if (!drone) {\n    return (\n      <div className={`h-full w-full flex items-center justify-center ${className}`}>\n        <div className=\"text-center text-text-secondary\">\n          <CpuChipIcon className=\"w-12 h-12 mx-auto mb-3 opacity-50\" />\n          <h3 className=\"text-lg font-semibold mb-2\">No Drone Selected</h3>\n          <p className=\"text-sm\">Select a drone from the map or fleet list to view telemetry data.</p>\n        </div>\n      </div>\n    );\n  }\n\n  const formatLastUpdate = (timestamp: string) => {\n    const date = new Date(timestamp);\n    const now = new Date();\n    const diffMs = now.getTime() - date.getTime();\n    const diffSeconds = Math.floor(diffMs / 1000);\n    \n    if (diffSeconds < 60) return `${diffSeconds}s ago`;\n    if (diffSeconds < 3600) return `${Math.floor(diffSeconds / 60)}m ago`;\n    return `${Math.floor(diffSeconds / 3600)}h ago`;\n  };\n\n  const getStatusColor = (status: string): string => {\n    switch (status.toLowerCase()) {\n      case 'active':\n      case 'in_flight':\n        return '#238636';\n      case 'charging':\n      case 'returning':\n        return '#d29922';\n      case 'maintenance':\n      case 'emergency':\n        return '#da3633';\n      case 'idle':\n      default:\n        return '#8b949e';\n    }\n  };\n\n  const tabs = [\n    { id: 'overview', label: 'Overview', icon: CpuChipIcon },\n    { id: 'charts', label: 'Charts', icon: SpeedIcon },\n    { id: 'alerts', label: 'Alerts', icon: ExclamationTriangleIcon, count: drone.alerts?.length || 0 },\n    { id: 'system', label: 'System', icon: WifiIcon },\n  ];\n\n  return (\n    <div className={`h-full w-full flex flex-col overflow-hidden ${className}`}>\n      {/* Header */}\n      <div className=\"flex-shrink-0 p-3 border-b border-dark-border\">\n        <div className=\"flex items-center justify-between mb-2\">\n          <div>\n            <h2 className=\"text-lg font-semibold text-text-primary\">{drone.name}</h2>\n            <p className=\"text-text-secondary text-xs\">{drone.id}</p>\n          </div>\n          <div className=\"flex items-center gap-2\">\n            {isLive && (\n              <div className=\"flex items-center gap-1\">\n                <div className=\"w-2 h-2 bg-status-operational rounded-full animate-pulse\"></div>\n                <span className=\"text-xs text-text-secondary\">Live</span>\n              </div>\n            )}\n            <div className={`px-2 py-0.5 rounded text-xs font-medium border`}\n                 style={{ \n                   backgroundColor: getStatusColor(drone.status) + '20',\n                   color: getStatusColor(drone.status),\n                   borderColor: getStatusColor(drone.status) + '40'\n                 }}>\n              {drone.status.toUpperCase()}\n            </div>\n          </div>\n        </div>\n\n        {/* Tab Navigation */}\n        <div className=\"flex space-x-0.5\">\n          {tabs.map((tab) => (\n            <button\n              key={tab.id}\n              onClick={() => setActiveTab(tab.id as any)}\n              className={`px-2 py-1 rounded text-xs font-medium transition-all duration-200 flex items-center gap-1 ${\n                activeTab === tab.id\n                  ? 'bg-dark-tertiary text-text-primary border border-dark-border'\n                  : 'text-text-secondary hover:text-text-primary hover:bg-dark-hover'\n              }`}\n            >\n              <tab.icon className=\"w-3 h-3\" />\n              {tab.label}\n              {tab.count !== undefined && tab.count > 0 && (\n                <span className=\"bg-status-critical text-white text-xs rounded-full px-1 py-0.5 min-w-[14px] text-center\">\n                  {tab.count}\n                </span>\n              )}\n            </button>\n          ))}\n        </div>\n      </div>\n\n      {/* Content */}\n      <div className=\"flex-1 overflow-hidden\">\n        <div className=\"h-full overflow-y-auto p-3\">\n        <AnimatePresence mode=\"wait\">\n          {activeTab === 'overview' && (\n            <motion.div\n              key=\"overview\"\n              initial={{ opacity: 0, x: 20 }}\n              animate={{ opacity: 1, x: 0 }}\n              exit={{ opacity: 0, x: -20 }}\n              transition={{ duration: 0.2 }}\n              className=\"space-y-4\"\n            >\n              {/* Key Metrics Grid */}\n              <div className=\"grid grid-cols-2 gap-3\">\n                {/* Battery */}\n                <div className=\"bg-dark-tertiary rounded p-2\">\n                  <div className=\"flex items-center gap-1 mb-1\">\n                    <BatteryIcon className=\"w-4 h-4 text-text-secondary\" />\n                    <span className=\"text-xs text-text-secondary\">Battery</span>\n                  </div>\n                  <BatteryIndicator \n                    level={drone.batteryLevel} \n                    voltage={drone.batteryVoltage}\n                    showLabel={true}\n                    size=\"sm\"\n                  />\n                </div>\n\n                {/* Connection */}\n                <div className=\"bg-dark-tertiary rounded p-2\">\n                  <div className=\"flex items-center gap-1 mb-1\">\n                    <SignalIcon className=\"w-4 h-4 text-text-secondary\" />\n                    <span className=\"text-xs text-text-secondary\">Signal</span>\n                  </div>\n                  <ConnectionStatus \n                    strength={drone.signalStrength}\n                    quality={drone.connectionQuality}\n                    showLabel={true}\n                    size=\"sm\"\n                  />\n                </div>\n\n                {/* Altitude */}\n                <div className=\"bg-dark-tertiary rounded p-2\">\n                  <div className=\"flex items-center gap-1 mb-1\">\n                    <MapPinIcon className=\"w-4 h-4 text-text-secondary\" />\n                    <span className=\"text-xs text-text-secondary\">Altitude</span>\n                  </div>\n                  <div className=\"text-lg font-bold text-text-primary\">\n                    {drone.position.alt.toFixed(1)}\n                  </div>\n                  <div className=\"text-xs text-text-secondary\">meters</div>\n                </div>\n\n                {/* Speed */}\n                <div className=\"bg-dark-tertiary rounded p-2\">\n                  <div className=\"flex items-center gap-1 mb-1\">\n                    <SpeedIcon className=\"w-4 h-4 text-text-secondary\" />\n                    <span className=\"text-xs text-text-secondary\">Speed</span>\n                  </div>\n                  <div className=\"text-lg font-bold text-text-primary\">\n                    {drone.speed.toFixed(1)}\n                  </div>\n                  <div className=\"text-xs text-text-secondary\">m/s</div>\n                </div>\n              </div>\n\n              {/* Position & Orientation */}\n              <div className=\"bg-dark-tertiary rounded p-3\">\n                <h3 className=\"font-medium text-text-primary mb-2 flex items-center gap-1\">\n                  <CompassIcon className=\"w-4 h-4\" />\n                  Position & Orientation\n                </h3>\n                <div className=\"grid grid-cols-1 gap-2 text-xs\">\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-text-secondary\">Latitude</span>\n                    <span className=\"font-mono text-text-primary\">\n                      {drone.position.lat.toFixed(6)}\n                    </span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-text-secondary\">Longitude</span>\n                    <span className=\"font-mono text-text-primary\">\n                      {drone.position.lng.toFixed(6)}\n                    </span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-text-secondary\">Heading</span>\n                    <span className=\"font-mono text-text-primary\">\n                      {drone.heading.toFixed(1)}\n                    </span>\n                  </div>\n                </div>\n              </div>\n\n              {/* Mission Status */}\n              {drone.currentMission && (\n                <div className=\"bg-dark-tertiary rounded p-3\">\n                  <h3 className=\"font-medium text-text-primary mb-2 flex items-center gap-1\">\n                    <CheckCircleIcon className=\"w-4 h-4\" />\n                    Current Mission\n                  </h3>\n                  <div className=\"space-y-1 text-xs\">\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-text-secondary\">Mission</span>\n                      <span className=\"text-text-primary truncate ml-2\">{drone.currentMission.name}</span>\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-text-secondary\">Progress</span>\n                      <span className=\"text-text-primary\">{drone.currentMission.progress}%</span>\n                    </div>\n                    {drone.currentMission.eta && (\n                      <div className=\"flex justify-between\">\n                        <span className=\"text-text-secondary\">ETA</span>\n                        <span className=\"text-text-primary\">{drone.currentMission.eta}</span>\n                      </div>\n                    )}\n                    <div className=\"w-full bg-dark-border rounded-full h-1.5 mt-2\">\n                      <div \n                        className=\"bg-status-active h-1.5 rounded-full transition-all duration-300\"\n                        style={{ width: `${drone.currentMission.progress}%` }}\n                      />\n                    </div>\n                  </div>\n                </div>\n              )}\n            </motion.div>\n          )}\n\n          {activeTab === 'charts' && (\n            <motion.div\n              key=\"charts\"\n              initial={{ opacity: 0, x: 20 }}\n              animate={{ opacity: 1, x: 0 }}\n              exit={{ opacity: 0, x: -20 }}\n              transition={{ duration: 0.2 }}\n            >\n              <TelemetryChart data={telemetryHistory} drone={drone} />\n            </motion.div>\n          )}\n\n          {activeTab === 'alerts' && (\n            <motion.div\n              key=\"alerts\"\n              initial={{ opacity: 0, x: 20 }}\n              animate={{ opacity: 1, x: 0 }}\n              exit={{ opacity: 0, x: -20 }}\n              transition={{ duration: 0.2 }}\n            >\n              <AlertsList alerts={drone.alerts || []} droneId={drone.id} />\n            </motion.div>\n          )}\n\n          {activeTab === 'system' && (\n            <motion.div\n              key=\"system\"\n              initial={{ opacity: 0, x: 20 }}\n              animate={{ opacity: 1, x: 0 }}\n              exit={{ opacity: 0, x: -20 }}\n              transition={{ duration: 0.2 }}\n              className=\"space-y-4\"\n            >\n              {/* System Information */}\n              <div className=\"bg-dark-tertiary rounded-lg p-4\">\n                <h3 className=\"font-semibold text-text-primary mb-3\">System Information</h3>\n                <div className=\"space-y-2 text-sm\">\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-text-secondary\">Firmware</span>\n                    <span className=\"text-text-primary font-mono\">{drone.firmware || 'v1.12.3'}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-text-secondary\">Hardware</span>\n                    <span className=\"text-text-primary\">{drone.hardware || 'Pixhawk 4'}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-text-secondary\">Uptime</span>\n                    <span className=\"text-text-primary\">{drone.uptime || '2h 34m'}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-text-secondary\">Last Update</span>\n                    <span className=\"text-text-primary\">{formatLastUpdate(drone.lastUpdate)}</span>\n                  </div>\n                </div>\n              </div>\n\n              {/* Environmental */}\n              <div className=\"bg-dark-tertiary rounded-lg p-4\">\n                <h3 className=\"font-semibold text-text-primary mb-3 flex items-center gap-2\">\n                  <TemperatureIcon className=\"w-5 h-5\" />\n                  Environmental\n                </h3>\n                <div className=\"grid grid-cols-2 gap-4 text-sm\">\n                  <div>\n                    <span className=\"text-text-secondary\">Temperature</span>\n                    <div className=\"font-mono text-text-primary\">\n                      {drone.temperature || 28.5}C\n                    </div>\n                  </div>\n                  <div>\n                    <span className=\"text-text-secondary\">Humidity</span>\n                    <div className=\"font-mono text-text-primary\">\n                      {drone.humidity || 65}%\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </motion.div>\n          )}\n        </AnimatePresence>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default TelemetryPanel;","import { DroneData, MissionData, FleetAlert } from '@/types/fleet';\n\n// WebSocket connection states\nexport enum ConnectionState {\n  CONNECTING = 'connecting',\n  CONNECTED = 'connected',\n  DISCONNECTED = 'disconnected',\n  RECONNECTING = 'reconnecting',\n  ERROR = 'error'\n}\n\n// Message types from telemetry service\nexport interface TelemetryMessage {\n  type: 'drone_update' | 'mission_update' | 'fleet_alert' | 'heartbeat';\n  timestamp: string;\n  data: any;\n}\n\nexport interface DroneUpdateMessage extends TelemetryMessage {\n  type: 'drone_update';\n  data: DroneData;\n}\n\nexport interface MissionUpdateMessage extends TelemetryMessage {\n  type: 'mission_update';\n  data: MissionData;\n}\n\nexport interface FleetAlertMessage extends TelemetryMessage {\n  type: 'fleet_alert';\n  data: FleetAlert;\n}\n\nexport interface HeartbeatMessage extends TelemetryMessage {\n  type: 'heartbeat';\n  data: { server_time: string; connected_clients: number };\n}\n\n// Connection configuration\ninterface WebSocketConfig {\n  url: string;\n  reconnectInterval: number;\n  maxReconnectAttempts: number;\n  heartbeatInterval: number;\n  connectionTimeout: number;\n}\n\n// Default configuration\nconst DEFAULT_CONFIG: WebSocketConfig = {\n  url: 'ws://localhost:3001/telemetry',\n  reconnectInterval: 3000, // 3 seconds\n  maxReconnectAttempts: 10,\n  heartbeatInterval: 30000, // 30 seconds\n  connectionTimeout: 10000, // 10 seconds\n};\n\n// Event callback types\ntype ConnectionStateCallback = (state: ConnectionState, error?: Error) => void;\ntype MessageCallback = (message: TelemetryMessage) => void;\ntype DroneUpdateCallback = (drone: DroneData) => void;\ntype MissionUpdateCallback = (mission: MissionData) => void;\ntype FleetAlertCallback = (alert: FleetAlert) => void;\n\nexport class TelemetryWebSocketService {\n  private ws: WebSocket | null = null;\n  private config: WebSocketConfig;\n  private connectionState: ConnectionState = ConnectionState.DISCONNECTED;\n  private reconnectAttempts = 0;\n  private reconnectTimer: number | null = null;\n  private heartbeatTimer: number | null = null;\n  private connectionTimer: number | null = null;\n\n  // Event callbacks\n  private onConnectionStateChange: ConnectionStateCallback | null = null;\n  private onMessage: MessageCallback | null = null;\n  private onDroneUpdate: DroneUpdateCallback | null = null;\n  private onMissionUpdate: MissionUpdateCallback | null = null;\n  private onFleetAlert: FleetAlertCallback | null = null;\n\n  // Statistics\n  private stats = {\n    messagesReceived: 0,\n    messagesProcessed: 0,\n    lastMessageTime: null as Date | null,\n    connectionUptime: null as Date | null,\n    reconnectCount: 0\n  };\n\n  constructor(config?: Partial<WebSocketConfig>) {\n    this.config = { ...DEFAULT_CONFIG, ...config };\n  }\n\n  // Public API\n  connect(): void {\n    if (this.connectionState === ConnectionState.CONNECTED || \n        this.connectionState === ConnectionState.CONNECTING) {\n      console.warn('WebSocket already connected or connecting');\n      return;\n    }\n\n    this.setConnectionState(ConnectionState.CONNECTING);\n    this.clearTimers();\n\n    try {\n      this.ws = new WebSocket(this.config.url);\n      this.setupEventHandlers();\n      this.startConnectionTimeout();\n    } catch (error) {\n      console.error('Failed to create WebSocket connection:', error);\n      this.setConnectionState(ConnectionState.ERROR, error as Error);\n      this.scheduleReconnect();\n    }\n  }\n\n  disconnect(): void {\n    console.log('Disconnecting from telemetry service...');\n    this.clearTimers();\n    \n    if (this.ws) {\n      this.ws.close(1000, 'Client disconnect');\n      this.ws = null;\n    }\n    \n    this.setConnectionState(ConnectionState.DISCONNECTED);\n    this.reconnectAttempts = 0;\n  }\n\n  // Event listeners\n  setConnectionStateCallback(callback: ConnectionStateCallback): void {\n    this.onConnectionStateChange = callback;\n  }\n\n  onTelemetryMessage(callback: MessageCallback): void {\n    this.onMessage = callback;\n  }\n\n  onDroneDataUpdate(callback: DroneUpdateCallback): void {\n    this.onDroneUpdate = callback;\n  }\n\n  onMissionDataUpdate(callback: MissionUpdateCallback): void {\n    this.onMissionUpdate = callback;\n  }\n\n  onFleetAlertReceived(callback: FleetAlertCallback): void {\n    this.onFleetAlert = callback;\n  }\n\n  // Getters\n  getConnectionState(): ConnectionState {\n    return this.connectionState;\n  }\n\n  getStatistics() {\n    return {\n      ...this.stats,\n      connectionState: this.connectionState,\n      reconnectAttempts: this.reconnectAttempts,\n      uptime: this.stats.connectionUptime \n        ? Date.now() - this.stats.connectionUptime.getTime()\n        : 0\n    };\n  }\n\n  isConnected(): boolean {\n    return this.connectionState === ConnectionState.CONNECTED;\n  }\n\n  // Private methods\n  private setupEventHandlers(): void {\n    if (!this.ws) return;\n\n    this.ws.onopen = () => {\n      console.log('Connected to telemetry service');\n      this.clearConnectionTimeout();\n      this.setConnectionState(ConnectionState.CONNECTED);\n      this.reconnectAttempts = 0;\n      this.stats.connectionUptime = new Date();\n      this.stats.reconnectCount++;\n      this.startHeartbeat();\n    };\n\n    this.ws.onmessage = (event) => {\n      try {\n        const message: TelemetryMessage = JSON.parse(event.data);\n        this.handleMessage(message);\n      } catch (error) {\n        console.error('Failed to parse telemetry message:', error, event.data);\n      }\n    };\n\n    this.ws.onclose = (event) => {\n      console.log('WebSocket connection closed:', event.code, event.reason);\n      this.clearTimers();\n      \n      if (event.code !== 1000) { // Not a normal closure\n        this.setConnectionState(ConnectionState.DISCONNECTED);\n        this.scheduleReconnect();\n      } else {\n        this.setConnectionState(ConnectionState.DISCONNECTED);\n      }\n    };\n\n    this.ws.onerror = (error) => {\n      console.error('WebSocket error:', error);\n      this.setConnectionState(ConnectionState.ERROR, new Error('WebSocket connection error'));\n    };\n  }\n\n  private handleMessage(message: TelemetryMessage): void {\n    this.stats.messagesReceived++;\n    this.stats.lastMessageTime = new Date();\n\n    // Call general message callback\n    if (this.onMessage) {\n      this.onMessage(message);\n    }\n\n    // Handle specific message types\n    try {\n      switch (message.type) {\n        case 'drone_update':\n          const droneMessage = message as DroneUpdateMessage;\n          if (this.onDroneUpdate) {\n            this.onDroneUpdate(droneMessage.data);\n          }\n          break;\n\n        case 'mission_update':\n          const missionMessage = message as MissionUpdateMessage;\n          if (this.onMissionUpdate) {\n            this.onMissionUpdate(missionMessage.data);\n          }\n          break;\n\n        case 'fleet_alert':\n          const alertMessage = message as FleetAlertMessage;\n          if (this.onFleetAlert) {\n            this.onFleetAlert(alertMessage.data);\n          }\n          break;\n\n        case 'heartbeat':\n          // Just log heartbeat for debugging\n          console.debug('Heartbeat received from server');\n          break;\n\n        default:\n          console.warn('Unknown message type:', message.type);\n      }\n\n      this.stats.messagesProcessed++;\n    } catch (error) {\n      console.error('Failed to process telemetry message:', error, message);\n    }\n  }\n\n  private setConnectionState(state: ConnectionState, error?: Error): void {\n    if (this.connectionState !== state) {\n      this.connectionState = state;\n      console.log(`WebSocket state changed to: ${state}`);\n      \n      if (this.onConnectionStateChange) {\n        this.onConnectionStateChange(state, error);\n      }\n    }\n  }\n\n  private scheduleReconnect(): void {\n    if (this.reconnectAttempts >= this.config.maxReconnectAttempts) {\n      console.error('Max reconnect attempts reached');\n      this.setConnectionState(ConnectionState.ERROR, new Error('Max reconnect attempts exceeded'));\n      return;\n    }\n\n    this.reconnectAttempts++;\n    this.setConnectionState(ConnectionState.RECONNECTING);\n    \n    console.log(`Attempting to reconnect in ${this.config.reconnectInterval}ms (attempt ${this.reconnectAttempts}/${this.config.maxReconnectAttempts})`);\n    \n    this.reconnectTimer = setTimeout(() => {\n      this.connect();\n    }, this.config.reconnectInterval);\n  }\n\n  private startHeartbeat(): void {\n    this.heartbeatTimer = setInterval(() => {\n      if (this.ws?.readyState === WebSocket.OPEN) {\n        // Send ping to server\n        try {\n          this.ws.send(JSON.stringify({ type: 'ping', timestamp: new Date().toISOString() }));\n        } catch (error) {\n          console.error('Failed to send heartbeat:', error);\n        }\n      }\n    }, this.config.heartbeatInterval);\n  }\n\n  private startConnectionTimeout(): void {\n    this.connectionTimer = setTimeout(() => {\n      if (this.connectionState === ConnectionState.CONNECTING) {\n        console.error('Connection timeout');\n        this.setConnectionState(ConnectionState.ERROR, new Error('Connection timeout'));\n        this.ws?.close();\n        this.scheduleReconnect();\n      }\n    }, this.config.connectionTimeout);\n  }\n\n  private clearConnectionTimeout(): void {\n    if (this.connectionTimer) {\n      clearTimeout(this.connectionTimer);\n      this.connectionTimer = null;\n    }\n  }\n\n  private clearTimers(): void {\n    if (this.reconnectTimer) {\n      clearTimeout(this.reconnectTimer);\n      this.reconnectTimer = null;\n    }\n    \n    if (this.heartbeatTimer) {\n      clearInterval(this.heartbeatTimer);\n      this.heartbeatTimer = null;\n    }\n    \n    this.clearConnectionTimeout();\n  }\n}\n\n// Singleton instance\nexport const telemetryService = new TelemetryWebSocketService();","import React from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { \n  WifiIcon, \n  ExclamationTriangleIcon, \n  ArrowPathIcon,\n  XCircleIcon,\n  CheckCircleIcon\n} from '@heroicons/react/24/outline';\nimport { ConnectionState } from '@/services/websocket';\n\ninterface ConnectionStatusIndicatorProps {\n  connectionState: ConnectionState;\n  isConnected: boolean;\n  error?: string;\n  className?: string;\n}\n\nconst ConnectionStatusIndicator: React.FC<ConnectionStatusIndicatorProps> = ({\n  connectionState,\n  error,\n  className = ''\n}) => {\n  const getStatusConfig = () => {\n    switch (connectionState) {\n      case ConnectionState.CONNECTED:\n        return {\n          icon: CheckCircleIcon,\n          color: '#238636',\n          bgColor: '#238636',\n          text: 'Connected',\n          description: 'Real-time telemetry active',\n          pulse: false,\n        };\n      case ConnectionState.CONNECTING:\n        return {\n          icon: ArrowPathIcon,\n          color: '#d29922',\n          bgColor: '#d29922',\n          text: 'Connecting',\n          description: 'Establishing connection...',\n          pulse: true,\n        };\n      case ConnectionState.RECONNECTING:\n        return {\n          icon: ArrowPathIcon,\n          color: '#d29922',\n          bgColor: '#d29922',\n          text: 'Reconnecting',\n          description: 'Attempting to reconnect...',\n          pulse: true,\n        };\n      case ConnectionState.ERROR:\n        return {\n          icon: ExclamationTriangleIcon,\n          color: '#da3633',\n          bgColor: '#da3633',\n          text: 'Error',\n          description: error || 'Connection failed',\n          pulse: false,\n        };\n      case ConnectionState.DISCONNECTED:\n      default:\n        return {\n          icon: XCircleIcon,\n          color: '#8b949e',\n          bgColor: '#8b949e',\n          text: 'Disconnected',\n          description: 'No telemetry connection',\n          pulse: false,\n        };\n    }\n  };\n\n  const config = getStatusConfig();\n  const StatusIcon = config.icon;\n\n  return (\n    <div className={`flex items-center gap-3 ${className}`}>\n      {/* Status Indicator */}\n      <div className=\"flex items-center gap-2\">\n        <div className=\"relative\">\n          {/* Pulse animation for connecting states */}\n          <AnimatePresence>\n            {config.pulse && (\n              <motion.div\n                className=\"absolute inset-0 rounded-full\"\n                style={{ backgroundColor: config.color }}\n                initial={{ scale: 1, opacity: 0.3 }}\n                animate={{ scale: 1.5, opacity: 0 }}\n                exit={{ scale: 1, opacity: 0.3 }}\n                transition={{\n                  duration: 1.5,\n                  repeat: Infinity,\n                  repeatType: 'loop',\n                }}\n              />\n            )}\n          </AnimatePresence>\n\n          {/* Main status icon */}\n          <motion.div\n            className=\"w-8 h-8 rounded-full border-2 flex items-center justify-center\"\n            style={{\n              backgroundColor: config.bgColor + '20',\n              borderColor: config.color,\n            }}\n            animate={config.pulse ? { rotate: 360 } : {}}\n            transition={config.pulse ? { duration: 2, repeat: Infinity, ease: 'linear' } : {}}\n          >\n            <StatusIcon className=\"w-4 h-4\" style={{ color: config.color }} />\n          </motion.div>\n        </div>\n\n        {/* Status Text */}\n        <div className=\"text-sm\">\n          <div className=\"font-medium\" style={{ color: config.color }}>\n            {config.text}\n          </div>\n          <div className=\"text-text-muted text-xs\">\n            {config.description}\n          </div>\n        </div>\n      </div>\n\n      {/* Telemetry Service Info */}\n      <div className=\"hidden md:flex items-center gap-1 text-xs text-text-secondary\">\n        <WifiIcon className=\"w-3 h-3\" />\n        <span>ws://localhost:3001/telemetry</span>\n      </div>\n\n      {/* Connection Details (on hover/click) */}\n      {(connectionState === ConnectionState.ERROR || error) && (\n        <motion.div\n          initial={{ opacity: 0, scale: 0.95 }}\n          animate={{ opacity: 1, scale: 1 }}\n          className=\"hidden lg:block\"\n        >\n          <div className=\"bg-dark-tertiary border border-red-800 rounded-lg p-2 max-w-xs\">\n            <div className=\"text-xs text-red-300 font-medium mb-1\">Connection Error</div>\n            <div className=\"text-xs text-text-secondary\">\n              {error || 'Unable to connect to telemetry service'}\n            </div>\n            <div className=\"text-xs text-text-muted mt-1\">\n              Check if the telemetry service is running on port 3001\n            </div>\n          </div>\n        </motion.div>\n      )}\n    </div>\n  );\n};\n\nexport default ConnectionStatusIndicator;","const createStoreImpl = (createState) => {\n  let state;\n  const listeners = /* @__PURE__ */ new Set();\n  const setState = (partial, replace) => {\n    const nextState = typeof partial === \"function\" ? partial(state) : partial;\n    if (!Object.is(nextState, state)) {\n      const previousState = state;\n      state = (replace != null ? replace : typeof nextState !== \"object\" || nextState === null) ? nextState : Object.assign({}, state, nextState);\n      listeners.forEach((listener) => listener(state, previousState));\n    }\n  };\n  const getState = () => state;\n  const getInitialState = () => initialState;\n  const subscribe = (listener) => {\n    listeners.add(listener);\n    return () => listeners.delete(listener);\n  };\n  const destroy = () => {\n    if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n      console.warn(\n        \"[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected.\"\n      );\n    }\n    listeners.clear();\n  };\n  const api = { setState, getState, getInitialState, subscribe, destroy };\n  const initialState = state = createState(setState, getState, api);\n  return api;\n};\nconst createStore = (createState) => createState ? createStoreImpl(createState) : createStoreImpl;\nvar vanilla = (createState) => {\n  if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n    console.warn(\n      \"[DEPRECATED] Default export is deprecated. Instead use import { createStore } from 'zustand/vanilla'.\"\n    );\n  }\n  return createStore(createState);\n};\n\nexport { createStore, vanilla as default };\n","/**\n * @license React\n * use-sync-external-store-shim.production.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\"use strict\";\nvar React = require(\"react\");\nfunction is(x, y) {\n  return (x === y && (0 !== x || 1 / x === 1 / y)) || (x !== x && y !== y);\n}\nvar objectIs = \"function\" === typeof Object.is ? Object.is : is,\n  useState = React.useState,\n  useEffect = React.useEffect,\n  useLayoutEffect = React.useLayoutEffect,\n  useDebugValue = React.useDebugValue;\nfunction useSyncExternalStore$2(subscribe, getSnapshot) {\n  var value = getSnapshot(),\n    _useState = useState({ inst: { value: value, getSnapshot: getSnapshot } }),\n    inst = _useState[0].inst,\n    forceUpdate = _useState[1];\n  useLayoutEffect(\n    function () {\n      inst.value = value;\n      inst.getSnapshot = getSnapshot;\n      checkIfSnapshotChanged(inst) && forceUpdate({ inst: inst });\n    },\n    [subscribe, value, getSnapshot]\n  );\n  useEffect(\n    function () {\n      checkIfSnapshotChanged(inst) && forceUpdate({ inst: inst });\n      return subscribe(function () {\n        checkIfSnapshotChanged(inst) && forceUpdate({ inst: inst });\n      });\n    },\n    [subscribe]\n  );\n  useDebugValue(value);\n  return value;\n}\nfunction checkIfSnapshotChanged(inst) {\n  var latestGetSnapshot = inst.getSnapshot;\n  inst = inst.value;\n  try {\n    var nextValue = latestGetSnapshot();\n    return !objectIs(inst, nextValue);\n  } catch (error) {\n    return !0;\n  }\n}\nfunction useSyncExternalStore$1(subscribe, getSnapshot) {\n  return getSnapshot();\n}\nvar shim =\n  \"undefined\" === typeof window ||\n  \"undefined\" === typeof window.document ||\n  \"undefined\" === typeof window.document.createElement\n    ? useSyncExternalStore$1\n    : useSyncExternalStore$2;\nexports.useSyncExternalStore =\n  void 0 !== React.useSyncExternalStore ? React.useSyncExternalStore : shim;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('../cjs/use-sync-external-store-shim.production.js');\n} else {\n  module.exports = require('../cjs/use-sync-external-store-shim.development.js');\n}\n","/**\n * @license React\n * use-sync-external-store-shim/with-selector.production.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\"use strict\";\nvar React = require(\"react\"),\n  shim = require(\"use-sync-external-store/shim\");\nfunction is(x, y) {\n  return (x === y && (0 !== x || 1 / x === 1 / y)) || (x !== x && y !== y);\n}\nvar objectIs = \"function\" === typeof Object.is ? Object.is : is,\n  useSyncExternalStore = shim.useSyncExternalStore,\n  useRef = React.useRef,\n  useEffect = React.useEffect,\n  useMemo = React.useMemo,\n  useDebugValue = React.useDebugValue;\nexports.useSyncExternalStoreWithSelector = function (\n  subscribe,\n  getSnapshot,\n  getServerSnapshot,\n  selector,\n  isEqual\n) {\n  var instRef = useRef(null);\n  if (null === instRef.current) {\n    var inst = { hasValue: !1, value: null };\n    instRef.current = inst;\n  } else inst = instRef.current;\n  instRef = useMemo(\n    function () {\n      function memoizedSelector(nextSnapshot) {\n        if (!hasMemo) {\n          hasMemo = !0;\n          memoizedSnapshot = nextSnapshot;\n          nextSnapshot = selector(nextSnapshot);\n          if (void 0 !== isEqual && inst.hasValue) {\n            var currentSelection = inst.value;\n            if (isEqual(currentSelection, nextSnapshot))\n              return (memoizedSelection = currentSelection);\n          }\n          return (memoizedSelection = nextSnapshot);\n        }\n        currentSelection = memoizedSelection;\n        if (objectIs(memoizedSnapshot, nextSnapshot)) return currentSelection;\n        var nextSelection = selector(nextSnapshot);\n        if (void 0 !== isEqual && isEqual(currentSelection, nextSelection))\n          return (memoizedSnapshot = nextSnapshot), currentSelection;\n        memoizedSnapshot = nextSnapshot;\n        return (memoizedSelection = nextSelection);\n      }\n      var hasMemo = !1,\n        memoizedSnapshot,\n        memoizedSelection,\n        maybeGetServerSnapshot =\n          void 0 === getServerSnapshot ? null : getServerSnapshot;\n      return [\n        function () {\n          return memoizedSelector(getSnapshot());\n        },\n        null === maybeGetServerSnapshot\n          ? void 0\n          : function () {\n              return memoizedSelector(maybeGetServerSnapshot());\n            }\n      ];\n    },\n    [getSnapshot, getServerSnapshot, selector, isEqual]\n  );\n  var value = useSyncExternalStore(subscribe, instRef[0], instRef[1]);\n  useEffect(\n    function () {\n      inst.hasValue = !0;\n      inst.value = value;\n    },\n    [value]\n  );\n  useDebugValue(value);\n  return value;\n};\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('../cjs/use-sync-external-store-shim/with-selector.production.js');\n} else {\n  module.exports = require('../cjs/use-sync-external-store-shim/with-selector.development.js');\n}\n","import { createStore } from 'zustand/vanilla';\nexport * from 'zustand/vanilla';\nimport ReactExports from 'react';\nimport useSyncExternalStoreExports from 'use-sync-external-store/shim/with-selector.js';\n\nconst { useDebugValue } = ReactExports;\nconst { useSyncExternalStoreWithSelector } = useSyncExternalStoreExports;\nlet didWarnAboutEqualityFn = false;\nconst identity = (arg) => arg;\nfunction useStore(api, selector = identity, equalityFn) {\n  if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\" && equalityFn && !didWarnAboutEqualityFn) {\n    console.warn(\n      \"[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937\"\n    );\n    didWarnAboutEqualityFn = true;\n  }\n  const slice = useSyncExternalStoreWithSelector(\n    api.subscribe,\n    api.getState,\n    api.getServerState || api.getInitialState,\n    selector,\n    equalityFn\n  );\n  useDebugValue(slice);\n  return slice;\n}\nconst createImpl = (createState) => {\n  if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\" && typeof createState !== \"function\") {\n    console.warn(\n      \"[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.\"\n    );\n  }\n  const api = typeof createState === \"function\" ? createStore(createState) : createState;\n  const useBoundStore = (selector, equalityFn) => useStore(api, selector, equalityFn);\n  Object.assign(useBoundStore, api);\n  return useBoundStore;\n};\nconst create = (createState) => createState ? createImpl(createState) : createImpl;\nvar react = (createState) => {\n  if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n    console.warn(\n      \"[DEPRECATED] Default export is deprecated. Instead use `import { create } from 'zustand'`.\"\n    );\n  }\n  return create(createState);\n};\n\nexport { create, react as default, useStore };\n","const reduxImpl = (reducer, initial) => (set, _get, api) => {\n  api.dispatch = (action) => {\n    set((state) => reducer(state, action), false, action);\n    return action;\n  };\n  api.dispatchFromDevtools = true;\n  return { dispatch: (...a) => api.dispatch(...a), ...initial };\n};\nconst redux = reduxImpl;\n\nconst trackedConnections = /* @__PURE__ */ new Map();\nconst getTrackedConnectionState = (name) => {\n  const api = trackedConnections.get(name);\n  if (!api) return {};\n  return Object.fromEntries(\n    Object.entries(api.stores).map(([key, api2]) => [key, api2.getState()])\n  );\n};\nconst extractConnectionInformation = (store, extensionConnector, options) => {\n  if (store === void 0) {\n    return {\n      type: \"untracked\",\n      connection: extensionConnector.connect(options)\n    };\n  }\n  const existingConnection = trackedConnections.get(options.name);\n  if (existingConnection) {\n    return { type: \"tracked\", store, ...existingConnection };\n  }\n  const newConnection = {\n    connection: extensionConnector.connect(options),\n    stores: {}\n  };\n  trackedConnections.set(options.name, newConnection);\n  return { type: \"tracked\", store, ...newConnection };\n};\nconst devtoolsImpl = (fn, devtoolsOptions = {}) => (set, get, api) => {\n  const { enabled, anonymousActionType, store, ...options } = devtoolsOptions;\n  let extensionConnector;\n  try {\n    extensionConnector = (enabled != null ? enabled : (import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") && window.__REDUX_DEVTOOLS_EXTENSION__;\n  } catch (_e) {\n  }\n  if (!extensionConnector) {\n    if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\" && enabled) {\n      console.warn(\n        \"[zustand devtools middleware] Please install/enable Redux devtools extension\"\n      );\n    }\n    return fn(set, get, api);\n  }\n  const { connection, ...connectionInformation } = extractConnectionInformation(store, extensionConnector, options);\n  let isRecording = true;\n  api.setState = (state, replace, nameOrAction) => {\n    const r = set(state, replace);\n    if (!isRecording) return r;\n    const action = nameOrAction === void 0 ? { type: anonymousActionType || \"anonymous\" } : typeof nameOrAction === \"string\" ? { type: nameOrAction } : nameOrAction;\n    if (store === void 0) {\n      connection == null ? void 0 : connection.send(action, get());\n      return r;\n    }\n    connection == null ? void 0 : connection.send(\n      {\n        ...action,\n        type: `${store}/${action.type}`\n      },\n      {\n        ...getTrackedConnectionState(options.name),\n        [store]: api.getState()\n      }\n    );\n    return r;\n  };\n  const setStateFromDevtools = (...a) => {\n    const originalIsRecording = isRecording;\n    isRecording = false;\n    set(...a);\n    isRecording = originalIsRecording;\n  };\n  const initialState = fn(api.setState, get, api);\n  if (connectionInformation.type === \"untracked\") {\n    connection == null ? void 0 : connection.init(initialState);\n  } else {\n    connectionInformation.stores[connectionInformation.store] = api;\n    connection == null ? void 0 : connection.init(\n      Object.fromEntries(\n        Object.entries(connectionInformation.stores).map(([key, store2]) => [\n          key,\n          key === connectionInformation.store ? initialState : store2.getState()\n        ])\n      )\n    );\n  }\n  if (api.dispatchFromDevtools && typeof api.dispatch === \"function\") {\n    let didWarnAboutReservedActionType = false;\n    const originalDispatch = api.dispatch;\n    api.dispatch = (...a) => {\n      if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\" && a[0].type === \"__setState\" && !didWarnAboutReservedActionType) {\n        console.warn(\n          '[zustand devtools middleware] \"__setState\" action type is reserved to set state from the devtools. Avoid using it.'\n        );\n        didWarnAboutReservedActionType = true;\n      }\n      originalDispatch(...a);\n    };\n  }\n  connection.subscribe((message) => {\n    var _a;\n    switch (message.type) {\n      case \"ACTION\":\n        if (typeof message.payload !== \"string\") {\n          console.error(\n            \"[zustand devtools middleware] Unsupported action format\"\n          );\n          return;\n        }\n        return parseJsonThen(\n          message.payload,\n          (action) => {\n            if (action.type === \"__setState\") {\n              if (store === void 0) {\n                setStateFromDevtools(action.state);\n                return;\n              }\n              if (Object.keys(action.state).length !== 1) {\n                console.error(\n                  `\n                    [zustand devtools middleware] Unsupported __setState action format. \n                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),\n                    and value of this only key should be a state object. Example: { \"type\": \"__setState\", \"state\": { \"abc123Store\": { \"foo\": \"bar\" } } }\n                    `\n                );\n              }\n              const stateFromDevtools = action.state[store];\n              if (stateFromDevtools === void 0 || stateFromDevtools === null) {\n                return;\n              }\n              if (JSON.stringify(api.getState()) !== JSON.stringify(stateFromDevtools)) {\n                setStateFromDevtools(stateFromDevtools);\n              }\n              return;\n            }\n            if (!api.dispatchFromDevtools) return;\n            if (typeof api.dispatch !== \"function\") return;\n            api.dispatch(action);\n          }\n        );\n      case \"DISPATCH\":\n        switch (message.payload.type) {\n          case \"RESET\":\n            setStateFromDevtools(initialState);\n            if (store === void 0) {\n              return connection == null ? void 0 : connection.init(api.getState());\n            }\n            return connection == null ? void 0 : connection.init(getTrackedConnectionState(options.name));\n          case \"COMMIT\":\n            if (store === void 0) {\n              connection == null ? void 0 : connection.init(api.getState());\n              return;\n            }\n            return connection == null ? void 0 : connection.init(getTrackedConnectionState(options.name));\n          case \"ROLLBACK\":\n            return parseJsonThen(message.state, (state) => {\n              if (store === void 0) {\n                setStateFromDevtools(state);\n                connection == null ? void 0 : connection.init(api.getState());\n                return;\n              }\n              setStateFromDevtools(state[store]);\n              connection == null ? void 0 : connection.init(getTrackedConnectionState(options.name));\n            });\n          case \"JUMP_TO_STATE\":\n          case \"JUMP_TO_ACTION\":\n            return parseJsonThen(message.state, (state) => {\n              if (store === void 0) {\n                setStateFromDevtools(state);\n                return;\n              }\n              if (JSON.stringify(api.getState()) !== JSON.stringify(state[store])) {\n                setStateFromDevtools(state[store]);\n              }\n            });\n          case \"IMPORT_STATE\": {\n            const { nextLiftedState } = message.payload;\n            const lastComputedState = (_a = nextLiftedState.computedStates.slice(-1)[0]) == null ? void 0 : _a.state;\n            if (!lastComputedState) return;\n            if (store === void 0) {\n              setStateFromDevtools(lastComputedState);\n            } else {\n              setStateFromDevtools(lastComputedState[store]);\n            }\n            connection == null ? void 0 : connection.send(\n              null,\n              // FIXME no-any\n              nextLiftedState\n            );\n            return;\n          }\n          case \"PAUSE_RECORDING\":\n            return isRecording = !isRecording;\n        }\n        return;\n    }\n  });\n  return initialState;\n};\nconst devtools = devtoolsImpl;\nconst parseJsonThen = (stringified, f) => {\n  let parsed;\n  try {\n    parsed = JSON.parse(stringified);\n  } catch (e) {\n    console.error(\n      \"[zustand devtools middleware] Could not parse the received json\",\n      e\n    );\n  }\n  if (parsed !== void 0) f(parsed);\n};\n\nconst subscribeWithSelectorImpl = (fn) => (set, get, api) => {\n  const origSubscribe = api.subscribe;\n  api.subscribe = (selector, optListener, options) => {\n    let listener = selector;\n    if (optListener) {\n      const equalityFn = (options == null ? void 0 : options.equalityFn) || Object.is;\n      let currentSlice = selector(api.getState());\n      listener = (state) => {\n        const nextSlice = selector(state);\n        if (!equalityFn(currentSlice, nextSlice)) {\n          const previousSlice = currentSlice;\n          optListener(currentSlice = nextSlice, previousSlice);\n        }\n      };\n      if (options == null ? void 0 : options.fireImmediately) {\n        optListener(currentSlice, currentSlice);\n      }\n    }\n    return origSubscribe(listener);\n  };\n  const initialState = fn(set, get, api);\n  return initialState;\n};\nconst subscribeWithSelector = subscribeWithSelectorImpl;\n\nconst combine = (initialState, create) => (...a) => Object.assign({}, initialState, create(...a));\n\nfunction createJSONStorage(getStorage, options) {\n  let storage;\n  try {\n    storage = getStorage();\n  } catch (_e) {\n    return;\n  }\n  const persistStorage = {\n    getItem: (name) => {\n      var _a;\n      const parse = (str2) => {\n        if (str2 === null) {\n          return null;\n        }\n        return JSON.parse(str2, options == null ? void 0 : options.reviver);\n      };\n      const str = (_a = storage.getItem(name)) != null ? _a : null;\n      if (str instanceof Promise) {\n        return str.then(parse);\n      }\n      return parse(str);\n    },\n    setItem: (name, newValue) => storage.setItem(\n      name,\n      JSON.stringify(newValue, options == null ? void 0 : options.replacer)\n    ),\n    removeItem: (name) => storage.removeItem(name)\n  };\n  return persistStorage;\n}\nconst toThenable = (fn) => (input) => {\n  try {\n    const result = fn(input);\n    if (result instanceof Promise) {\n      return result;\n    }\n    return {\n      then(onFulfilled) {\n        return toThenable(onFulfilled)(result);\n      },\n      catch(_onRejected) {\n        return this;\n      }\n    };\n  } catch (e) {\n    return {\n      then(_onFulfilled) {\n        return this;\n      },\n      catch(onRejected) {\n        return toThenable(onRejected)(e);\n      }\n    };\n  }\n};\nconst oldImpl = (config, baseOptions) => (set, get, api) => {\n  let options = {\n    getStorage: () => localStorage,\n    serialize: JSON.stringify,\n    deserialize: JSON.parse,\n    partialize: (state) => state,\n    version: 0,\n    merge: (persistedState, currentState) => ({\n      ...currentState,\n      ...persistedState\n    }),\n    ...baseOptions\n  };\n  let hasHydrated = false;\n  const hydrationListeners = /* @__PURE__ */ new Set();\n  const finishHydrationListeners = /* @__PURE__ */ new Set();\n  let storage;\n  try {\n    storage = options.getStorage();\n  } catch (_e) {\n  }\n  if (!storage) {\n    return config(\n      (...args) => {\n        console.warn(\n          `[zustand persist middleware] Unable to update item '${options.name}', the given storage is currently unavailable.`\n        );\n        set(...args);\n      },\n      get,\n      api\n    );\n  }\n  const thenableSerialize = toThenable(options.serialize);\n  const setItem = () => {\n    const state = options.partialize({ ...get() });\n    let errorInSync;\n    const thenable = thenableSerialize({ state, version: options.version }).then(\n      (serializedValue) => storage.setItem(options.name, serializedValue)\n    ).catch((e) => {\n      errorInSync = e;\n    });\n    if (errorInSync) {\n      throw errorInSync;\n    }\n    return thenable;\n  };\n  const savedSetState = api.setState;\n  api.setState = (state, replace) => {\n    savedSetState(state, replace);\n    void setItem();\n  };\n  const configResult = config(\n    (...args) => {\n      set(...args);\n      void setItem();\n    },\n    get,\n    api\n  );\n  let stateFromStorage;\n  const hydrate = () => {\n    var _a;\n    if (!storage) return;\n    hasHydrated = false;\n    hydrationListeners.forEach((cb) => cb(get()));\n    const postRehydrationCallback = ((_a = options.onRehydrateStorage) == null ? void 0 : _a.call(options, get())) || void 0;\n    return toThenable(storage.getItem.bind(storage))(options.name).then((storageValue) => {\n      if (storageValue) {\n        return options.deserialize(storageValue);\n      }\n    }).then((deserializedStorageValue) => {\n      if (deserializedStorageValue) {\n        if (typeof deserializedStorageValue.version === \"number\" && deserializedStorageValue.version !== options.version) {\n          if (options.migrate) {\n            return options.migrate(\n              deserializedStorageValue.state,\n              deserializedStorageValue.version\n            );\n          }\n          console.error(\n            `State loaded from storage couldn't be migrated since no migrate function was provided`\n          );\n        } else {\n          return deserializedStorageValue.state;\n        }\n      }\n    }).then((migratedState) => {\n      var _a2;\n      stateFromStorage = options.merge(\n        migratedState,\n        (_a2 = get()) != null ? _a2 : configResult\n      );\n      set(stateFromStorage, true);\n      return setItem();\n    }).then(() => {\n      postRehydrationCallback == null ? void 0 : postRehydrationCallback(stateFromStorage, void 0);\n      hasHydrated = true;\n      finishHydrationListeners.forEach((cb) => cb(stateFromStorage));\n    }).catch((e) => {\n      postRehydrationCallback == null ? void 0 : postRehydrationCallback(void 0, e);\n    });\n  };\n  api.persist = {\n    setOptions: (newOptions) => {\n      options = {\n        ...options,\n        ...newOptions\n      };\n      if (newOptions.getStorage) {\n        storage = newOptions.getStorage();\n      }\n    },\n    clearStorage: () => {\n      storage == null ? void 0 : storage.removeItem(options.name);\n    },\n    getOptions: () => options,\n    rehydrate: () => hydrate(),\n    hasHydrated: () => hasHydrated,\n    onHydrate: (cb) => {\n      hydrationListeners.add(cb);\n      return () => {\n        hydrationListeners.delete(cb);\n      };\n    },\n    onFinishHydration: (cb) => {\n      finishHydrationListeners.add(cb);\n      return () => {\n        finishHydrationListeners.delete(cb);\n      };\n    }\n  };\n  hydrate();\n  return stateFromStorage || configResult;\n};\nconst newImpl = (config, baseOptions) => (set, get, api) => {\n  let options = {\n    storage: createJSONStorage(() => localStorage),\n    partialize: (state) => state,\n    version: 0,\n    merge: (persistedState, currentState) => ({\n      ...currentState,\n      ...persistedState\n    }),\n    ...baseOptions\n  };\n  let hasHydrated = false;\n  const hydrationListeners = /* @__PURE__ */ new Set();\n  const finishHydrationListeners = /* @__PURE__ */ new Set();\n  let storage = options.storage;\n  if (!storage) {\n    return config(\n      (...args) => {\n        console.warn(\n          `[zustand persist middleware] Unable to update item '${options.name}', the given storage is currently unavailable.`\n        );\n        set(...args);\n      },\n      get,\n      api\n    );\n  }\n  const setItem = () => {\n    const state = options.partialize({ ...get() });\n    return storage.setItem(options.name, {\n      state,\n      version: options.version\n    });\n  };\n  const savedSetState = api.setState;\n  api.setState = (state, replace) => {\n    savedSetState(state, replace);\n    void setItem();\n  };\n  const configResult = config(\n    (...args) => {\n      set(...args);\n      void setItem();\n    },\n    get,\n    api\n  );\n  api.getInitialState = () => configResult;\n  let stateFromStorage;\n  const hydrate = () => {\n    var _a, _b;\n    if (!storage) return;\n    hasHydrated = false;\n    hydrationListeners.forEach((cb) => {\n      var _a2;\n      return cb((_a2 = get()) != null ? _a2 : configResult);\n    });\n    const postRehydrationCallback = ((_b = options.onRehydrateStorage) == null ? void 0 : _b.call(options, (_a = get()) != null ? _a : configResult)) || void 0;\n    return toThenable(storage.getItem.bind(storage))(options.name).then((deserializedStorageValue) => {\n      if (deserializedStorageValue) {\n        if (typeof deserializedStorageValue.version === \"number\" && deserializedStorageValue.version !== options.version) {\n          if (options.migrate) {\n            return [\n              true,\n              options.migrate(\n                deserializedStorageValue.state,\n                deserializedStorageValue.version\n              )\n            ];\n          }\n          console.error(\n            `State loaded from storage couldn't be migrated since no migrate function was provided`\n          );\n        } else {\n          return [false, deserializedStorageValue.state];\n        }\n      }\n      return [false, void 0];\n    }).then((migrationResult) => {\n      var _a2;\n      const [migrated, migratedState] = migrationResult;\n      stateFromStorage = options.merge(\n        migratedState,\n        (_a2 = get()) != null ? _a2 : configResult\n      );\n      set(stateFromStorage, true);\n      if (migrated) {\n        return setItem();\n      }\n    }).then(() => {\n      postRehydrationCallback == null ? void 0 : postRehydrationCallback(stateFromStorage, void 0);\n      stateFromStorage = get();\n      hasHydrated = true;\n      finishHydrationListeners.forEach((cb) => cb(stateFromStorage));\n    }).catch((e) => {\n      postRehydrationCallback == null ? void 0 : postRehydrationCallback(void 0, e);\n    });\n  };\n  api.persist = {\n    setOptions: (newOptions) => {\n      options = {\n        ...options,\n        ...newOptions\n      };\n      if (newOptions.storage) {\n        storage = newOptions.storage;\n      }\n    },\n    clearStorage: () => {\n      storage == null ? void 0 : storage.removeItem(options.name);\n    },\n    getOptions: () => options,\n    rehydrate: () => hydrate(),\n    hasHydrated: () => hasHydrated,\n    onHydrate: (cb) => {\n      hydrationListeners.add(cb);\n      return () => {\n        hydrationListeners.delete(cb);\n      };\n    },\n    onFinishHydration: (cb) => {\n      finishHydrationListeners.add(cb);\n      return () => {\n        finishHydrationListeners.delete(cb);\n      };\n    }\n  };\n  if (!options.skipHydration) {\n    hydrate();\n  }\n  return stateFromStorage || configResult;\n};\nconst persistImpl = (config, baseOptions) => {\n  if (\"getStorage\" in baseOptions || \"serialize\" in baseOptions || \"deserialize\" in baseOptions) {\n    if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n      console.warn(\n        \"[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead.\"\n      );\n    }\n    return oldImpl(config, baseOptions);\n  }\n  return newImpl(config, baseOptions);\n};\nconst persist = persistImpl;\n\nexport { combine, createJSONStorage, devtools, persist, redux, subscribeWithSelector };\n","import { DroneData, Position } from '@/types/fleet';\n\nexport interface CoordinationAlert {\n  id: string;\n  type: 'collision_warning' | 'separation_violation' | 'coordination_conflict';\n  severity: 'warning' | 'critical';\n  droneIds: string[];\n  distance: number;\n  message: string;\n  timestamp: string;\n  resolved: boolean;\n  avoidanceAction?: {\n    droneId: string;\n    action: 'climb' | 'descend' | 'turn_left' | 'turn_right' | 'hover' | 'slow_down';\n    magnitude: number;\n  };\n}\n\nexport interface CoordinationStatus {\n  isActive: boolean;\n  separationDistance: number; // meters\n  activeWarnings: CoordinationAlert[];\n  totalConflicts: number;\n  resolvedConflicts: number;\n  lastUpdate: string;\n}\n\nexport class CoordinationService {\n  private separationDistance = 50; // 50 meters minimum separation\n  private warningDistance = 75; // 75 meters warning zone\n  private activeAlerts: Map<string, CoordinationAlert> = new Map();\n  private avoidanceManeuvers: Map<string, { action: string; endTime: number; originalHeading?: number }> = new Map();\n\n  constructor() {\n    console.log(' Coordination Service initialized with 50m separation');\n  }\n\n  /**\n   * Calculate distance between two positions in meters using Haversine formula\n   */\n  private calculateDistance(pos1: Position, pos2: Position): number {\n    const R = 6371000; // Earth's radius in meters\n    const 1 = pos1.lat * Math.PI / 180;\n    const 2 = pos2.lat * Math.PI / 180;\n    const  = (pos2.lat - pos1.lat) * Math.PI / 180;\n    const  = (pos2.lng - pos1.lng) * Math.PI / 180;\n\n    const a = Math.sin(/2) * Math.sin(/2) +\n              Math.cos(1) * Math.cos(2) *\n              Math.sin(/2) * Math.sin(/2);\n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));\n\n    const horizontalDistance = R * c;\n    \n    // Include altitude difference for 3D distance\n    const altitudeDiff = Math.abs(pos1.alt - pos2.alt);\n    const distance3D = Math.sqrt(horizontalDistance * horizontalDistance + altitudeDiff * altitudeDiff);\n\n    return distance3D;\n  }\n\n  /**\n   * Calculate bearing from one position to another\n   */\n  private calculateBearing(from: Position, to: Position): number {\n    const 1 = from.lat * Math.PI / 180;\n    const 2 = to.lat * Math.PI / 180;\n    const  = (to.lng - from.lng) * Math.PI / 180;\n\n    const y = Math.sin() * Math.cos(2);\n    const x = Math.cos(1) * Math.sin(2) - Math.sin(1) * Math.cos(2) * Math.cos();\n\n    let bearing = Math.atan2(y, x) * 180 / Math.PI;\n    return (bearing + 360) % 360; // Normalize to 0-360\n  }\n\n  /**\n   * Predict future position based on current position, heading, and speed\n   */\n  private predictPosition(drone: DroneData, secondsAhead: number): Position {\n    const metersPerSecond = drone.speed;\n    const distanceAhead = metersPerSecond * secondsAhead;\n    \n    // Convert heading to radians\n    const headingRad = drone.heading * Math.PI / 180;\n    \n    // Calculate new position (simplified for small distances)\n    const earthRadius = 6371000;\n    const latOffset = (distanceAhead * Math.cos(headingRad)) / earthRadius * (180 / Math.PI);\n    const lngOffset = (distanceAhead * Math.sin(headingRad)) / earthRadius * (180 / Math.PI) / Math.cos(drone.position.lat * Math.PI / 180);\n    \n    return {\n      lat: drone.position.lat + latOffset,\n      lng: drone.position.lng + lngOffset,\n      alt: drone.position.alt // Assume constant altitude for prediction\n    };\n  }\n\n  /**\n   * Check for collision risks between all active drones\n   */\n  checkCollisionRisks(drones: DroneData[]): CoordinationAlert[] {\n    const activeDrones = drones.filter(drone => \n      drone.status === 'active' || drone.status === 'in_flight'\n    );\n\n    const alerts: CoordinationAlert[] = [];\n    const now = Date.now();\n\n    // Clear expired avoidance maneuvers\n    this.avoidanceManeuvers.forEach((maneuver, droneId) => {\n      if (now > maneuver.endTime) {\n        this.avoidanceManeuvers.delete(droneId);\n      }\n    });\n\n    // Check all drone pairs\n    for (let i = 0; i < activeDrones.length; i++) {\n      for (let j = i + 1; j < activeDrones.length; j++) {\n        const drone1 = activeDrones[i];\n        const drone2 = activeDrones[j];\n\n        const currentDistance = this.calculateDistance(drone1.position, drone2.position);\n        \n        // Predict positions 10 seconds ahead\n        const future1 = this.predictPosition(drone1, 10);\n        const future2 = this.predictPosition(drone2, 10);\n        const futureDistance = this.calculateDistance(future1, future2);\n\n        const minDistance = Math.min(currentDistance, futureDistance);\n        const alertId = `${drone1.id}-${drone2.id}`;\n\n        // Critical separation violation\n        if (minDistance < this.separationDistance) {\n          const alert: CoordinationAlert = {\n            id: alertId,\n            type: 'separation_violation',\n            severity: 'critical',\n            droneIds: [drone1.id, drone2.id],\n            distance: minDistance,\n            message: `CRITICAL: Drones ${drone1.name} and ${drone2.name} within ${minDistance.toFixed(1)}m (minimum ${this.separationDistance}m)`,\n            timestamp: new Date().toISOString(),\n            resolved: false,\n            avoidanceAction: this.calculateAvoidanceAction(drone1, drone2, minDistance)\n          };\n\n          alerts.push(alert);\n          this.activeAlerts.set(alertId, alert);\n        }\n        // Warning zone\n        else if (minDistance < this.warningDistance) {\n          const existingAlert = this.activeAlerts.get(alertId);\n          if (!existingAlert || existingAlert.type !== 'collision_warning') {\n            const alert: CoordinationAlert = {\n              id: alertId,\n              type: 'collision_warning',\n              severity: 'warning',\n              droneIds: [drone1.id, drone2.id],\n              distance: minDistance,\n              message: `Warning: Drones ${drone1.name} and ${drone2.name} approaching ${minDistance.toFixed(1)}m separation`,\n              timestamp: new Date().toISOString(),\n              resolved: false\n            };\n\n            alerts.push(alert);\n            this.activeAlerts.set(alertId, alert);\n          }\n        }\n        // Clear resolved alerts\n        else {\n          const existingAlert = this.activeAlerts.get(alertId);\n          if (existingAlert && !existingAlert.resolved) {\n            existingAlert.resolved = true;\n            this.activeAlerts.delete(alertId);\n          }\n        }\n      }\n    }\n\n    return alerts;\n  }\n\n  /**\n   * Calculate appropriate avoidance action for a drone pair\n   */\n  private calculateAvoidanceAction(drone1: DroneData, drone2: DroneData, distance: number): {\n    droneId: string;\n    action: 'climb' | 'descend' | 'turn_left' | 'turn_right' | 'hover' | 'slow_down';\n    magnitude: number;\n  } {\n    // Determine which drone should take evasive action\n    // Priority: lower altitude drone climbs, or drone with lower ID turns\n    const altitudeDiff = drone1.position.alt - drone2.position.alt;\n    let actionDrone: DroneData;\n    let action: 'climb' | 'descend' | 'turn_left' | 'turn_right' | 'hover' | 'slow_down';\n    let magnitude: number;\n\n    if (Math.abs(altitudeDiff) < 10) {\n      // Similar altitudes - use turning maneuver\n      actionDrone = drone1.id < drone2.id ? drone1 : drone2;\n      \n      // Calculate relative bearing to determine turn direction\n      const bearing = this.calculateBearing(drone1.position, drone2.position);\n      const relativeAngle = (bearing - drone1.heading + 360) % 360;\n      \n      action = relativeAngle < 180 ? 'turn_right' : 'turn_left';\n      magnitude = Math.max(30, 60 - distance); // Turn more sharply the closer they are\n    } else {\n      // Different altitudes - use vertical separation\n      actionDrone = altitudeDiff < 0 ? drone1 : drone2;\n      action = altitudeDiff < 0 ? 'climb' : 'descend';\n      magnitude = Math.max(20, this.separationDistance - distance + 10); // Altitude change in meters\n    }\n\n    return {\n      droneId: actionDrone.id,\n      action,\n      magnitude\n    };\n  }\n\n  /**\n   * Apply avoidance maneuver to a drone\n   */\n  applyAvoidanceManeuver(drone: DroneData, action: CoordinationAlert['avoidanceAction']): boolean {\n    if (!action) return false;\n\n    const now = Date.now();\n    const maneuverDuration = 15000; // 15 seconds\n\n    // Store original state for restoration\n    const originalHeading = drone.heading;\n\n    let applied = false;\n\n    switch (action.action) {\n      case 'turn_left':\n        drone.heading = (drone.heading - action.magnitude + 360) % 360;\n        applied = true;\n        break;\n      \n      case 'turn_right':\n        drone.heading = (drone.heading + action.magnitude) % 360;\n        applied = true;\n        break;\n      \n      case 'climb':\n        drone.position.alt = Math.min(drone.position.alt + action.magnitude, 200); // Max altitude limit\n        applied = true;\n        break;\n      \n      case 'descend':\n        drone.position.alt = Math.max(drone.position.alt - action.magnitude, 10); // Min altitude limit\n        applied = true;\n        break;\n      \n      case 'slow_down':\n        drone.speed = Math.max(drone.speed * 0.5, 2); // Reduce speed by half, minimum 2 m/s\n        applied = true;\n        break;\n      \n      case 'hover':\n        drone.speed = 0;\n        applied = true;\n        break;\n    }\n\n    if (applied) {\n      // Track the maneuver\n      this.avoidanceManeuvers.set(action.droneId, {\n        action: action.action,\n        endTime: now + maneuverDuration,\n        originalHeading: originalHeading\n      });\n\n      console.log(` Avoidance maneuver applied to ${drone.name}: ${action.action} (${action.magnitude})`);\n    }\n\n    return applied;\n  }\n\n  /**\n   * Get current coordination status\n   */\n  getCoordinationStatus(): CoordinationStatus {\n    const activeWarnings = Array.from(this.activeAlerts.values()).filter(alert => !alert.resolved);\n    const resolvedConflicts = Array.from(this.activeAlerts.values()).filter(alert => alert.resolved).length;\n\n    return {\n      isActive: true,\n      separationDistance: this.separationDistance,\n      activeWarnings,\n      totalConflicts: this.activeAlerts.size,\n      resolvedConflicts,\n      lastUpdate: new Date().toISOString()\n    };\n  }\n\n  /**\n   * Update separation distance (for testing/configuration)\n   */\n  setSeparationDistance(distance: number): void {\n    this.separationDistance = Math.max(20, Math.min(distance, 200)); // 20-200m range\n    this.warningDistance = this.separationDistance * 1.5;\n    console.log(` Coordination separation updated to ${this.separationDistance}m`);\n  }\n\n  /**\n   * Force resolve a coordination alert\n   */\n  resolveAlert(alertId: string): boolean {\n    const alert = this.activeAlerts.get(alertId);\n    if (alert) {\n      alert.resolved = true;\n      this.activeAlerts.delete(alertId);\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * Get active maneuvers for display\n   */\n  getActiveManeuvers(): Map<string, { action: string; endTime: number; originalHeading?: number }> {\n    return new Map(this.avoidanceManeuvers);\n  }\n}\n\nexport const coordinationService = new CoordinationService();","import { DroneData } from '@/types/fleet';\n\nexport interface ChargingStation {\n  id: string;\n  name: string;\n  status: 'available' | 'occupied' | 'maintenance' | 'reserved';\n  currentDrone?: string;\n  chargingRate: number; // Percentage per minute\n  estimatedTimeRemaining?: number; // Minutes\n  position: {\n    lat: number;\n    lng: number;\n    alt: number;\n  };\n  lastMaintenance: string;\n  totalChargingSessions: number;\n  averageChargingTime: number; // Minutes\n}\n\nexport interface ChargingQueueItem {\n  id: string;\n  droneId: string;\n  droneName: string;\n  priority: number; // 1-5, 5 being highest\n  batteryLevel: number;\n  estimatedArrival: number; // Minutes\n  queuePosition: number;\n  requestedAt: string;\n  expectedChargingTime: number; // Minutes\n  missionPriority: 'low' | 'normal' | 'high' | 'critical';\n  reason: 'low_battery' | 'scheduled' | 'pre_mission' | 'maintenance' | 'emergency';\n}\n\nexport interface ChargingSchedule {\n  stationId: string;\n  stationName: string;\n  queue: ChargingQueueItem[];\n  currentlyCharging?: ChargingQueueItem;\n  estimatedWaitTime: number; // Minutes\n  totalQueueTime: number; // Minutes\n}\n\nexport interface ChargingStats {\n  totalStations: number;\n  availableStations: number;\n  occupiedStations: number;\n  maintenanceStations: number;\n  totalInQueue: number;\n  averageWaitTime: number;\n  averageChargingTime: number;\n  dailyChargingSessions: number;\n  peakUsageHour: number;\n}\n\nexport class ChargingService {\n  private stations: Map<string, ChargingStation> = new Map();\n  private globalQueue: ChargingQueueItem[] = [];\n  private chargingHistory: Array<{\n    droneId: string;\n    stationId: string;\n    startTime: string;\n    endTime: string;\n    chargingTime: number;\n    batteryStart: number;\n    batteryEnd: number;\n  }> = [];\n\n  constructor() {\n    this.initializeChargingStations();\n    console.log(' Charging Service initialized with queue management');\n  }\n\n  private initializeChargingStations() {\n    // Initialize 3 charging stations around the operational area\n    this.stations.set('station-001', {\n      id: 'station-001',\n      name: 'Base Station Alpha',\n      status: 'occupied',\n      currentDrone: 'drone-002', // Beta-2 is charging\n      chargingRate: 3.5, // 3.5% per minute\n      estimatedTimeRemaining: 12,\n      position: { lat: 37.7849, lng: -122.4094, alt: 2.1 },\n      lastMaintenance: new Date(Date.now() - 5 * 24 * 60 * 60 * 1000).toISOString(),\n      totalChargingSessions: 47,\n      averageChargingTime: 28\n    });\n\n    this.stations.set('station-002', {\n      id: 'station-002',\n      name: 'Base Station Beta',\n      status: 'available',\n      chargingRate: 4.2, // Faster charging\n      position: { lat: 37.7650, lng: -122.4150, alt: 2.5 },\n      lastMaintenance: new Date(Date.now() - 2 * 24 * 60 * 60 * 1000).toISOString(),\n      totalChargingSessions: 31,\n      averageChargingTime: 24\n    });\n\n    this.stations.set('station-003', {\n      id: 'station-003',\n      name: 'Base Station Gamma',\n      status: 'available',\n      chargingRate: 3.0,\n      position: { lat: 37.7550, lng: -122.4250, alt: 1.8 },\n      lastMaintenance: new Date(Date.now() - 8 * 24 * 60 * 60 * 1000).toISOString(),\n      totalChargingSessions: 23,\n      averageChargingTime: 32\n    });\n\n    console.log(` Initialized ${this.stations.size} charging stations`);\n  }\n\n  /**\n   * Calculate charging priority based on multiple factors\n   */\n  private calculatePriority(drone: DroneData, reason: ChargingQueueItem['reason']): number {\n    let priority = 1;\n\n    // Battery level urgency (1-3 points)\n    if (drone.batteryLevel < 10) priority += 3;\n    else if (drone.batteryLevel < 20) priority += 2;\n    else if (drone.batteryLevel < 30) priority += 1;\n\n    // Mission priority (0-2 points)\n    if (drone.currentMission) {\n      const missionUrgency = this.getMissionPriority(drone);\n      if (missionUrgency === 'critical') priority += 2;\n      else if (missionUrgency === 'high') priority += 1;\n    }\n\n    // Reason urgency (0-2 points)\n    switch (reason) {\n      case 'emergency':\n        priority += 2;\n        break;\n      case 'low_battery':\n        priority += 1;\n        break;\n      case 'pre_mission':\n        priority += 1;\n        break;\n    }\n\n    // Flight time priority (longer flight time = higher priority)\n    const flightTime = drone.totalFlightTime || 0;\n    if (flightTime > 2000) priority += 1;\n\n    return Math.min(priority, 5); // Cap at 5\n  }\n\n  private getMissionPriority(drone: DroneData): 'low' | 'normal' | 'high' | 'critical' {\n    if (!drone.currentMission) return 'low';\n    \n    // Simple priority based on mission name keywords\n    const missionName = drone.currentMission.name.toLowerCase();\n    if (missionName.includes('emergency') || missionName.includes('medical')) return 'critical';\n    if (missionName.includes('security') || missionName.includes('patrol')) return 'high';\n    if (missionName.includes('delivery')) return 'normal';\n    return 'low';\n  }\n\n  /**\n   * Add a drone to the charging queue\n   */\n  addToQueue(\n    drone: DroneData, \n    reason: ChargingQueueItem['reason'] = 'low_battery',\n    estimatedArrival: number = 5\n  ): ChargingQueueItem {\n    // Check if drone is already in queue\n    const existingIndex = this.globalQueue.findIndex(item => item.droneId === drone.id);\n    if (existingIndex !== -1) {\n      console.warn(`Drone ${drone.id} already in charging queue`);\n      return this.globalQueue[existingIndex];\n    }\n\n    const priority = this.calculatePriority(drone, reason);\n    const expectedChargingTime = this.calculateExpectedChargingTime(drone.batteryLevel);\n    const missionPriority = this.getMissionPriority(drone);\n\n    const queueItem: ChargingQueueItem = {\n      id: `queue-${drone.id}-${Date.now()}`,\n      droneId: drone.id,\n      droneName: drone.name,\n      priority,\n      batteryLevel: drone.batteryLevel,\n      estimatedArrival,\n      queuePosition: 0, // Will be calculated when sorting\n      requestedAt: new Date().toISOString(),\n      expectedChargingTime,\n      missionPriority,\n      reason\n    };\n\n    this.globalQueue.push(queueItem);\n    this.sortQueue();\n    \n    console.log(` Added ${drone.name} to charging queue (Priority: ${priority}, Battery: ${drone.batteryLevel}%)`);\n    return queueItem;\n  }\n\n  /**\n   * Sort queue by priority and update positions\n   */\n  private sortQueue() {\n    this.globalQueue.sort((a, b) => {\n      // Sort by priority first (higher priority first)\n      if (b.priority !== a.priority) {\n        return b.priority - a.priority;\n      }\n      \n      // Then by battery level (lower battery first)\n      if (a.batteryLevel !== b.batteryLevel) {\n        return a.batteryLevel - b.batteryLevel;\n      }\n      \n      // Finally by request time (first come, first served)\n      return new Date(a.requestedAt).getTime() - new Date(b.requestedAt).getTime();\n    });\n\n    // Update queue positions\n    this.globalQueue.forEach((item, index) => {\n      item.queuePosition = index + 1;\n    });\n  }\n\n  /**\n   * Calculate expected charging time based on current battery level\n   */\n  private calculateExpectedChargingTime(currentBattery: number, targetBattery: number = 90): number {\n    const batteryNeeded = Math.max(0, targetBattery - currentBattery);\n    const averageChargingRate = 3.5; // Average % per minute across all stations\n    return Math.ceil(batteryNeeded / averageChargingRate);\n  }\n\n  /**\n   * Find the best available charging station\n   */\n  private findBestAvailableStation(): ChargingStation | null {\n    const availableStations = Array.from(this.stations.values())\n      .filter(station => station.status === 'available')\n      .sort((a, b) => b.chargingRate - a.chargingRate); // Prefer faster charging\n\n    return availableStations[0] || null;\n  }\n\n  /**\n   * Assign next drone in queue to an available station\n   */\n  assignNextDrone(): { assigned: boolean; stationId?: string; droneId?: string } {\n    if (this.globalQueue.length === 0) {\n      return { assigned: false };\n    }\n\n    const station = this.findBestAvailableStation();\n    if (!station) {\n      return { assigned: false };\n    }\n\n    const nextDrone = this.globalQueue.shift()!;\n    \n    // Assign drone to station\n    station.status = 'occupied';\n    station.currentDrone = nextDrone.droneId;\n    station.estimatedTimeRemaining = this.calculateExpectedChargingTime(nextDrone.batteryLevel);\n\n    // Start charging session tracking\n    this.startChargingSession(nextDrone.droneId, station.id, nextDrone.batteryLevel);\n\n    // Update queue positions\n    this.sortQueue();\n\n    console.log(` Assigned ${nextDrone.droneName} to ${station.name} (Est: ${station.estimatedTimeRemaining}min)`);\n    \n    return { \n      assigned: true, \n      stationId: station.id, \n      droneId: nextDrone.droneId \n    };\n  }\n\n  /**\n   * Start tracking a charging session\n   */\n  private startChargingSession(droneId: string, stationId: string, _startBattery: number) {\n    // This would integrate with the actual charging hardware\n    console.log(` Started charging session: ${droneId} at ${stationId}`);\n  }\n\n  /**\n   * Complete charging session and free up station\n   */\n  completeChargingSession(stationId: string, endBattery: number): boolean {\n    const station = this.stations.get(stationId);\n    if (!station || station.status !== 'occupied') {\n      return false;\n    }\n\n    const droneId = station.currentDrone!;\n    const chargingTime = station.averageChargingTime; // Simplified\n\n    // Record charging history\n    this.chargingHistory.push({\n      droneId,\n      stationId,\n      startTime: new Date(Date.now() - chargingTime * 60 * 1000).toISOString(),\n      endTime: new Date().toISOString(),\n      chargingTime,\n      batteryStart: endBattery - (endBattery * 0.7), // Estimate start battery\n      batteryEnd: endBattery\n    });\n\n    // Free up station\n    station.status = 'available';\n    station.currentDrone = undefined;\n    station.estimatedTimeRemaining = undefined;\n    station.totalChargingSessions++;\n\n    console.log(` Completed charging: ${droneId} at ${station.name} (${endBattery}%)`);\n    \n    // Try to assign next drone\n    this.assignNextDrone();\n    \n    return true;\n  }\n\n  /**\n   * Remove drone from queue (e.g., if mission cancelled or emergency)\n   */\n  removeFromQueue(droneId: string): boolean {\n    const index = this.globalQueue.findIndex(item => item.droneId === droneId);\n    if (index === -1) return false;\n\n    this.globalQueue.splice(index, 1);\n    this.sortQueue();\n    \n    console.log(` Removed ${droneId} from charging queue`);\n    return true;\n  }\n\n  /**\n   * Get queue status for a specific drone\n   */\n  getQueueStatus(droneId: string): ChargingQueueItem | null {\n    return this.globalQueue.find(item => item.droneId === droneId) || null;\n  }\n\n  /**\n   * Get charging schedules for all stations\n   */\n  getChargingSchedules(): ChargingSchedule[] {\n    const schedules: ChargingSchedule[] = [];\n    \n    Array.from(this.stations.values()).forEach(station => {\n      const queueForStation = this.globalQueue.slice(); // All drones can use any station\n      const currentlyCharging = station.currentDrone ? \n        this.globalQueue.find(item => item.droneId === station.currentDrone) : undefined;\n      \n      const totalQueueTime = queueForStation.reduce((sum, item) => sum + item.expectedChargingTime, 0);\n      const estimatedWaitTime = station.status === 'available' ? 0 : \n        (station.estimatedTimeRemaining || 0) + totalQueueTime;\n\n      schedules.push({\n        stationId: station.id,\n        stationName: station.name,\n        queue: queueForStation,\n        currentlyCharging,\n        estimatedWaitTime,\n        totalQueueTime\n      });\n    });\n\n    return schedules;\n  }\n\n  /**\n   * Get all charging stations\n   */\n  getChargingStations(): ChargingStation[] {\n    return Array.from(this.stations.values());\n  }\n\n  /**\n   * Get charging statistics\n   */\n  getChargingStats(): ChargingStats {\n    const stations = Array.from(this.stations.values());\n    const availableCount = stations.filter(s => s.status === 'available').length;\n    const occupiedCount = stations.filter(s => s.status === 'occupied').length;\n    const maintenanceCount = stations.filter(s => s.status === 'maintenance').length;\n    \n    const totalSessions = stations.reduce((sum, s) => sum + s.totalChargingSessions, 0);\n    const avgChargingTime = stations.reduce((sum, s) => sum + s.averageChargingTime, 0) / stations.length;\n    \n    return {\n      totalStations: stations.length,\n      availableStations: availableCount,\n      occupiedStations: occupiedCount,\n      maintenanceStations: maintenanceCount,\n      totalInQueue: this.globalQueue.length,\n      averageWaitTime: this.calculateAverageWaitTime(),\n      averageChargingTime: Math.round(avgChargingTime),\n      dailyChargingSessions: totalSessions,\n      peakUsageHour: 14 // 2 PM - simplified\n    };\n  }\n\n  private calculateAverageWaitTime(): number {\n    if (this.globalQueue.length === 0) return 0;\n    \n    const occupiedStations = Array.from(this.stations.values())\n      .filter(s => s.status === 'occupied');\n    \n    const totalWaitTime = occupiedStations.reduce((sum, station) => \n      sum + (station.estimatedTimeRemaining || 0), 0\n    );\n    \n    return Math.round(totalWaitTime / Math.max(this.globalQueue.length, 1));\n  }\n\n  /**\n   * Update charging progress for occupied stations\n   */\n  updateChargingProgress() {\n    Array.from(this.stations.values()).forEach(station => {\n      if (station.status === 'occupied' && station.estimatedTimeRemaining) {\n        station.estimatedTimeRemaining = Math.max(0, station.estimatedTimeRemaining - 1);\n        \n        // If charging complete, free up station\n        if (station.estimatedTimeRemaining <= 0) {\n          this.completeChargingSession(station.id, 90); // Assume 90% target\n        }\n      }\n    });\n  }\n\n  /**\n   * Check if a drone should be added to charging queue automatically\n   */\n  shouldAddToQueue(drone: DroneData): boolean {\n    // Already in queue\n    if (this.getQueueStatus(drone.id)) return false;\n    \n    // Already charging\n    if (drone.status === 'charging') return false;\n    \n    // Critical battery\n    if (drone.batteryLevel < 15) return true;\n    \n    // Low battery and returning/idle\n    if (drone.batteryLevel < 25 && (drone.status === 'idle' || !drone.currentMission)) return true;\n    \n    // Pre-mission charging (if battery < 80% and has upcoming mission)\n    if (drone.batteryLevel < 80 && drone.currentMission && drone.currentMission.status === 'pending') return true;\n    \n    return false;\n  }\n\n  /**\n   * Process automatic queue management\n   */\n  processAutoQueue(drones: DroneData[]) {\n    drones.forEach(drone => {\n      if (this.shouldAddToQueue(drone)) {\n        let reason: ChargingQueueItem['reason'] = 'scheduled';\n        \n        if (drone.batteryLevel < 15) reason = 'emergency';\n        else if (drone.batteryLevel < 25) reason = 'low_battery';\n        else if (drone.currentMission?.status === 'pending') reason = 'pre_mission';\n        \n        this.addToQueue(drone, reason);\n      }\n    });\n    \n    // Try to assign waiting drones to available stations\n    let assigned = true;\n    while (assigned) {\n      const result = this.assignNextDrone();\n      assigned = result.assigned;\n    }\n  }\n}\n\nexport const chargingService = new ChargingService();","import { DroneData, MissionData, FleetAlert, EmergencyState } from '@/types/fleet';\nimport { coordinationService, CoordinationAlert } from './coordinationService';\nimport { chargingService } from './chargingService';\n\n// Flight pattern types for realistic drone movement simulation\ninterface BasePattern {\n  type: string;\n  speed: number;\n}\n\ninterface CircularPattern extends BasePattern {\n  type: 'circular';\n  center: { lat: number; lng: number };\n  radius: number;\n  currentAngle: number;\n}\n\ninterface LinearPattern extends BasePattern {\n  type: 'linear';\n  start: { lat: number; lng: number };\n  end: { lat: number; lng: number };\n  progress: number;\n  direction: number;\n}\n\ninterface WaypointPattern extends BasePattern {\n  type: 'waypoint';\n  waypoints: Array<{ lat: number; lng: number }>;\n  currentWaypoint: number;\n  progress: number;\n}\n\ninterface StationaryPattern extends BasePattern {\n  type: 'stationary';\n  center: { lat: number; lng: number };\n  radius: number;\n  currentAngle: number;\n}\n\ntype FlightPattern = CircularPattern | LinearPattern | WaypointPattern | StationaryPattern;\n\n// Mock data for development and testing - 5 realistic drones\nexport const mockDrones: DroneData[] = [\n  {\n    id: 'drone-001',\n    name: 'Alpha-1',\n    status: 'in_flight',\n    position: { lat: 37.7749, lng: -122.4194, alt: 120.5 },\n    batteryLevel: 87,\n    batteryVoltage: 22.4,\n    speed: 12.3,\n    heading: 245,\n    signalStrength: -45,\n    connectionQuality: 'excellent',\n    lastUpdate: new Date().toISOString(),\n    currentMission: {\n      id: 'mission-001',\n      name: 'Downtown Delivery Route',\n      progress: 65,\n      eta: '14:30',\n      status: 'active'\n    },\n    alerts: [\n      {\n        id: 'alert-001',\n        severity: 'warning',\n        message: 'Approaching restricted airspace',\n        timestamp: new Date(Date.now() - 300000).toISOString(),\n        category: 'navigation'\n      }\n    ],\n    temperature: 28.5,\n    humidity: 65,\n    firmware: 'v1.12.3',\n    hardware: 'Pixhawk 4 Mini',\n    uptime: '2h 34m',\n    totalFlightTime: 847,\n    totalMissions: 23,\n    lastMaintenance: new Date(Date.now() - 7 * 24 * 60 * 60 * 1000).toISOString()\n  },\n  {\n    id: 'drone-002',\n    name: 'Beta-2',\n    status: 'charging',\n    position: { lat: 37.7849, lng: -122.4094, alt: 2.1 },\n    batteryLevel: 23,\n    batteryVoltage: 18.2,\n    speed: 0,\n    heading: 0,\n    signalStrength: -52,\n    connectionQuality: 'good',\n    lastUpdate: new Date().toISOString(),\n    alerts: [\n      {\n        id: 'alert-002',\n        severity: 'info',\n        message: 'Charging in progress - 47 minutes remaining',\n        timestamp: new Date(Date.now() - 600000).toISOString(),\n        category: 'system'\n      }\n    ],\n    temperature: 32.1,\n    humidity: 68,\n    firmware: 'v1.12.3',\n    hardware: 'Pixhawk 4 Pro',\n    uptime: '5h 12m',\n    totalFlightTime: 1203,\n    totalMissions: 31,\n    lastMaintenance: new Date(Date.now() - 3 * 24 * 60 * 60 * 1000).toISOString()\n  },\n  {\n    id: 'drone-003',\n    name: 'Charlie-3',\n    status: 'in_flight',\n    position: { lat: 37.7649, lng: -122.4294, alt: 89.2 },\n    batteryLevel: 18, // Low battery to trigger alerts\n    batteryVoltage: 18.5,\n    speed: 8.7,\n    heading: 180,\n    signalStrength: -67,\n    connectionQuality: 'good',\n    lastUpdate: new Date().toISOString(),\n    currentMission: {\n      id: 'mission-002',\n      name: 'Harbor Security Patrol',\n      progress: 38,\n      eta: '15:45',\n      status: 'active'\n    },\n    alerts: [\n      {\n        id: 'alert-battery-drone-003-low',\n        severity: 'critical',\n        message: 'Battery level 18.0% - Return to base immediately',\n        timestamp: new Date(Date.now() - 180000).toISOString(),\n        category: 'battery'\n      }\n    ],\n    temperature: 30.8,\n    humidity: 72,\n    firmware: 'v1.12.3',\n    hardware: 'Pixhawk 4 Mini',\n    uptime: '1h 58m',\n    totalFlightTime: 592,\n    totalMissions: 18,\n    lastMaintenance: new Date(Date.now() - 14 * 24 * 60 * 60 * 1000).toISOString()\n  },\n  {\n    id: 'drone-004',\n    name: 'Delta-4',\n    status: 'active',\n    position: { lat: 37.7549, lng: -122.4394, alt: 45.8 },\n    batteryLevel: 92,\n    batteryVoltage: 23.1,\n    speed: 6.2,\n    heading: 90,\n    signalStrength: -38,\n    connectionQuality: 'excellent',\n    lastUpdate: new Date().toISOString(),\n    currentMission: {\n      id: 'mission-003',\n      name: 'Medical Supply Delivery',\n      progress: 15,\n      eta: '16:20',\n      status: 'active'\n    },\n    temperature: 26.3,\n    humidity: 58,\n    firmware: 'v1.12.3',\n    hardware: 'Pixhawk 4 Pro',\n    uptime: '8h 45m',\n    totalFlightTime: 1847,\n    totalMissions: 45,\n    lastMaintenance: new Date(Date.now() - 2 * 24 * 60 * 60 * 1000).toISOString()\n  },\n  {\n    id: 'drone-005',\n    name: 'Echo-5',\n    status: 'maintenance',\n    position: { lat: 37.7449, lng: -122.4494, alt: 0 },\n    batteryLevel: 78,\n    batteryVoltage: 21.8,\n    speed: 0,\n    heading: 0,\n    signalStrength: -88,\n    connectionQuality: 'poor',\n    lastUpdate: new Date(Date.now() - 900000).toISOString(),\n    alerts: [\n      {\n        id: 'alert-003',\n        severity: 'critical',\n        message: 'Motor #3 temperature exceeds safe limits',\n        timestamp: new Date(Date.now() - 1200000).toISOString(),\n        category: 'hardware'\n      },\n      {\n        id: 'alert-004',\n        severity: 'warning',\n        message: 'GPS signal degraded - position accuracy reduced',\n        timestamp: new Date(Date.now() - 800000).toISOString(),\n        category: 'navigation'\n      },\n      {\n        id: 'alert-005',\n        severity: 'info',\n        message: 'Scheduled maintenance required',\n        timestamp: new Date(Date.now() - 600000).toISOString(),\n        category: 'maintenance'\n      }\n    ],\n    temperature: 52.1, // High temperature to trigger emergency\n    humidity: 55,\n    firmware: 'v1.12.2',\n    hardware: 'Pixhawk 4 Mini',\n    uptime: '12h 22m',\n    totalFlightTime: 2341,\n    totalMissions: 67,\n    lastMaintenance: new Date(Date.now() - 21 * 24 * 60 * 60 * 1000).toISOString()\n  }\n];\n\nexport const mockMissions: MissionData[] = [\n  {\n    id: 'mission-001',\n    name: 'Downtown Delivery',\n    progress: 65,\n    eta: '14:30',\n    status: 'active',\n    waypoints: [\n      {\n        id: 'wp-001',\n        position: { lat: 37.7749, lng: -122.4194, alt: 120 },\n        action: 'pickup',\n        completed: true\n      },\n      {\n        id: 'wp-002',\n        position: { lat: 37.7849, lng: -122.4094, alt: 100 },\n        action: 'delivery',\n        completed: false\n      }\n    ],\n    assignedDrone: 'drone-001',\n    priority: 1,\n    createdAt: new Date(Date.now() - 3600000).toISOString(),\n    startedAt: new Date(Date.now() - 1800000).toISOString()\n  },\n  {\n    id: 'mission-002',\n    name: 'Harbor Patrol',\n    progress: 38,\n    eta: '15:45',\n    status: 'active',\n    waypoints: [\n      {\n        id: 'wp-003',\n        position: { lat: 37.7649, lng: -122.4294, alt: 80 },\n        action: 'survey',\n        completed: false\n      }\n    ],\n    assignedDrone: 'drone-003',\n    priority: 2,\n    createdAt: new Date(Date.now() - 7200000).toISOString(),\n    startedAt: new Date(Date.now() - 2700000).toISOString()\n  }\n];\n\nexport const mockAlerts: FleetAlert[] = [\n  {\n    id: 'fleet-alert-001',\n    severity: 'critical',\n    message: 'Drone Echo-5 motor temperature critical',\n    timestamp: new Date(Date.now() - 1200000).toISOString(),\n    droneId: 'drone-005',\n    droneName: 'Echo-5',\n    type: 'system',\n    priority: 1,\n    details: {\n      temperature: 45.2,\n      threshold: 40.0\n    }\n  },\n  {\n    id: 'fleet-alert-002',\n    severity: 'warning',\n    message: 'Drone Alpha-1 approaching restricted airspace',\n    timestamp: new Date(Date.now() - 300000).toISOString(),\n    droneId: 'drone-001',\n    droneName: 'Alpha-1',\n    type: 'safety',\n    priority: 2,\n    details: {\n      zone: 'SFO_RESTRICTED',\n      distance: 150\n    }\n  }\n];\n\n// Simulate real-time data updates for development\nexport class MockTelemetryService {\n  private updateInterval: number | null = null;\n  private onDroneUpdate?: (drone: DroneData) => void;\n  private droneFlightPatterns: Map<string, FlightPattern> = new Map();\n  private emergencyStates: Map<string, EmergencyState> = new Map();\n  private coordinationAlerts: CoordinationAlert[] = [];\n\n  constructor() {\n    // Initialize flight patterns for each drone\n    this.initializeFlightPatterns();\n  }\n\n  private initializeFlightPatterns() {\n    // Alpha-1 - 4-waypoint patrol pattern (smaller area for collision potential)\n    this.droneFlightPatterns.set('drone-001', {\n      type: 'waypoint',\n      waypoints: [\n        { lat: 37.7749, lng: -122.4194 },\n        { lat: 37.7754, lng: -122.4189 },\n        { lat: 37.7759, lng: -122.4194 },\n        { lat: 37.7754, lng: -122.4199 }\n      ],\n      currentWaypoint: 0,\n      progress: 0,\n      speed: 0.015\n    });\n\n    // Beta-2 - Stationary (charging)\n    this.droneFlightPatterns.set('drone-002', {\n      type: 'stationary',\n      center: { lat: 37.7849, lng: -122.4094 },\n      radius: 0,\n      currentAngle: 0,\n      speed: 0\n    });\n\n    // Charlie-3 - 4-waypoint harbor patrol\n    this.droneFlightPatterns.set('drone-003', {\n      type: 'waypoint',\n      waypoints: [\n        { lat: 37.7649, lng: -122.4294 },\n        { lat: 37.7669, lng: -122.4274 },\n        { lat: 37.7649, lng: -122.4254 },\n        { lat: 37.7629, lng: -122.4274 }\n      ],\n      currentWaypoint: 0,\n      progress: 0.3,\n      speed: 0.012\n    });\n\n    // Delta-4 - 4-waypoint delivery mission (overlapping with Alpha-1 area)\n    this.droneFlightPatterns.set('drone-004', {\n      type: 'waypoint',\n      waypoints: [\n        { lat: 37.7744, lng: -122.4199 },\n        { lat: 37.7754, lng: -122.4189 },\n        { lat: 37.7764, lng: -122.4199 },\n        { lat: 37.7754, lng: -122.4209 }\n      ],\n      currentWaypoint: 0,\n      progress: 0.15,\n      speed: 0.018\n    });\n\n    // Echo-5 - Stationary (maintenance)\n    this.droneFlightPatterns.set('drone-005', {\n      type: 'stationary',\n      center: { lat: 37.7449, lng: -122.4494 },\n      radius: 0,\n      currentAngle: 0,\n      speed: 0\n    });\n  }\n\n  start() {\n    console.log(' Starting enhanced mock telemetry service for 5 drones');\n    console.log(' Flight patterns initialized: Circular patrol, Linear patrol, Waypoint mission');\n    \n    this.updateInterval = setInterval(() => {\n      // Update each drone with realistic patterns\n      mockDrones.forEach((drone, index) => {\n        this.updateDroneRealistic(drone);\n        \n        // Stagger updates to simulate real network timing\n        setTimeout(() => {\n          if (this.onDroneUpdate) {\n            this.onDroneUpdate({ ...drone });\n          }\n        }, index * 500); // 500ms between drone updates for smoother flow\n      });\n\n      // Check for collision risks and apply coordination after all drones updated\n      setTimeout(() => {\n        this.performCoordinationCheck();\n        this.performChargingManagement();\n      }, mockDrones.length * 500 + 1000); // Run coordination and charging after all drone updates\n    }, 8000); // Update every 8 seconds for more reasonable refresh rate\n  }\n\n  private updateDroneRealistic(drone: DroneData) {\n    const pattern = this.droneFlightPatterns.get(drone.id);\n    if (!pattern) return;\n\n    // Update position based on flight pattern\n    this.updatePosition(drone, pattern);\n\n    // Update telemetry data realistically\n    this.updateTelemetry(drone);\n\n    // Update mission progress for active drones\n    this.updateMissionProgress(drone);\n\n    // Emergency state detection and management\n    this.detectEmergencyStates(drone);\n\n    // Simulate occasional alerts\n    this.simulateAlerts(drone);\n\n    // Always update timestamp\n    drone.lastUpdate = new Date().toISOString();\n  }\n\n  private updatePosition(drone: DroneData, pattern: FlightPattern) {\n    switch (pattern.type) {\n      case 'circular':\n        pattern.currentAngle += pattern.speed * 0.4; // Faster movement\n        drone.position.lat = pattern.center.lat + Math.cos(pattern.currentAngle) * pattern.radius;\n        drone.position.lng = pattern.center.lng + Math.sin(pattern.currentAngle) * pattern.radius;\n        drone.position.alt = 80 + Math.sin(pattern.currentAngle * 2) * 10; // Less altitude variation\n        drone.heading = (pattern.currentAngle * 180 / Math.PI + 90) % 360;\n        drone.speed = 12 + Math.random() * 4; // Increased speed\n        break;\n\n      case 'linear':\n        const linear = pattern as LinearPattern;\n        linear.progress += linear.direction * linear.speed * 0.3; // Faster movement\n        \n        if (linear.progress >= 1 || linear.progress <= 0) {\n          linear.direction *= -1; // Reverse direction\n          linear.progress = Math.max(0, Math.min(1, linear.progress));\n        }\n        \n        drone.position.lat = linear.start.lat + (linear.end.lat - linear.start.lat) * linear.progress;\n        drone.position.lng = linear.start.lng + (linear.end.lng - linear.start.lng) * linear.progress;\n        drone.position.alt = 60 + Math.sin(linear.progress * Math.PI) * 15; // Less altitude variation\n        \n        const deltaLat = linear.end.lat - linear.start.lat;\n        const deltaLng = linear.end.lng - linear.start.lng;\n        drone.heading = (Math.atan2(deltaLng, deltaLat) * 180 / Math.PI * linear.direction) % 360;\n        drone.speed = 9 + Math.random() * 3; // Increased speed\n        break;\n\n      case 'waypoint':\n        const waypoint = pattern as WaypointPattern;\n        waypoint.progress += waypoint.speed * 0.4; // Faster waypoint movement\n        \n        if (waypoint.progress >= 1) {\n          waypoint.currentWaypoint = (waypoint.currentWaypoint + 1) % waypoint.waypoints.length;\n          waypoint.progress = 0;\n        }\n        \n        const currentWP = waypoint.waypoints[waypoint.currentWaypoint];\n        const nextWP = waypoint.waypoints[(waypoint.currentWaypoint + 1) % waypoint.waypoints.length];\n        \n        drone.position.lat = currentWP.lat + (nextWP.lat - currentWP.lat) * waypoint.progress;\n        drone.position.lng = currentWP.lng + (nextWP.lng - currentWP.lng) * waypoint.progress;\n        drone.position.alt = 45 + Math.sin(waypoint.progress * Math.PI) * 10; // More altitude variation during waypoint transitions\n        \n        const wpDeltaLat = nextWP.lat - currentWP.lat;\n        const wpDeltaLng = nextWP.lng - currentWP.lng;\n        drone.heading = Math.atan2(wpDeltaLng, wpDeltaLat) * 180 / Math.PI;\n        drone.speed = 10 + Math.random() * 3; // Increased speed\n        break;\n\n      case 'stationary':\n        // Small random movement to simulate GPS drift\n        drone.position.lat += (Math.random() - 0.5) * 0.000005;\n        drone.position.lng += (Math.random() - 0.5) * 0.000005;\n        drone.speed = 0;\n        break;\n    }\n  }\n\n  private updateTelemetry(drone: DroneData) {\n    // Battery drain simulation - much slower and smoother\n    if (drone.status === 'active' || drone.status === 'in_flight') {\n      drone.batteryLevel = Math.max(5, drone.batteryLevel - 0.02 - Math.random() * 0.01);\n      drone.batteryVoltage = 18.0 + (drone.batteryLevel / 100) * 5.5;\n    } else if (drone.status === 'charging') {\n      drone.batteryLevel = Math.min(100, drone.batteryLevel + 0.1 + Math.random() * 0.05);\n      drone.batteryVoltage = 18.0 + (drone.batteryLevel / 100) * 5.5;\n    }\n\n    // Signal strength variation - much less noisy\n    const baseSignal = drone.signalStrength;\n    drone.signalStrength = baseSignal + (Math.random() - 0.5) * 2;\n    \n    // Update connection quality based on signal\n    if (drone.signalStrength > -50) drone.connectionQuality = 'excellent';\n    else if (drone.signalStrength > -70) drone.connectionQuality = 'good';\n    else if (drone.signalStrength > -90) drone.connectionQuality = 'poor';\n    else drone.connectionQuality = 'very_poor';\n\n    // Temperature simulation - much less variation\n    const baseTempVariation = (Math.random() - 0.5) * 0.5;\n    drone.temperature = (drone.temperature || 28) + baseTempVariation;\n    \n    // Add heat from motors during flight - slower heating\n    if (drone.status === 'active' || drone.status === 'in_flight') {\n      drone.temperature = Math.min(50, (drone.temperature || 28) + 0.02);\n    }\n\n    // Humidity variation - much less noisy\n    drone.humidity = Math.max(40, Math.min(85, (drone.humidity || 60) + (Math.random() - 0.5) * 1));\n  }\n\n  private updateMissionProgress(drone: DroneData) {\n    if (drone.currentMission && (drone.status === 'active' || drone.status === 'in_flight')) {\n      drone.currentMission.progress = Math.min(99, drone.currentMission.progress + 0.1 + Math.random() * 0.1);\n      \n      // Update ETA based on progress\n      const remainingPercent = 100 - drone.currentMission.progress;\n      const estimatedMinutes = Math.round(remainingPercent * 2); // 2 minutes per percent roughly\n      const etaTime = new Date(Date.now() + estimatedMinutes * 60000);\n      drone.currentMission.eta = etaTime.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\n    }\n  }\n\n  private simulateAlerts(drone: DroneData) {\n    // Initialize alerts if not present\n    drone.alerts = drone.alerts || [];\n\n    // Only generate new alerts occasionally to prevent flashing (every 5-10 updates)\n    const shouldCheckForNewAlerts = Math.random() < 0.1; // 10% chance per update cycle\n\n    if (!shouldCheckForNewAlerts) {\n      // Keep existing alerts stable - only remove very old ones (over 10 minutes old)\n      drone.alerts = drone.alerts.filter(alert => {\n        const alertAge = Date.now() - new Date(alert.timestamp).getTime();\n        return alertAge < 600000; // Keep alerts for 10 minutes\n      });\n      return;\n    }\n\n    // Low battery alert - only if no existing battery alert\n    if (drone.batteryLevel < 25 && !drone.alerts.some(a => a.category === 'battery')) {\n      let severity: 'critical' | 'warning' | 'info';\n      let message: string;\n      \n      if (drone.batteryLevel < 10) {\n        severity = 'critical';\n        message = `Critical battery level ${drone.batteryLevel.toFixed(1)}% - Land immediately!`;\n      } else if (drone.batteryLevel < 15) {\n        severity = 'critical';\n        message = `Battery level ${drone.batteryLevel.toFixed(1)}% - Return to base immediately`;\n      } else {\n        severity = 'warning';\n        message = `Battery level ${drone.batteryLevel.toFixed(1)}% - Consider returning to base`;\n      }\n      \n      drone.alerts.unshift({\n        id: `alert-battery-${drone.id}-${Date.now()}`,\n        severity,\n        message,\n        timestamp: new Date().toISOString(),\n        category: 'battery'\n      });\n    }\n\n    // Remove battery alert if battery is good again\n    if (drone.batteryLevel >= 30) {\n      drone.alerts = drone.alerts.filter(a => a.category !== 'battery');\n    }\n\n    // High temperature alert - only if no existing temperature alert\n    if ((drone.temperature || 0) > 40 && !drone.alerts.some(a => a.category === 'system' && a.message.includes('temperature'))) {\n      drone.alerts.unshift({\n        id: `alert-temp-${drone.id}-${Date.now()}`,\n        severity: (drone.temperature || 0) > 45 ? 'critical' : 'warning',\n        message: `Motor temperature elevated: ${drone.temperature?.toFixed(1)}C`,\n        timestamp: new Date().toISOString(),\n        category: 'hardware'\n      });\n    }\n\n    // Remove temperature alert if temperature is normal again\n    if ((drone.temperature || 0) <= 38) {\n      drone.alerts = drone.alerts.filter(a => !(a.category === 'hardware' && a.message.includes('temperature')));\n    }\n\n    // Keep alerts stable - limit to 5 total alerts\n    if (drone.alerts.length > 5) {\n      drone.alerts = drone.alerts.slice(0, 5);\n    }\n  }\n\n  private detectEmergencyStates(drone: DroneData) {\n    const now = new Date().toISOString();\n    let emergencyTriggered = false;\n\n    // Check for critical battery emergency (< 10%)\n    if (drone.batteryLevel < 10 && !this.emergencyStates.has(`${drone.id}-critical_battery`)) {\n      const emergency: EmergencyState = {\n        id: `${drone.id}-critical_battery-${Date.now()}`,\n        droneId: drone.id,\n        type: 'critical_battery',\n        severity: 'emergency',\n        description: `Critical battery level ${drone.batteryLevel.toFixed(1)}% - Immediate emergency landing required`,\n        triggeredAt: now,\n        resolved: false,\n        autoResponse: {\n          action: 'emergency_landing',\n          triggered: true,\n          triggeredAt: now\n        }\n      };\n      \n      this.emergencyStates.set(`${drone.id}-critical_battery`, emergency);\n      drone.emergencyState = emergency;\n      drone.status = 'emergency';\n      emergencyTriggered = true;\n    }\n\n    // Check for communication loss (very poor signal for extended period)\n    if (drone.connectionQuality === 'very_poor' && drone.signalStrength < -95) {\n      const existingComLoss = this.emergencyStates.get(`${drone.id}-communication_loss`);\n      if (!existingComLoss) {\n        const emergency: EmergencyState = {\n          id: `${drone.id}-communication_loss-${Date.now()}`,\n          droneId: drone.id,\n          type: 'communication_loss',\n          severity: 'critical',\n          description: `Communication loss detected - Signal strength ${drone.signalStrength}dBm`,\n          triggeredAt: now,\n          resolved: false,\n          autoResponse: {\n            action: 'hover',\n            triggered: true,\n            triggeredAt: now\n          }\n        };\n        \n        this.emergencyStates.set(`${drone.id}-communication_loss`, emergency);\n        drone.emergencyState = emergency;\n        drone.status = 'emergency';\n        emergencyTriggered = true;\n      }\n    }\n\n    // Check for system failure (temperature too high)\n    if ((drone.temperature || 0) > 50 && !this.emergencyStates.has(`${drone.id}-system_failure`)) {\n      const emergency: EmergencyState = {\n        id: `${drone.id}-system_failure-${Date.now()}`,\n        droneId: drone.id,\n        type: 'system_failure',\n        severity: 'emergency',\n        description: `System overheating detected - Temperature ${drone.temperature?.toFixed(1)}C exceeds safe limits`,\n        triggeredAt: now,\n        resolved: false,\n        autoResponse: {\n          action: 'return_to_base',\n          triggered: true,\n          triggeredAt: now\n        }\n      };\n      \n      this.emergencyStates.set(`${drone.id}-system_failure`, emergency);\n      drone.emergencyState = emergency;\n      drone.status = 'emergency';\n      emergencyTriggered = true;\n    }\n\n    // Check for collision risk (simulate randomly for demo)\n    if (Math.random() < 0.001 && drone.status === 'in_flight') { // 0.1% chance per update\n      const existingCollision = this.emergencyStates.get(`${drone.id}-collision_risk`);\n      if (!existingCollision) {\n        const emergency: EmergencyState = {\n          id: `${drone.id}-collision_risk-${Date.now()}`,\n          droneId: drone.id,\n          type: 'collision_risk',\n          severity: 'critical',\n          description: `Collision risk detected - Another aircraft in proximity`,\n          triggeredAt: now,\n          resolved: false,\n          autoResponse: {\n            action: 'hover',\n            triggered: true,\n            triggeredAt: now\n          }\n        };\n        \n        this.emergencyStates.set(`${drone.id}-collision_risk`, emergency);\n        drone.emergencyState = emergency;\n        drone.status = 'emergency';\n        emergencyTriggered = true;\n      }\n    }\n\n    // Auto-resolve some emergency states when conditions improve\n    this.checkEmergencyResolution(drone);\n\n    // Generate emergency alerts when triggered\n    if (emergencyTriggered && drone.emergencyState) {\n      this.generateEmergencyAlert(drone, drone.emergencyState);\n    }\n  }\n\n  private checkEmergencyResolution(drone: DroneData) {\n    const emergenciesToResolve: string[] = [];\n\n    this.emergencyStates.forEach((emergency, key) => {\n      if (emergency.droneId !== drone.id || emergency.resolved) return;\n\n      let shouldResolve = false;\n\n      switch (emergency.type) {\n        case 'critical_battery':\n          // Battery emergency resolves when charging or battery improves significantly\n          if (drone.status === 'charging' || drone.batteryLevel > 15) {\n            shouldResolve = true;\n          }\n          break;\n        \n        case 'communication_loss':\n          // Communication emergency resolves when signal improves\n          if (drone.connectionQuality !== 'very_poor' && drone.signalStrength > -85) {\n            shouldResolve = true;\n          }\n          break;\n        \n        case 'system_failure':\n          // System failure resolves when temperature returns to normal\n          if ((drone.temperature || 0) < 40) {\n            shouldResolve = true;\n          }\n          break;\n        \n        case 'collision_risk':\n          // Collision risk resolves after 30 seconds (simulated)\n          const timeSinceTriggered = Date.now() - new Date(emergency.triggeredAt).getTime();\n          if (timeSinceTriggered > 30000) { // 30 seconds\n            shouldResolve = true;\n          }\n          break;\n      }\n\n      if (shouldResolve) {\n        emergency.resolved = true;\n        emergency.resolvedAt = new Date().toISOString();\n        emergenciesToResolve.push(key);\n        \n        // Clear emergency state if this was the active emergency\n        if (drone.emergencyState?.id === emergency.id) {\n          drone.emergencyState = undefined;\n          // Only change status back if not maintenance\n          if (drone.status === 'emergency' && drone.id !== 'drone-005') {\n            drone.status = drone.batteryLevel < 30 ? 'charging' : 'active';\n          }\n        }\n      }\n    });\n\n    // Clean up resolved emergencies\n    emergenciesToResolve.forEach(key => {\n      this.emergencyStates.delete(key);\n    });\n  }\n\n  private generateEmergencyAlert(drone: DroneData, emergency: EmergencyState) {\n    drone.alerts = drone.alerts || [];\n    \n    // Check if we already have this emergency alert\n    const existingAlert = drone.alerts.find(alert => \n      alert.category === 'emergency' && alert.message.includes(emergency.type.replace('_', ' '))\n    );\n    \n    if (!existingAlert) {\n      drone.alerts.unshift({\n        id: `alert-emergency-${emergency.id}`,\n        severity: emergency.severity === 'emergency' ? 'critical' : 'critical',\n        message: `EMERGENCY: ${emergency.description}`,\n        timestamp: emergency.triggeredAt,\n        category: 'emergency'\n      });\n    }\n  }\n\n  stop() {\n    if (this.updateInterval) {\n      clearInterval(this.updateInterval);\n      this.updateInterval = null;\n    }\n    console.log(' Mock telemetry service stopped');\n  }\n\n  onDroneDataUpdate(callback: (drone: DroneData) => void) {\n    this.onDroneUpdate = callback;\n  }\n\n  private performCoordinationCheck() {\n    try {\n      // Get collision alerts from coordination service\n      const coordinationAlerts = coordinationService.checkCollisionRisks(mockDrones);\n      \n      // Apply avoidance maneuvers\n      coordinationAlerts.forEach(alert => {\n        if (alert.type === 'separation_violation' && alert.avoidanceAction) {\n          const drone = mockDrones.find(d => d.id === alert.avoidanceAction!.droneId);\n          if (drone) {\n            // Apply the avoidance maneuver\n            coordinationService.applyAvoidanceManeuver(drone, alert.avoidanceAction);\n            \n            // Add coordination alert to drone\n            drone.alerts = drone.alerts || [];\n            const existingCoordAlert = drone.alerts.find(a => a.category === 'coordination' && a.message.includes('avoidance'));\n            \n            if (!existingCoordAlert) {\n              drone.alerts.unshift({\n                id: `coord-${alert.id}-${Date.now()}`,\n                severity: alert.severity === 'critical' ? 'critical' : 'warning',\n                message: `Coordination: ${alert.avoidanceAction.action.replace('_', ' ')} maneuver (${alert.distance.toFixed(1)}m separation)`,\n                timestamp: alert.timestamp,\n                category: 'coordination'\n              });\n            }\n          }\n        } else if (alert.type === 'collision_warning') {\n          // Add warning alerts to both drones\n          alert.droneIds.forEach(droneId => {\n            const drone = mockDrones.find(d => d.id === droneId);\n            if (drone) {\n              drone.alerts = drone.alerts || [];\n              const existingWarning = drone.alerts.find(a => a.category === 'coordination' && a.message.includes('proximity'));\n              \n              if (!existingWarning) {\n                drone.alerts.unshift({\n                  id: `coord-warning-${droneId}-${Date.now()}`,\n                  severity: 'warning',\n                  message: `Coordination: Proximity warning - ${alert.distance.toFixed(1)}m to other drone`,\n                  timestamp: alert.timestamp,\n                  category: 'coordination'\n                });\n              }\n            }\n          });\n        }\n      });\n\n      // Update coordination alerts\n      this.coordinationAlerts = coordinationAlerts.filter(alert => !alert.resolved);\n\n      // Log coordination status\n      const status = coordinationService.getCoordinationStatus();\n      if (status.activeWarnings.length > 0) {\n        console.log(` Coordination: ${status.activeWarnings.length} active warnings, ${status.resolvedConflicts} resolved`);\n      }\n\n    } catch (error) {\n      console.error('Error during coordination check:', error);\n    }\n  }\n\n  private performChargingManagement() {\n    try {\n      // Update charging progress for occupied stations\n      chargingService.updateChargingProgress();\n      \n      // Process automatic queue management\n      chargingService.processAutoQueue(mockDrones);\n      \n      // Update drone statuses based on charging state\n      this.updateDroneChargingStatuses();\n      \n      // Log charging status\n      const stats = chargingService.getChargingStats();\n      if (stats.totalInQueue > 0 || stats.occupiedStations > 0) {\n        console.log(` Charging: ${stats.occupiedStations}/${stats.totalStations} stations occupied, ${stats.totalInQueue} in queue`);\n      }\n      \n    } catch (error) {\n      console.error('Error during charging management:', error);\n    }\n  }\n\n  private updateDroneChargingStatuses() {\n    mockDrones.forEach(drone => {\n      // Check if drone is assigned to a charging station\n      const chargingStations = chargingService.getChargingStations();\n      const assignedStation = chargingStations.find(station => station.currentDrone === drone.id);\n      \n      if (assignedStation) {\n        // Drone is charging\n        if (drone.status !== 'charging') {\n          drone.status = 'charging';\n          \n          // Add charging alert\n          drone.alerts = drone.alerts || [];\n          const existingChargingAlert = drone.alerts.find(a => a.category === 'charging');\n          if (!existingChargingAlert) {\n            drone.alerts.unshift({\n              id: `charging-${drone.id}-${Date.now()}`,\n              severity: 'info',\n              message: `Charging at ${assignedStation.name} - ${assignedStation.estimatedTimeRemaining}min remaining`,\n              timestamp: new Date().toISOString(),\n              category: 'charging'\n            });\n          } else {\n            // Update existing charging alert\n            existingChargingAlert.message = `Charging at ${assignedStation.name} - ${assignedStation.estimatedTimeRemaining}min remaining`;\n          }\n        }\n        \n        // Simulate charging progress\n        if (drone.batteryLevel < 90) {\n          const chargingRate = assignedStation.chargingRate / 60; // Per second rate\n          drone.batteryLevel = Math.min(90, drone.batteryLevel + (chargingRate * 8)); // 8 seconds per update\n          drone.batteryVoltage = 18.0 + (drone.batteryLevel / 100) * 5.5;\n        }\n        \n        // Update position to station location\n        drone.position = assignedStation.position;\n        drone.speed = 0;\n        \n      } else {\n        // Check if drone is in charging queue\n        const queueStatus = chargingService.getQueueStatus(drone.id);\n        if (queueStatus) {\n          // Add queue alert\n          drone.alerts = drone.alerts || [];\n          const existingQueueAlert = drone.alerts.find(a => a.category === 'charging' && a.message.includes('queue'));\n          if (!existingQueueAlert) {\n            drone.alerts.unshift({\n              id: `queue-${drone.id}-${Date.now()}`,\n              severity: queueStatus.priority >= 4 ? 'warning' : 'info',\n              message: `Charging queue position ${queueStatus.queuePosition} (Priority: ${queueStatus.priority})`,\n              timestamp: new Date().toISOString(),\n              category: 'charging'\n            });\n          } else {\n            // Update existing queue alert\n            existingQueueAlert.message = `Charging queue position ${queueStatus.queuePosition} (Priority: ${queueStatus.priority})`;\n          }\n        } else {\n          // Remove charging alerts if not charging or queued\n          if (drone.alerts) {\n            drone.alerts = drone.alerts.filter(a => a.category !== 'charging');\n          }\n          \n          // If drone was charging and is now done, change status\n          if (drone.status === 'charging' && drone.batteryLevel >= 85) {\n            drone.status = drone.currentMission ? 'active' : 'idle';\n            \n            // Add charging complete alert\n            drone.alerts = drone.alerts || [];\n            drone.alerts.unshift({\n              id: `charged-${drone.id}-${Date.now()}`,\n              severity: 'info',\n              message: `Charging complete - Battery: ${Math.round(drone.batteryLevel)}%`,\n              timestamp: new Date().toISOString(),\n              category: 'system'\n            });\n          }\n        }\n      }\n    });\n  }\n\n  // Coordination Methods\n  getCoordinationStatus() {\n    return coordinationService.getCoordinationStatus();\n  }\n\n  getCoordinationAlerts(): CoordinationAlert[] {\n    return this.coordinationAlerts;\n  }\n\n  // Charging Management Methods\n  getChargingStats() {\n    return chargingService.getChargingStats();\n  }\n\n  getChargingStations() {\n    return chargingService.getChargingStations();\n  }\n\n  getChargingSchedules() {\n    return chargingService.getChargingSchedules();\n  }\n\n  addDroneToChargingQueue(droneId: string, reason: 'low_battery' | 'scheduled' | 'pre_mission' | 'maintenance' | 'emergency' = 'scheduled') {\n    const drone = mockDrones.find(d => d.id === droneId);\n    if (!drone) return null;\n    \n    return chargingService.addToQueue(drone, reason);\n  }\n\n  removeDroneFromChargingQueue(droneId: string) {\n    return chargingService.removeFromQueue(droneId);\n  }\n\n  // Emergency Response Methods\n  triggerEmergencyResponse(droneId: string, responseType: 'return_to_base' | 'emergency_landing' | 'hover' | 'abort_mission') {\n    const drone = mockDrones.find(d => d.id === droneId);\n    if (!drone || !drone.emergencyState) {\n      console.warn(`Cannot trigger emergency response for ${droneId}: drone not found or no emergency state`);\n      return false;\n    }\n\n    // Update emergency state with operator override\n    if (drone.emergencyState) {\n      drone.emergencyState.operatorOverride = {\n        action: responseType.replace('_', ' '),\n        triggeredBy: 'operator',\n        triggeredAt: new Date().toISOString()\n      };\n\n      // Add response alert\n      drone.alerts = drone.alerts || [];\n      drone.alerts.unshift({\n        id: `alert-response-${droneId}-${Date.now()}`,\n        severity: 'info',\n        message: `Emergency response activated: ${responseType.replace('_', ' ')}`,\n        timestamp: new Date().toISOString(),\n        category: 'emergency'\n      });\n\n      console.log(` Emergency response triggered for ${droneId}: ${responseType}`);\n      return true;\n    }\n\n    return false;\n  }\n\n  resolveEmergency(droneId: string, resolution: string) {\n    const drone = mockDrones.find(d => d.id === droneId);\n    if (!drone || !drone.emergencyState) {\n      console.warn(`Cannot resolve emergency for ${droneId}: drone not found or no emergency state`);\n      return false;\n    }\n\n    if (drone.emergencyState) {\n      // Mark emergency as resolved\n      drone.emergencyState.resolved = true;\n      drone.emergencyState.resolvedAt = new Date().toISOString();\n\n      // Update drone status back to normal\n      if (drone.status === 'emergency') {\n        drone.status = drone.batteryLevel < 30 ? 'charging' : 'active';\n      }\n\n      // Add resolution alert\n      drone.alerts = drone.alerts || [];\n      drone.alerts.unshift({\n        id: `alert-resolved-${droneId}-${Date.now()}`,\n        severity: 'info',\n        message: `Emergency resolved: ${resolution}`,\n        timestamp: new Date().toISOString(),\n        category: 'emergency'\n      });\n\n      console.log(` Emergency resolved for ${droneId}: ${resolution}`);\n      return true;\n    }\n\n    return false;\n  }\n\n  getEmergencyStats() {\n    const activeEmergencies = Array.from(this.emergencyStates.values())\n      .filter(emergency => !emergency.resolved);\n    \n    const resolvedEmergencies = Array.from(this.emergencyStates.values())\n      .filter(emergency => emergency.resolved);\n\n    const emergencyTypes = activeEmergencies.reduce((acc, emergency) => {\n      acc[emergency.type] = (acc[emergency.type] || 0) + 1;\n      return acc;\n    }, {} as Record<string, number>);\n\n    return {\n      active: activeEmergencies.length,\n      resolved: resolvedEmergencies.length,\n      total: this.emergencyStates.size,\n      byType: emergencyTypes,\n      criticalCount: activeEmergencies.filter(e => e.severity === 'emergency').length\n    };\n  }\n}\n\nexport const mockTelemetryService = new MockTelemetryService();\n\n// Expose emergency response methods globally for testing\nif (typeof window !== 'undefined') {\n  (window as any).emergencyResponse = {\n    trigger: (droneId: string, responseType: 'return_to_base' | 'emergency_landing' | 'hover' | 'abort_mission') => \n      mockTelemetryService.triggerEmergencyResponse(droneId, responseType),\n    resolve: (droneId: string, resolution: string) => \n      mockTelemetryService.resolveEmergency(droneId, resolution),\n    stats: () => mockTelemetryService.getEmergencyStats()\n  };\n\n  // Expose coordination methods for testing\n  (window as any).coordination = {\n    status: () => mockTelemetryService.getCoordinationStatus(),\n    alerts: () => mockTelemetryService.getCoordinationAlerts(),\n    setSeparation: (distance: number) => coordinationService.setSeparationDistance(distance),\n    resolve: (alertId: string) => coordinationService.resolveAlert(alertId),\n    maneuvers: () => Array.from(coordinationService.getActiveManeuvers().entries())\n  };\n\n  // Expose charging methods for testing\n  (window as any).charging = {\n    stats: () => mockTelemetryService.getChargingStats(),\n    stations: () => mockTelemetryService.getChargingStations(),\n    schedules: () => mockTelemetryService.getChargingSchedules(),\n    addToQueue: (droneId: string, reason: 'emergency' | 'maintenance' | 'low_battery' | 'scheduled' | 'pre_mission' = 'scheduled') => mockTelemetryService.addDroneToChargingQueue(droneId, reason),\n    removeFromQueue: (droneId: string) => mockTelemetryService.removeDroneFromChargingQueue(droneId),\n    forceCharge: (droneId: string) => {\n      // Force a drone to start charging immediately\n      mockTelemetryService.addDroneToChargingQueue(droneId, 'emergency');\n      console.log(` Force charging ${droneId} with emergency priority`);\n    }\n  };\n}","import { create } from 'zustand';\nimport { subscribeWithSelector } from 'zustand/middleware';\nimport { DroneData, MissionData, FleetAlert } from '@/types/fleet';\nimport { telemetryService, ConnectionState } from '@/services/websocket';\nimport { mockDrones, mockMissions, mockAlerts, mockTelemetryService } from '@/services/mockData';\n\ninterface FleetStore {\n  // Connection state\n  connectionState: ConnectionState;\n  connectionError: string | null;\n  lastUpdate: Date | null;\n\n  // Fleet data\n  drones: Record<string, DroneData>;\n  missions: Record<string, MissionData>;\n  alerts: FleetAlert[];\n  selectedDroneId: string | null;\n\n  // Statistics\n  stats: {\n    messagesReceived: number;\n    messagesProcessed: number;\n    connectionUptime: number;\n    reconnectCount: number;\n  };\n\n  // Actions\n  setConnectionState: (state: ConnectionState, error?: string) => void;\n  updateDrone: (drone: DroneData) => void;\n  updateMission: (mission: MissionData) => void;\n  addAlert: (alert: FleetAlert) => void;\n  dismissAlert: (alertId: string) => void;\n  selectDrone: (droneId: string | null) => void;\n  updateStats: (stats: any) => void;\n\n  // Fleet operations\n  getDroneById: (id: string) => DroneData | undefined;\n  getActiveDrones: () => DroneData[];\n  getDronesWithIssues: () => DroneData[];\n  getIdleDrones: () => DroneData[];\n  getCriticalAlerts: () => FleetAlert[];\n  getFleetSummary: () => {\n    total: number;\n    active: number;\n    idle: number;\n    issues: number;\n    charging: number;\n    maintenance: number;\n    avgBattery: number;\n    avgSignal: number;\n  };\n\n  // WebSocket integration\n  connect: () => void;\n  disconnect: () => void;\n  isConnected: () => boolean;\n}\n\nexport const useFleetStore = create<FleetStore>()(\n  subscribeWithSelector((set, get) => ({\n    // Initial state\n    connectionState: ConnectionState.DISCONNECTED,\n    connectionError: null,\n    lastUpdate: null,\n    drones: {},\n    missions: {},\n    alerts: [],\n    selectedDroneId: null,\n    stats: {\n      messagesReceived: 0,\n      messagesProcessed: 0,\n      connectionUptime: 0,\n      reconnectCount: 0,\n    },\n\n    // Actions\n    setConnectionState: (state: ConnectionState, error?: string) => {\n      set({\n        connectionState: state,\n        connectionError: error || null,\n      });\n    },\n\n    updateDrone: (drone: DroneData) => {\n      set((state) => {\n        const existingDrone = state.drones[drone.id];\n        \n        // Preserve existing alerts if they haven't changed to prevent flashing\n        let alertsToUse = drone.alerts || [];\n        if (existingDrone && existingDrone.alerts) {\n          // Check if alerts are substantially the same (same IDs and messages)\n          const existingAlertMap = new Map(existingDrone.alerts.map(a => [a.id, a.message]));\n          const newAlertMap = new Map(alertsToUse.map(a => [a.id, a.message]));\n          \n          // If alert content is the same, keep the existing alert objects to prevent re-renders\n          if (existingAlertMap.size === newAlertMap.size) {\n            let alertsAreEqual = true;\n            for (const [id, message] of existingAlertMap) {\n              if (!newAlertMap.has(id) || newAlertMap.get(id) !== message) {\n                alertsAreEqual = false;\n                break;\n              }\n            }\n            \n            if (alertsAreEqual) {\n              alertsToUse = existingDrone.alerts; // Keep the same reference\n            }\n          }\n        }\n        \n        return {\n          drones: {\n            ...state.drones,\n            [drone.id]: {\n              ...drone,\n              alerts: alertsToUse,\n              lastUpdate: new Date().toISOString(),\n            },\n          },\n          lastUpdate: new Date(),\n        };\n      });\n    },\n\n    updateMission: (mission: MissionData) => {\n      set((state) => ({\n        missions: {\n          ...state.missions,\n          [mission.id]: mission,\n        },\n        lastUpdate: new Date(),\n      }));\n    },\n\n    addAlert: (alert: FleetAlert) => {\n      set((state) => ({\n        alerts: [alert, ...state.alerts.slice(0, 99)], // Keep last 100 alerts\n        lastUpdate: new Date(),\n      }));\n    },\n\n    dismissAlert: (alertId: string) => {\n      set((state) => ({\n        alerts: state.alerts.filter((alert) => alert.id !== alertId),\n      }));\n    },\n\n    selectDrone: (droneId: string | null) => {\n      set({ selectedDroneId: droneId });\n    },\n\n    updateStats: (stats: any) => {\n      set({ stats });\n    },\n\n    // Fleet operations\n    getDroneById: (id: string) => {\n      return get().drones[id];\n    },\n\n    getActiveDrones: () => {\n      const { drones } = get();\n      return Object.values(drones).filter(\n        (drone) => drone.status === 'active' || drone.status === 'in_flight'\n      );\n    },\n\n    getDronesWithIssues: () => {\n      const { drones } = get();\n      return Object.values(drones).filter(\n        (drone) =>\n          drone.status === 'maintenance' ||\n          drone.status === 'emergency' ||\n          drone.batteryLevel < 20 ||\n          drone.signalStrength < -90 ||\n          (drone.alerts && drone.alerts.length > 0)\n      );\n    },\n\n    getIdleDrones: () => {\n      const { drones } = get();\n      return Object.values(drones).filter((drone) => drone.status === 'idle');\n    },\n\n    getCriticalAlerts: () => {\n      const { alerts } = get();\n      return alerts.filter((alert) => alert.severity === 'critical');\n    },\n\n    getFleetSummary: () => {\n      const { drones } = get();\n      const droneList = Object.values(drones);\n\n      if (droneList.length === 0) {\n        return {\n          total: 0,\n          active: 0,\n          idle: 0,\n          issues: 0,\n          charging: 0,\n          maintenance: 0,\n          avgBattery: 0,\n          avgSignal: 0,\n        };\n      }\n\n      const summary = droneList.reduce(\n        (acc, drone) => {\n          acc.total++;\n          \n          switch (drone.status) {\n            case 'active':\n            case 'in_flight':\n              acc.active++;\n              break;\n            case 'idle':\n              acc.idle++;\n              break;\n            case 'charging':\n              acc.charging++;\n              break;\n            case 'maintenance':\n            case 'emergency':\n              acc.maintenance++;\n              break;\n          }\n\n          if (\n            drone.batteryLevel < 20 ||\n            drone.signalStrength < -90 ||\n            (drone.alerts && drone.alerts.length > 0)\n          ) {\n            acc.issues++;\n          }\n\n          acc.totalBattery += drone.batteryLevel;\n          acc.totalSignal += drone.signalStrength;\n\n          return acc;\n        },\n        {\n          total: 0,\n          active: 0,\n          idle: 0,\n          issues: 0,\n          charging: 0,\n          maintenance: 0,\n          totalBattery: 0,\n          totalSignal: 0,\n        }\n      );\n\n      return {\n        total: summary.total,\n        active: summary.active,\n        idle: summary.idle,\n        issues: summary.issues,\n        charging: summary.charging,\n        maintenance: summary.maintenance,\n        avgBattery: Math.round(summary.totalBattery / summary.total),\n        avgSignal: Math.round(summary.totalSignal / summary.total),\n      };\n    },\n\n    // WebSocket integration\n    connect: () => {\n      const store = get();\n      \n      // Set up event handlers\n      telemetryService.setConnectionStateCallback((state, error) => {\n        store.setConnectionState(state, error?.message);\n        \n        // If connection fails, fall back to mock data for development\n        if (state === ConnectionState.ERROR || state === ConnectionState.DISCONNECTED) {\n          setTimeout(() => {\n            console.log(' WebSocket connection failed, using mock data for development');\n            \n            // Load initial mock data\n            mockDrones.forEach(drone => store.updateDrone(drone));\n            mockMissions.forEach(mission => store.updateMission(mission));\n            mockAlerts.forEach(alert => store.addAlert(alert));\n            \n            // Set up mock telemetry updates\n            mockTelemetryService.onDroneDataUpdate((drone) => {\n              store.updateDrone(drone);\n            });\n            \n            mockTelemetryService.start();\n          }, 1000);\n        }\n      });\n\n      telemetryService.onDroneDataUpdate((drone) => {\n        store.updateDrone(drone);\n      });\n\n      telemetryService.onMissionDataUpdate((mission) => {\n        store.updateMission(mission);\n      });\n\n      telemetryService.onFleetAlertReceived((alert) => {\n        store.addAlert(alert);\n      });\n\n      // Update stats periodically\n      const updateStats = () => {\n        const stats = telemetryService.getStatistics();\n        store.updateStats(stats);\n      };\n\n      setInterval(updateStats, 15000); // Update every 15 seconds\n\n      // Connect to telemetry service\n      telemetryService.connect();\n    },\n\n    disconnect: () => {\n      telemetryService.disconnect();\n      set({\n        connectionState: ConnectionState.DISCONNECTED,\n        connectionError: null,\n      });\n    },\n\n    isConnected: () => {\n      return get().connectionState === ConnectionState.CONNECTED;\n    },\n  }))\n);\n\n// Auto-connect when store is created\nlet isAutoConnectInitialized = false;\n\nexport const initializeFleetStore = () => {\n  if (!isAutoConnectInitialized) {\n    isAutoConnectInitialized = true;\n    \n    // Connect to telemetry service on store initialization\n    const { connect } = useFleetStore.getState();\n    connect();\n\n    // Subscribe to connection state changes for logging\n    useFleetStore.subscribe(\n      (state) => state.connectionState,\n      (connectionState, prevConnectionState) => {\n        if (prevConnectionState && connectionState !== prevConnectionState) {\n          console.log(`Fleet store connection state: ${prevConnectionState}  ${connectionState}`);\n        }\n      }\n    );\n\n    // Subscribe to drone updates for logging\n    useFleetStore.subscribe(\n      (state) => Object.keys(state.drones).length,\n      (droneCount, prevDroneCount) => {\n        if (prevDroneCount !== undefined && droneCount !== prevDroneCount) {\n          console.log(`Fleet store drone count: ${prevDroneCount}  ${droneCount}`);\n        }\n      }\n    );\n  }\n};\n\n// Selectors for common data patterns\nexport const useFleetSummary = () => useFleetStore((state) => state.getFleetSummary());\nexport const useActiveDrones = () => useFleetStore((state) => state.getActiveDrones());\nexport const useDronesWithIssues = () => useFleetStore((state) => state.getDronesWithIssues());\nexport const useSelectedDrone = (): DroneData | null => {\n  const selectedDroneId = useFleetStore((state) => state.selectedDroneId);\n  const getDroneById = useFleetStore((state) => state.getDroneById);\n  return selectedDroneId ? getDroneById(selectedDroneId) || null : null;\n};\nexport const useCriticalAlerts = () => useFleetStore((state) => state.getCriticalAlerts());\nexport const useConnectionStatus = () => useFleetStore((state) => ({\n  state: state.connectionState,\n  error: state.connectionError,\n  isConnected: state.isConnected(),\n  lastUpdate: state.lastUpdate,\n}));","import React, { useState, useMemo } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport {\n  ShieldExclamationIcon,\n  ExclamationTriangleIcon,\n  FireIcon,\n  SignalSlashIcon,\n  BoltSlashIcon,\n  ClockIcon,\n  CheckCircleIcon,\n  XMarkIcon,\n  PlayIcon,\n  StopIcon\n} from '@heroicons/react/24/outline';\nimport { DroneData, EmergencyState } from '@/types/fleet';\n\ninterface EmergencyPanelProps {\n  drones: DroneData[];\n  className?: string;\n  compact?: boolean;\n}\n\nconst EmergencyPanel: React.FC<EmergencyPanelProps> = ({\n  drones,\n  className = '',\n  compact = false\n}) => {\n  const [showResolved, setShowResolved] = useState(false);\n  \n  const emergencies = useMemo(() => {\n    const active: Array<{ drone: DroneData; emergency: EmergencyState }> = [];\n    const resolved: Array<{ drone: DroneData; emergency: EmergencyState }> = [];\n    \n    drones.forEach(drone => {\n      if (drone.emergencyState) {\n        if (drone.emergencyState.resolved) {\n          resolved.push({ drone, emergency: drone.emergencyState });\n        } else {\n          active.push({ drone, emergency: drone.emergencyState });\n        }\n      }\n    });\n    \n    return {\n      active: active.sort((a, b) => new Date(b.emergency.triggeredAt).getTime() - new Date(a.emergency.triggeredAt).getTime()),\n      resolved: resolved.sort((a, b) => new Date(b.emergency.resolvedAt || b.emergency.triggeredAt).getTime() - new Date(a.emergency.resolvedAt || a.emergency.triggeredAt).getTime())\n    };\n  }, [drones]);\n\n  const getEmergencyTypeIcon = (type: string) => {\n    switch (type) {\n      case 'critical_battery': return BoltSlashIcon;\n      case 'communication_loss': return SignalSlashIcon;\n      case 'system_failure': return FireIcon;\n      case 'collision_risk': return ExclamationTriangleIcon;\n      case 'geofence_violation': return ShieldExclamationIcon;\n      default: return ExclamationTriangleIcon;\n    }\n  };\n\n  const getEmergencyTypeColor = (type: string, severity: string) => {\n    if (severity === 'emergency') return '#f85149';\n    switch (type) {\n      case 'critical_battery': return '#da3633';\n      case 'communication_loss': return '#d29922';\n      case 'system_failure': return '#f85149';\n      case 'collision_risk': return '#f85149';\n      case 'geofence_violation': return '#da3633';\n      default: return '#da3633';\n    }\n  };\n\n  const formatTimeAgo = (timestamp: string) => {\n    const now = Date.now();\n    const time = new Date(timestamp).getTime();\n    const diff = now - time;\n    \n    const minutes = Math.floor(diff / 60000);\n    const hours = Math.floor(minutes / 60);\n    const days = Math.floor(hours / 24);\n    \n    if (days > 0) return `${days}d ago`;\n    if (hours > 0) return `${hours}h ago`;\n    return `${minutes}m ago`;\n  };\n\n  const EmergencyCard: React.FC<{ \n    drone: DroneData; \n    emergency: EmergencyState; \n    index: number;\n    resolved?: boolean;\n  }> = ({ drone, emergency, index, resolved = false }) => {\n    const IconComponent = getEmergencyTypeIcon(emergency.type);\n    const color = getEmergencyTypeColor(emergency.type, emergency.severity);\n\n    return (\n      <motion.div\n        initial={{ opacity: 0, y: 20 }}\n        animate={{ opacity: 1, y: 0 }}\n        transition={{ duration: 0.3, delay: index * 0.1 }}\n        className={`\n          border-l-4 rounded-lg p-4 transition-all\n          ${resolved \n            ? 'bg-slate-800/30 border-green-500/50 opacity-75' \n            : emergency.severity === 'emergency'\n              ? 'bg-red-900/20 border-red-500 animate-pulse'\n              : 'bg-amber-900/20 border-amber-500'\n          }\n        `}\n        style={{ borderLeftColor: resolved ? '#10b981' : color }}\n      >\n        <div className=\"flex items-start justify-between\">\n          <div className=\"flex items-start gap-3 flex-1\">\n            <div className=\"flex-shrink-0 mt-0.5\">\n              {resolved ? (\n                <CheckCircleIcon className=\"w-5 h-5 text-green-400\" />\n              ) : (\n                <IconComponent className=\"w-5 h-5\" style={{ color }} />\n              )}\n            </div>\n            \n            <div className=\"flex-1\">\n              <div className=\"flex items-center gap-2 mb-1\">\n                <span className=\"font-medium text-slate-200\">\n                  {drone.name}\n                </span>\n                <span \n                  className=\"px-2 py-1 rounded-full text-xs font-medium\"\n                  style={{ \n                    backgroundColor: (resolved ? '#10b981' : color) + '20',\n                    color: resolved ? '#10b981' : color\n                  }}\n                >\n                  {resolved ? 'Resolved' : emergency.severity.toUpperCase()}\n                </span>\n                <span className=\"px-2 py-1 bg-slate-700 text-slate-300 rounded text-xs\">\n                  {emergency.type.replace('_', ' ')}\n                </span>\n              </div>\n              \n              <p className=\"text-slate-300 text-sm mb-2\">{emergency.description}</p>\n              \n              <div className=\"flex items-center gap-4 text-xs text-slate-400\">\n                <div className=\"flex items-center gap-1\">\n                  <ClockIcon className=\"w-3 h-3\" />\n                  <span>\n                    {resolved && emergency.resolvedAt ? \n                      `Resolved ${formatTimeAgo(emergency.resolvedAt)}` :\n                      `Triggered ${formatTimeAgo(emergency.triggeredAt)}`\n                    }\n                  </span>\n                </div>\n                \n                {emergency.autoResponse && (\n                  <div className=\"flex items-center gap-1\">\n                    {emergency.autoResponse.triggered ? (\n                      <PlayIcon className=\"w-3 h-3 text-blue-400\" />\n                    ) : (\n                      <StopIcon className=\"w-3 h-3 text-slate-500\" />\n                    )}\n                    <span className=\"text-blue-400\">\n                      Auto: {emergency.autoResponse.action.replace('_', ' ')}\n                    </span>\n                  </div>\n                )}\n                \n                {emergency.operatorOverride && (\n                  <div className=\"flex items-center gap-1\">\n                    <span className=\"text-green-400\">\n                      Override: {emergency.operatorOverride.action}\n                    </span>\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n          \n          {!resolved && (\n            <div className=\"flex items-center gap-2 ml-3\">\n              <button\n                className=\"px-2 py-1 bg-blue-900/30 text-blue-400 hover:bg-blue-900/50 rounded text-xs transition-colors\"\n                title=\"Acknowledge emergency\"\n              >\n                Ack\n              </button>\n              <button\n                className=\"p-1 text-slate-400 hover:text-slate-200 transition-colors\"\n                title=\"Dismiss\"\n              >\n                <XMarkIcon className=\"w-4 h-4\" />\n              </button>\n            </div>\n          )}\n        </div>\n      </motion.div>\n    );\n  };\n\n  if (compact) {\n    return (\n      <div className={`bg-slate-900 border border-slate-700 rounded-lg p-4 ${className}`}>\n        <div className=\"flex items-center justify-between mb-3\">\n          <h3 className=\"text-lg font-medium text-slate-200 flex items-center gap-2\">\n            <ShieldExclamationIcon className=\"w-5 h-5\" />\n            Emergencies\n          </h3>\n          <div className=\"flex items-center gap-2 text-sm\">\n            {emergencies.active.length > 0 ? (\n              <span className=\"bg-red-500 text-white px-2 py-1 rounded-full text-xs\">\n                {emergencies.active.length} Active\n              </span>\n            ) : (\n              <span className=\"text-green-400\">All Clear</span>\n            )}\n          </div>\n        </div>\n        \n        <div className=\"space-y-2\">\n          {emergencies.active.length === 0 ? (\n            <div className=\"text-center py-4\">\n              <CheckCircleIcon className=\"w-8 h-8 mx-auto text-green-400 mb-2\" />\n              <p className=\"text-sm text-slate-400\">No active emergencies</p>\n            </div>\n          ) : (\n            emergencies.active.slice(0, 3).map(({ drone, emergency }, index) => (\n              <EmergencyCard\n                key={emergency.id}\n                drone={drone}\n                emergency={emergency}\n                index={index}\n              />\n            ))\n          )}\n          \n          {emergencies.active.length > 3 && (\n            <p className=\"text-xs text-slate-500 text-center py-1\">\n              +{emergencies.active.length - 3} more emergencies\n            </p>\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className={`bg-slate-900 border border-slate-700 rounded-lg ${className}`}>\n      {/* Header */}\n      <div className=\"flex items-center justify-between p-6 border-b border-slate-700\">\n        <h2 className=\"text-xl font-semibold text-slate-200 flex items-center gap-3\">\n          <ShieldExclamationIcon className=\"w-6 h-6\" />\n          Emergency Management\n        </h2>\n        \n        <div className=\"flex items-center gap-3\">\n          <div className=\"flex items-center gap-4 text-sm text-slate-400\">\n            {emergencies.active.length > 0 ? (\n              <span className=\"bg-red-500 text-white px-2 py-1 rounded-full\">\n                {emergencies.active.length} Active\n              </span>\n            ) : (\n              <span className=\"text-green-400\">All Clear</span>\n            )}\n            <span>{emergencies.resolved.length} Resolved</span>\n          </div>\n          \n          <button\n            onClick={() => setShowResolved(!showResolved)}\n            className={`p-2 rounded-lg transition-colors ${\n              showResolved\n                ? 'bg-green-500/10 text-green-400'\n                : 'bg-slate-800 text-slate-400 hover:text-slate-200'\n            }`}\n            title=\"Toggle resolved emergencies\"\n          >\n            <CheckCircleIcon className=\"w-5 h-5\" />\n          </button>\n        </div>\n      </div>\n      \n      {/* Content */}\n      <div className=\"p-6\">\n        <AnimatePresence mode=\"wait\">\n          {showResolved ? (\n            <motion.div\n              key=\"resolved\"\n              initial={{ opacity: 0, y: 10 }}\n              animate={{ opacity: 1, y: 0 }}\n              exit={{ opacity: 0, y: -10 }}\n              className=\"space-y-4\"\n            >\n              <h3 className=\"text-lg font-medium text-slate-200 mb-4\">\n                Resolved Emergencies ({emergencies.resolved.length})\n              </h3>\n              \n              {emergencies.resolved.length === 0 ? (\n                <div className=\"text-center py-8 text-slate-500\">\n                  No resolved emergencies\n                </div>\n              ) : (\n                <div className=\"space-y-3 max-h-96 overflow-y-auto\">\n                  {emergencies.resolved.map(({ drone, emergency }, index) => (\n                    <EmergencyCard\n                      key={emergency.id}\n                      drone={drone}\n                      emergency={emergency}\n                      index={index}\n                      resolved={true}\n                    />\n                  ))}\n                </div>\n              )}\n            </motion.div>\n          ) : (\n            <motion.div\n              key=\"active\"\n              initial={{ opacity: 0, y: 10 }}\n              animate={{ opacity: 1, y: 0 }}\n              exit={{ opacity: 0, y: -10 }}\n              className=\"space-y-4\"\n            >\n              <h3 className=\"text-lg font-medium text-slate-200 mb-4\">\n                Active Emergencies ({emergencies.active.length})\n              </h3>\n              \n              {emergencies.active.length === 0 ? (\n                <div className=\"text-center py-8\">\n                  <CheckCircleIcon className=\"w-12 h-12 mx-auto text-green-400 mb-3\" />\n                  <h4 className=\"text-lg font-semibold text-slate-200 mb-2\">No Active Emergencies</h4>\n                  <p className=\"text-slate-400\">All drones are operating within normal parameters</p>\n                </div>\n              ) : (\n                <div className=\"space-y-3 max-h-96 overflow-y-auto\">\n                  {emergencies.active.map(({ drone, emergency }, index) => (\n                    <EmergencyCard\n                      key={emergency.id}\n                      drone={drone}\n                      emergency={emergency}\n                      index={index}\n                    />\n                  ))}\n                </div>\n              )}\n            </motion.div>\n          )}\n        </AnimatePresence>\n      </div>\n    </div>\n  );\n};\n\nexport default EmergencyPanel;","import React, { useState, useEffect, useMemo } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport {\n  ArrowPathIcon,\n  ExclamationTriangleIcon,\n  ShieldCheckIcon,\n  ClockIcon,\n  MapPinIcon,\n  CogIcon,\n  ArrowUpIcon,\n  ArrowDownIcon,\n  ArrowLeftIcon,\n  ArrowRightIcon,\n  PlayIcon,\n  PauseIcon,\n  CheckCircleIcon\n} from '@heroicons/react/24/outline';\nimport { mockTelemetryService } from '@/services/mockData';\nimport { CoordinationAlert, CoordinationStatus } from '@/services/coordinationService';\n\ninterface CoordinationPanelProps {\n  className?: string;\n  compact?: boolean;\n}\n\nconst CoordinationPanel: React.FC<CoordinationPanelProps> = ({\n  className = '',\n  compact = false\n}) => {\n  const isTransparent = className.includes('bg-transparent');\n  const [coordinationStatus, setCoordinationStatus] = useState<CoordinationStatus | null>(null);\n  const [coordinationAlerts, setCoordinationAlerts] = useState<CoordinationAlert[]>([]);\n  const [showResolved, setShowResolved] = useState(false);\n\n  useEffect(() => {\n    const updateCoordinationData = () => {\n      try {\n        const status = mockTelemetryService.getCoordinationStatus();\n        const alerts = mockTelemetryService.getCoordinationAlerts();\n        \n        setCoordinationStatus(status);\n        setCoordinationAlerts(alerts);\n      } catch (error) {\n        console.error('Error fetching coordination data:', error);\n      }\n    };\n\n    // Initial load\n    updateCoordinationData();\n\n    // Update every 5 seconds\n    const interval = setInterval(updateCoordinationData, 5000);\n\n    return () => clearInterval(interval);\n  }, []);\n\n  const { activeAlerts, resolvedAlerts } = useMemo(() => {\n    const active = coordinationAlerts.filter(alert => !alert.resolved);\n    const resolved = coordinationAlerts.filter(alert => alert.resolved);\n    \n    return {\n      activeAlerts: active.sort((a, b) => new Date(b.timestamp).getTime() - new Date(a.timestamp).getTime()),\n      resolvedAlerts: resolved.sort((a, b) => new Date(b.timestamp).getTime() - new Date(a.timestamp).getTime())\n    };\n  }, [coordinationAlerts]);\n\n  const getAlertIcon = (type: string) => {\n    switch (type) {\n      case 'separation_violation':\n        return ExclamationTriangleIcon;\n      case 'collision_warning':\n        return ExclamationTriangleIcon;\n      default:\n        return MapPinIcon;\n    }\n  };\n\n  const getAlertColor = (severity: string) => {\n    switch (severity) {\n      case 'critical':\n        return { color: '#f85149', bg: '#f85149' };\n      case 'warning':\n        return { color: '#d29922', bg: '#d29922' };\n      default:\n        return { color: '#8b949e', bg: '#8b949e' };\n    }\n  };\n\n  const getAvoidanceActionIcon = (action: string) => {\n    switch (action) {\n      case 'climb': return ArrowUpIcon;\n      case 'descend': return ArrowDownIcon;\n      case 'turn_left': return ArrowLeftIcon;\n      case 'turn_right': return ArrowRightIcon;\n      case 'hover': return PauseIcon;\n      case 'slow_down': return PlayIcon;\n      default: return ArrowPathIcon;\n    }\n  };\n\n  const formatTimeAgo = (timestamp: string) => {\n    const now = Date.now();\n    const time = new Date(timestamp).getTime();\n    const diff = now - time;\n    \n    const minutes = Math.floor(diff / 60000);\n    const hours = Math.floor(minutes / 60);\n    \n    if (hours > 0) return `${hours}h ago`;\n    return `${minutes}m ago`;\n  };\n\n  const CoordinationAlertCard: React.FC<{ \n    alert: CoordinationAlert; \n    index: number;\n    resolved?: boolean;\n  }> = ({ alert, index, resolved = false }) => {\n    const IconComponent = getAlertIcon(alert.type);\n    const colors = getAlertColor(alert.severity);\n    const AvoidanceIcon = alert.avoidanceAction ? getAvoidanceActionIcon(alert.avoidanceAction.action) : null;\n\n    return (\n      <motion.div\n        initial={{ opacity: 0, y: 20 }}\n        animate={{ opacity: 1, y: 0 }}\n        transition={{ duration: 0.3, delay: index * 0.1 }}\n        className={`\n          border-l-4 rounded-lg p-4 transition-all\n          ${resolved \n            ? 'bg-slate-800/30 border-green-500/50 opacity-75' \n            : alert.severity === 'critical'\n              ? 'bg-red-900/20 border-red-500'\n              : 'bg-amber-900/20 border-amber-500'\n          }\n        `}\n        style={{ borderLeftColor: resolved ? '#10b981' : colors.color }}\n      >\n        <div className=\"flex items-start justify-between\">\n          <div className=\"flex items-start gap-3 flex-1\">\n            <div className=\"flex-shrink-0 mt-0.5\">\n              {resolved ? (\n                <CheckCircleIcon className=\"w-5 h-5 text-green-400\" />\n              ) : (\n                <IconComponent className=\"w-5 h-5\" style={{ color: colors.color }} />\n              )}\n            </div>\n            \n            <div className=\"flex-1\">\n              <div className=\"flex items-center gap-2 mb-2\">\n                <span className=\"font-medium text-slate-200\">\n                  {alert.type.replace('_', ' ').toUpperCase()}\n                </span>\n                <span \n                  className=\"px-2 py-1 rounded-full text-xs font-medium\"\n                  style={{ \n                    backgroundColor: (resolved ? '#10b981' : colors.color) + '20',\n                    color: resolved ? '#10b981' : colors.color\n                  }}\n                >\n                  {resolved ? 'Resolved' : alert.severity.toUpperCase()}\n                </span>\n                <span className=\"px-2 py-1 bg-slate-700 text-slate-300 rounded text-xs\">\n                  {alert.distance.toFixed(1)}m\n                </span>\n              </div>\n              \n              <p className=\"text-slate-300 text-sm mb-3\">{alert.message}</p>\n              \n              {/* Drone IDs */}\n              <div className=\"flex items-center gap-2 mb-2\">\n                <span className=\"text-xs text-slate-400\">Drones:</span>\n                {alert.droneIds.map(droneId => (\n                  <span key={droneId} className=\"px-2 py-1 bg-slate-700 text-slate-300 rounded text-xs font-mono\">\n                    {droneId}\n                  </span>\n                ))}\n              </div>\n              \n              {/* Avoidance Action */}\n              {alert.avoidanceAction && AvoidanceIcon && (\n                <div className=\"flex items-center gap-2 mb-2\">\n                  <AvoidanceIcon className=\"w-4 h-4 text-blue-400\" />\n                  <span className=\"text-sm text-blue-400\">\n                    Action: {alert.avoidanceAction.action.replace('_', ' ')} \n                    ({alert.avoidanceAction.magnitude} | m)\n                  </span>\n                  <span className=\"text-xs text-slate-400\">\n                     {alert.avoidanceAction.droneId}\n                  </span>\n                </div>\n              )}\n              \n              <div className=\"flex items-center gap-4 text-xs text-slate-400\">\n                <div className=\"flex items-center gap-1\">\n                  <ClockIcon className=\"w-3 h-3\" />\n                  <span>{formatTimeAgo(alert.timestamp)}</span>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </motion.div>\n    );\n  };\n\n  if (compact) {\n    return (\n      <div className={`bg-slate-900 border border-slate-700 rounded-lg p-4 ${className}`}>\n        <div className=\"flex items-center justify-between mb-3\">\n          <h3 className=\"text-lg font-medium text-slate-200 flex items-center gap-2\">\n            <ArrowPathIcon className=\"w-5 h-5\" />\n            Coordination\n          </h3>\n          <div className=\"flex items-center gap-2 text-sm\">\n            {coordinationStatus && coordinationStatus.isActive ? (\n              <span className=\"flex items-center gap-1 text-green-400\">\n                <ShieldCheckIcon className=\"w-4 h-4\" />\n                Active\n              </span>\n            ) : (\n              <span className=\"text-slate-500\">Inactive</span>\n            )}\n          </div>\n        </div>\n        \n        <div className=\"space-y-2\">\n          {coordinationStatus && (\n            <div className=\"flex items-center justify-between text-sm\">\n              <span className=\"text-slate-400\">Separation</span>\n              <span className=\"text-slate-200\">{coordinationStatus.separationDistance}m</span>\n            </div>\n          )}\n          \n          {activeAlerts.length === 0 ? (\n            <div className=\"text-center py-4\">\n              <ShieldCheckIcon className=\"w-8 h-8 mx-auto text-green-400 mb-2\" />\n              <p className=\"text-sm text-slate-400\">No conflicts</p>\n            </div>\n          ) : (\n            <div className=\"space-y-2\">\n              {activeAlerts.slice(0, 2).map((alert, index) => (\n                <CoordinationAlertCard\n                  key={alert.id}\n                  alert={alert}\n                  index={index}\n                />\n              ))}\n              {activeAlerts.length > 2 && (\n                <p className=\"text-xs text-slate-500 text-center py-1\">\n                  +{activeAlerts.length - 2} more conflicts\n                </p>\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className={isTransparent ? `${className} flex flex-col h-full` : `bg-slate-900 border border-slate-700 rounded-lg ${className}`}>\n      {/* Header */}\n      <div className={`flex items-center justify-between ${isTransparent ? 'p-4 border-b border-dark-border flex-shrink-0' : 'p-6 border-b border-slate-700'}`}>\n        <h2 className={`${isTransparent ? 'text-lg font-semibold text-text-primary' : 'text-xl font-semibold text-slate-200'} flex items-center gap-3`}>\n          <ArrowPathIcon className={`${isTransparent ? 'w-5 h-5' : 'w-6 h-6'}`} />\n          Fleet Coordination\n        </h2>\n        \n        <div className=\"flex items-center gap-3\">\n          <div className=\"flex items-center gap-4 text-sm text-slate-400\">\n            {coordinationStatus ? (\n              <>\n                <div className=\"flex items-center gap-1\">\n                  <div className={`w-2 h-2 rounded-full ${coordinationStatus.isActive ? 'bg-green-400' : 'bg-red-400'}`} />\n                  <span>{coordinationStatus.isActive ? 'Active' : 'Inactive'}</span>\n                </div>\n                <span>{coordinationStatus.separationDistance}m separation</span>\n                <span>{activeAlerts.length} active conflicts</span>\n                <span>{coordinationStatus.resolvedConflicts} resolved</span>\n              </>\n            ) : (\n              <span>Loading...</span>\n            )}\n          </div>\n          \n          <button\n            onClick={() => setShowResolved(!showResolved)}\n            className={`p-2 rounded-lg transition-colors ${\n              showResolved\n                ? 'bg-green-500/10 text-green-400'\n                : 'bg-slate-800 text-slate-400 hover:text-slate-200'\n            }`}\n            title=\"Toggle resolved conflicts\"\n          >\n            <CheckCircleIcon className=\"w-5 h-5\" />\n          </button>\n\n          <button\n            className=\"p-2 bg-slate-800 text-slate-400 hover:text-slate-200 rounded-lg transition-colors\"\n            title=\"Configuration\"\n          >\n            <CogIcon className=\"w-5 h-5\" />\n          </button>\n        </div>\n      </div>\n      \n      {/* Content */}\n      <div className={`${isTransparent ? 'p-4 flex-1 overflow-auto' : 'p-6'}`}>\n        <AnimatePresence mode=\"wait\">\n          {showResolved ? (\n            <motion.div\n              key=\"resolved\"\n              initial={{ opacity: 0, y: 10 }}\n              animate={{ opacity: 1, y: 0 }}\n              exit={{ opacity: 0, y: -10 }}\n              className=\"space-y-4\"\n            >\n              <h3 className={`text-lg font-medium mb-4 ${isTransparent ? 'text-text-primary' : 'text-slate-200'}`}>\n                Resolved Conflicts ({resolvedAlerts.length})\n              </h3>\n              \n              {resolvedAlerts.length === 0 ? (\n                <div className={`text-center py-8 ${isTransparent ? 'text-text-muted' : 'text-slate-500'}`}>\n                  No resolved conflicts yet\n                </div>\n              ) : (\n                <div className={`space-y-3 overflow-y-auto ${isTransparent ? 'max-h-64' : 'max-h-96'}`}>\n                  {resolvedAlerts.map((alert, index) => (\n                    <CoordinationAlertCard\n                      key={alert.id}\n                      alert={alert}\n                      index={index}\n                      resolved={true}\n                    />\n                  ))}\n                </div>\n              )}\n            </motion.div>\n          ) : (\n            <motion.div\n              key=\"active\"\n              initial={{ opacity: 0, y: 10 }}\n              animate={{ opacity: 1, y: 0 }}\n              exit={{ opacity: 0, y: -10 }}\n              className=\"space-y-4\"\n            >\n              <h3 className=\"text-lg font-medium text-slate-200 mb-4\">\n                Active Coordination ({activeAlerts.length})\n              </h3>\n              \n              {activeAlerts.length === 0 ? (\n                <div className=\"text-center py-8\">\n                  <ShieldCheckIcon className=\"w-12 h-12 mx-auto text-green-400 mb-3\" />\n                  <h4 className=\"text-lg font-semibold text-slate-200 mb-2\">No Active Conflicts</h4>\n                  <p className=\"text-slate-400\">All drones maintaining safe separation ({coordinationStatus?.separationDistance}m)</p>\n                </div>\n              ) : (\n                <div className={`space-y-3 overflow-y-auto ${isTransparent ? 'max-h-64' : 'max-h-96'}`}>\n                  {activeAlerts.map((alert, index) => (\n                    <CoordinationAlertCard\n                      key={alert.id}\n                      alert={alert}\n                      index={index}\n                    />\n                  ))}\n                </div>\n              )}\n            </motion.div>\n          )}\n        </AnimatePresence>\n      </div>\n    </div>\n  );\n};\n\nexport default CoordinationPanel;","import React, { useState, useEffect, useMemo } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport {\n  BoltIcon,\n  ClockIcon,\n  QueueListIcon,\n  CheckCircleIcon,\n  ExclamationTriangleIcon,\n  WrenchScrewdriverIcon,\n  PlayIcon,\n  PauseIcon,\n  XMarkIcon,\n  ArrowUpIcon,\n  ArrowDownIcon\n} from '@heroicons/react/24/outline';\nimport { mockTelemetryService } from '@/services/mockData';\nimport { ChargingStation, ChargingQueueItem, ChargingSchedule, ChargingStats } from '@/services/chargingService';\n\ninterface ChargingPanelProps {\n  className?: string;\n  compact?: boolean;\n}\n\nconst ChargingPanel: React.FC<ChargingPanelProps> = ({\n  className = '',\n  compact = false\n}) => {\n  const isTransparent = className.includes('bg-transparent');\n  const [chargingStats, setChargingStats] = useState<ChargingStats | null>(null);\n  const [chargingStations, setChargingStations] = useState<ChargingStation[]>([]);\n  const [chargingSchedules, setChargingSchedules] = useState<ChargingSchedule[]>([]);\n  const [activeView, setActiveView] = useState<'overview' | 'queue' | 'stations'>('overview');\n\n  useEffect(() => {\n    const updateChargingData = () => {\n      try {\n        const stats = mockTelemetryService.getChargingStats();\n        const stations = mockTelemetryService.getChargingStations();\n        const schedules = mockTelemetryService.getChargingSchedules();\n        \n        setChargingStats(stats);\n        setChargingStations(stations);\n        setChargingSchedules(schedules);\n      } catch (error) {\n        console.error('Error fetching charging data:', error);\n      }\n    };\n\n    // Initial load\n    updateChargingData();\n\n    // Update every 5 seconds\n    const interval = setInterval(updateChargingData, 5000);\n\n    return () => clearInterval(interval);\n  }, []);\n\n  const globalQueue = useMemo(() => {\n    // Combine all queue items from all schedules\n    const allQueueItems: ChargingQueueItem[] = [];\n    chargingSchedules.forEach(schedule => {\n      allQueueItems.push(...schedule.queue);\n    });\n    \n    // Remove duplicates and sort by queue position\n    const uniqueItems = allQueueItems.filter((item, index, arr) => \n      arr.findIndex(i => i.droneId === item.droneId) === index\n    );\n    \n    return uniqueItems.sort((a, b) => a.queuePosition - b.queuePosition);\n  }, [chargingSchedules]);\n\n  const getStationStatusColor = (status: string) => {\n    switch (status) {\n      case 'available':\n        return { color: '#10b981', bg: '#10b981', icon: CheckCircleIcon };\n      case 'occupied':\n        return { color: '#d29922', bg: '#d29922', icon: BoltIcon };\n      case 'maintenance':\n        return { color: '#da3633', bg: '#da3633', icon: WrenchScrewdriverIcon };\n      case 'reserved':\n        return { color: '#1f6feb', bg: '#1f6feb', icon: ClockIcon };\n      default:\n        return { color: '#8b949e', bg: '#8b949e', icon: PauseIcon };\n    }\n  };\n\n  const getPriorityColor = (priority: number) => {\n    if (priority >= 5) return 'text-red-400 bg-red-900/20';\n    if (priority >= 4) return 'text-orange-400 bg-orange-900/20';\n    if (priority >= 3) return 'text-yellow-400 bg-yellow-900/20';\n    if (priority >= 2) return 'text-blue-400 bg-blue-900/20';\n    return 'text-gray-400 bg-gray-900/20';\n  };\n\n  const getReasonIcon = (reason: string) => {\n    switch (reason) {\n      case 'emergency': return ExclamationTriangleIcon;\n      case 'low_battery': return BoltIcon;\n      case 'pre_mission': return PlayIcon;\n      case 'maintenance': return WrenchScrewdriverIcon;\n      case 'scheduled': return ClockIcon;\n      default: return QueueListIcon;\n    }\n  };\n\n  const formatTime = (minutes: number) => {\n    if (minutes < 60) return `${minutes}m`;\n    const hours = Math.floor(minutes / 60);\n    const mins = minutes % 60;\n    return `${hours}h ${mins}m`;\n  };\n\n  const QueueItemCard: React.FC<{ item: ChargingQueueItem; index: number }> = ({ item, index }) => {\n    const ReasonIcon = getReasonIcon(item.reason);\n    \n    return (\n      <motion.div\n        initial={{ opacity: 0, y: 20 }}\n        animate={{ opacity: 1, y: 0 }}\n        transition={{ duration: 0.3, delay: index * 0.05 }}\n        className={`${isTransparent ? 'bg-dark-tertiary border border-dark-border' : 'bg-slate-800 border border-slate-600'} rounded-lg p-4`}\n      >\n        <div className=\"flex items-start justify-between\">\n          <div className=\"flex items-start gap-3 flex-1\">\n            <div className=\"flex-shrink-0\">\n              <div className={`w-8 h-8 rounded-full flex items-center justify-center text-lg font-bold ${getPriorityColor(item.priority)}`}>\n                {item.queuePosition}\n              </div>\n            </div>\n            \n            <div className=\"flex-1\">\n              <div className=\"flex items-center gap-2 mb-2\">\n                <span className={`font-medium ${isTransparent ? 'text-text-primary' : 'text-slate-200'}`}>{item.droneName}</span>\n                <span className={`text-xs font-mono ${isTransparent ? 'text-text-secondary' : 'text-slate-400'}`}>({item.droneId})</span>\n                <span className={`px-2 py-1 rounded-full text-xs font-medium ${getPriorityColor(item.priority)}`}>\n                  Priority {item.priority}\n                </span>\n              </div>\n              \n              <div className={`flex items-center gap-4 text-sm mb-2 ${isTransparent ? 'text-text-secondary' : 'text-slate-400'}`}>\n                <div className=\"flex items-center gap-1\">\n                  <BoltIcon className=\"w-4 h-4\" />\n                  <span>{item.batteryLevel.toFixed(1)}%</span>\n                </div>\n                <div className=\"flex items-center gap-1\">\n                  <ClockIcon className=\"w-4 h-4\" />\n                  <span>ETA: {formatTime(item.estimatedArrival)}</span>\n                </div>\n                <div className=\"flex items-center gap-1\">\n                  <ReasonIcon className=\"w-4 h-4\" />\n                  <span className=\"capitalize\">{item.reason.replace('_', ' ')}</span>\n                </div>\n              </div>\n              \n              <div className={`text-xs ${isTransparent ? 'text-text-muted' : 'text-slate-500'}`}>\n                Expected charging time: {formatTime(item.expectedChargingTime)}  \n                Requested: {new Date(item.requestedAt).toLocaleTimeString()}\n              </div>\n            </div>\n          </div>\n          \n          <div className=\"flex items-center gap-2 ml-3\">\n            <button\n              onClick={() => {\n                // Move up in queue (decrease priority slightly)\n                console.log(`Moving ${item.droneName} up in queue`);\n              }}\n              className={`p-1 transition-colors ${isTransparent ? 'text-text-muted hover:text-green-400' : 'text-slate-500 hover:text-green-400'}`}\n              title=\"Move up in queue\"\n            >\n              <ArrowUpIcon className=\"w-4 h-4\" />\n            </button>\n            <button\n              onClick={() => {\n                // Move down in queue (increase priority slightly)\n                console.log(`Moving ${item.droneName} down in queue`);\n              }}\n              className={`p-1 transition-colors ${isTransparent ? 'text-text-muted hover:text-yellow-400' : 'text-slate-500 hover:text-yellow-400'}`}\n              title=\"Move down in queue\"\n            >\n              <ArrowDownIcon className=\"w-4 h-4\" />\n            </button>\n            <button\n              onClick={() => {\n                mockTelemetryService.removeDroneFromChargingQueue(item.droneId);\n              }}\n              className={`p-1 transition-colors ${isTransparent ? 'text-text-muted hover:text-red-400' : 'text-slate-500 hover:text-red-400'}`}\n              title=\"Remove from queue\"\n            >\n              <XMarkIcon className=\"w-4 h-4\" />\n            </button>\n          </div>\n        </div>\n      </motion.div>\n    );\n  };\n\n  const StationCard: React.FC<{ station: ChargingStation; index: number }> = ({ station, index }) => {\n    const statusConfig = getStationStatusColor(station.status);\n    const StatusIcon = statusConfig.icon;\n    \n    return (\n      <motion.div\n        initial={{ opacity: 0, y: 20 }}\n        animate={{ opacity: 1, y: 0 }}\n        transition={{ duration: 0.3, delay: index * 0.1 }}\n        className={`${isTransparent ? 'bg-dark-tertiary border border-dark-border' : 'bg-slate-800 border border-slate-600'} rounded-lg p-4`}\n      >\n        <div className=\"flex items-start justify-between mb-3\">\n          <div className=\"flex items-center gap-3\">\n            <div \n              className=\"w-10 h-10 rounded-full flex items-center justify-center\"\n              style={{ backgroundColor: statusConfig.bg + '20' }}\n            >\n              <StatusIcon className=\"w-5 h-5\" style={{ color: statusConfig.color }} />\n            </div>\n            <div>\n              <h3 className={`font-medium ${isTransparent ? 'text-text-primary' : 'text-slate-200'}`}>{station.name}</h3>\n              <p className={`text-xs ${isTransparent ? 'text-text-secondary' : 'text-slate-400'}`}>ID: {station.id}</p>\n            </div>\n          </div>\n          \n          <span \n            className=\"px-2 py-1 rounded-full text-xs font-medium capitalize\"\n            style={{ \n              backgroundColor: statusConfig.color + '20',\n              color: statusConfig.color \n            }}\n          >\n            {station.status}\n          </span>\n        </div>\n        \n        <div className=\"grid grid-cols-2 gap-4 text-sm\">\n          <div>\n            <span className={`${isTransparent ? 'text-text-secondary' : 'text-slate-400'}`}>Charging Rate</span>\n            <div className={`font-mono ${isTransparent ? 'text-text-primary' : 'text-slate-200'}`}>{station.chargingRate}%/min</div>\n          </div>\n          \n          <div>\n            <span className={`${isTransparent ? 'text-text-secondary' : 'text-slate-400'}`}>Sessions</span>\n            <div className={`font-mono ${isTransparent ? 'text-text-primary' : 'text-slate-200'}`}>{station.totalChargingSessions}</div>\n          </div>\n          \n          <div>\n            <span className={`${isTransparent ? 'text-text-secondary' : 'text-slate-400'}`}>Avg Time</span>\n            <div className={`font-mono ${isTransparent ? 'text-text-primary' : 'text-slate-200'}`}>{formatTime(station.averageChargingTime)}</div>\n          </div>\n          \n          <div>\n            <span className={`${isTransparent ? 'text-text-secondary' : 'text-slate-400'}`}>Time Left</span>\n            <div className={`font-mono ${isTransparent ? 'text-text-primary' : 'text-slate-200'}`}>\n              {station.estimatedTimeRemaining ? formatTime(station.estimatedTimeRemaining) : 'N/A'}\n            </div>\n          </div>\n        </div>\n        \n        {station.currentDrone && (\n          <div className=\"mt-3 pt-3 border-t border-slate-600\">\n            <div className=\"flex items-center gap-2 text-sm\">\n              <BoltIcon className=\"w-4 h-4 text-yellow-400\" />\n              <span className={`${isTransparent ? 'text-text-secondary' : 'text-slate-300'}`}>Currently charging:</span>\n              <span className={`font-mono ${isTransparent ? 'text-text-primary' : 'text-slate-200'}`}>{station.currentDrone}</span>\n            </div>\n          </div>\n        )}\n        \n        <div className={`mt-3 text-xs ${isTransparent ? 'text-text-muted' : 'text-slate-500'}`}>\n          Last maintenance: {new Date(station.lastMaintenance).toLocaleDateString()}\n        </div>\n      </motion.div>\n    );\n  };\n\n  if (compact) {\n    return (\n      <div className={`${isTransparent ? className : `bg-slate-900 border border-slate-700 rounded-lg p-4 ${className}`}`}>\n        <div className=\"flex items-center justify-between mb-3\">\n          <h3 className={`text-lg font-medium flex items-center gap-2 ${isTransparent ? 'text-text-primary' : 'text-slate-200'}`}>\n            <BoltIcon className=\"w-5 h-5\" />\n            Charging\n          </h3>\n          <div className=\"flex items-center gap-2 text-sm\">\n            {chargingStats && (\n              <span className={`${isTransparent ? 'text-text-secondary' : 'text-slate-400'}`}>\n                {chargingStats.occupiedStations}/{chargingStats.totalStations}  Queue: {chargingStats.totalInQueue}\n              </span>\n            )}\n          </div>\n        </div>\n        \n        <div className=\"space-y-2\">\n          {chargingStats && (\n            <div className=\"grid grid-cols-2 gap-2 text-sm\">\n              <div>\n                <span className={`${isTransparent ? 'text-text-secondary' : 'text-slate-400'}`}>Available</span>\n                <div className=\"text-green-400 font-mono\">{chargingStats.availableStations}</div>\n              </div>\n              <div>\n                <span className={`${isTransparent ? 'text-text-secondary' : 'text-slate-400'}`}>In Queue</span>\n                <div className=\"text-orange-400 font-mono\">{chargingStats.totalInQueue}</div>\n              </div>\n            </div>\n          )}\n          \n          {globalQueue.length > 0 && (\n            <div className=\"space-y-1\">\n              <div className=\"text-xs font-medium text-slate-300\">Next in queue:</div>\n              {globalQueue.slice(0, 2).map((item) => (\n                <div key={item.id} className=\"text-xs text-slate-400 flex items-center justify-between\">\n                  <span>{item.queuePosition}. {item.droneName}</span>\n                  <span>{item.batteryLevel.toFixed(0)}%</span>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className={isTransparent ? className : `bg-slate-900 border border-slate-700 rounded-lg ${className}`}>\n      {/* Header */}\n      <div className={`flex items-center justify-between ${isTransparent ? 'p-4 border-b border-dark-border' : 'p-6 border-b border-slate-700'}`}>\n        <h2 className={`${isTransparent ? 'text-lg font-semibold text-text-primary' : 'text-xl font-semibold text-slate-200'} flex items-center gap-3`}>\n          <BoltIcon className={`${isTransparent ? 'w-5 h-5' : 'w-6 h-6'}`} />\n          Charging Management\n        </h2>\n        \n        <div className=\"flex items-center gap-3\">\n          <div className={`flex items-center gap-4 text-sm ${isTransparent ? 'text-text-secondary' : 'text-slate-400'}`}>\n            {chargingStats && (\n              <>\n                <span>{chargingStats.occupiedStations}/{chargingStats.totalStations} stations busy</span>\n                <span>{chargingStats.totalInQueue} in queue</span>\n                <span>Avg wait: {formatTime(chargingStats.averageWaitTime)}</span>\n              </>\n            )}\n          </div>\n          \n          <div className=\"flex space-x-1\">\n            <button\n              onClick={() => setActiveView('overview')}\n              className={`px-3 py-1.5 rounded text-sm font-medium transition-colors ${\n                activeView === 'overview'\n                  ? (isTransparent ? 'bg-dark-tertiary text-text-primary border border-dark-border' : 'bg-slate-700 text-slate-200')\n                  : (isTransparent ? 'text-text-secondary hover:text-text-primary hover:bg-dark-hover' : 'text-slate-400 hover:text-slate-200 hover:bg-slate-800')\n              }`}\n            >\n              Overview\n            </button>\n            <button\n              onClick={() => setActiveView('queue')}\n              className={`px-3 py-1.5 rounded text-sm font-medium transition-colors flex items-center gap-1 ${\n                activeView === 'queue'\n                  ? (isTransparent ? 'bg-dark-tertiary text-text-primary border border-dark-border' : 'bg-slate-700 text-slate-200')\n                  : (isTransparent ? 'text-text-secondary hover:text-text-primary hover:bg-dark-hover' : 'text-slate-400 hover:text-slate-200 hover:bg-slate-800')\n              }`}\n            >\n              <QueueListIcon className=\"w-4 h-4\" />\n              Queue\n              {globalQueue.length > 0 && (\n                <span className=\"bg-orange-500 text-white text-xs rounded-full px-1.5 py-0.5 min-w-[18px] text-center\">\n                  {globalQueue.length}\n                </span>\n              )}\n            </button>\n            <button\n              onClick={() => setActiveView('stations')}\n              className={`px-3 py-1.5 rounded text-sm font-medium transition-colors ${\n                activeView === 'stations'\n                  ? (isTransparent ? 'bg-dark-tertiary text-text-primary border border-dark-border' : 'bg-slate-700 text-slate-200')\n                  : (isTransparent ? 'text-text-secondary hover:text-text-primary hover:bg-dark-hover' : 'text-slate-400 hover:text-slate-200 hover:bg-slate-800')\n              }`}\n            >\n              Stations\n            </button>\n          </div>\n        </div>\n      </div>\n      \n      {/* Content */}\n      <div className={`${isTransparent ? 'p-4 flex-1 overflow-auto' : 'p-6'}`}>\n        <AnimatePresence mode=\"wait\">\n          {activeView === 'overview' && chargingStats && (\n            <motion.div\n              key=\"overview\"\n              initial={{ opacity: 0, y: 10 }}\n              animate={{ opacity: 1, y: 0 }}\n              exit={{ opacity: 0, y: -10 }}\n              className=\"space-y-6\"\n            >\n              {/* Stats Grid */}\n              <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-4\">\n                <div className={`${isTransparent ? 'bg-dark-tertiary border border-dark-border' : 'bg-slate-800 border border-slate-600'} rounded-lg p-4`}>\n                  <div className=\"flex items-center justify-between mb-2\">\n                    <span className={`text-sm ${isTransparent ? 'text-text-secondary' : 'text-slate-400'}`}>Available Stations</span>\n                    <CheckCircleIcon className=\"w-5 h-5 text-green-400\" />\n                  </div>\n                  <div className=\"text-2xl font-bold text-green-400\">{chargingStats.availableStations}</div>\n                  <div className={`text-xs ${isTransparent ? 'text-text-muted' : 'text-slate-500'}`}>of {chargingStats.totalStations} total</div>\n                </div>\n                \n                <div className={`${isTransparent ? 'bg-dark-tertiary border border-dark-border' : 'bg-slate-800 border border-slate-600'} rounded-lg p-4`}>\n                  <div className=\"flex items-center justify-between mb-2\">\n                    <span className={`text-sm ${isTransparent ? 'text-text-secondary' : 'text-slate-400'}`}>Queue Length</span>\n                    <QueueListIcon className=\"w-5 h-5 text-orange-400\" />\n                  </div>\n                  <div className=\"text-2xl font-bold text-orange-400\">{chargingStats.totalInQueue}</div>\n                  <div className={`text-xs ${isTransparent ? 'text-text-muted' : 'text-slate-500'}`}>drones waiting</div>\n                </div>\n                \n                <div className={`${isTransparent ? 'bg-dark-tertiary border border-dark-border' : 'bg-slate-800 border border-slate-600'} rounded-lg p-4`}>\n                  <div className=\"flex items-center justify-between mb-2\">\n                    <span className={`text-sm ${isTransparent ? 'text-text-secondary' : 'text-slate-400'}`}>Avg Wait Time</span>\n                    <ClockIcon className=\"w-5 h-5 text-blue-400\" />\n                  </div>\n                  <div className=\"text-2xl font-bold text-blue-400\">{formatTime(chargingStats.averageWaitTime)}</div>\n                  <div className={`text-xs ${isTransparent ? 'text-text-muted' : 'text-slate-500'}`}>current estimate</div>\n                </div>\n                \n                <div className={`${isTransparent ? 'bg-dark-tertiary border border-dark-border' : 'bg-slate-800 border border-slate-600'} rounded-lg p-4`}>\n                  <div className=\"flex items-center justify-between mb-2\">\n                    <span className={`text-sm ${isTransparent ? 'text-text-secondary' : 'text-slate-400'}`}>Daily Sessions</span>\n                    <BoltIcon className=\"w-5 h-5 text-yellow-400\" />\n                  </div>\n                  <div className=\"text-2xl font-bold text-yellow-400\">{chargingStats.dailyChargingSessions}</div>\n                  <div className={`text-xs ${isTransparent ? 'text-text-muted' : 'text-slate-500'}`}>completed today</div>\n                </div>\n              </div>\n              \n              {/* Quick Queue Preview */}\n              {globalQueue.length > 0 && (\n                <div>\n                  <h3 className=\"text-lg font-medium text-slate-200 mb-4\">Next in Queue</h3>\n                  <div className=\"grid gap-3\">\n                    {globalQueue.slice(0, 3).map((item, index) => (\n                      <QueueItemCard key={item.id} item={item} index={index} />\n                    ))}\n                  </div>\n                  {globalQueue.length > 3 && (\n                    <div className=\"text-center mt-3\">\n                      <button\n                        onClick={() => setActiveView('queue')}\n                        className={`text-sm hover:text-blue-300 ${isTransparent ? 'text-status-active' : 'text-blue-400'}`}\n                      >\n                        View all {globalQueue.length} items in queue \n                      </button>\n                    </div>\n                  )}\n                </div>\n              )}\n            </motion.div>\n          )}\n          \n          {activeView === 'queue' && (\n            <motion.div\n              key=\"queue\"\n              initial={{ opacity: 0, y: 10 }}\n              animate={{ opacity: 1, y: 0 }}\n              exit={{ opacity: 0, y: -10 }}\n              className=\"space-y-4\"\n            >\n              <h3 className={`text-lg font-medium ${isTransparent ? 'text-text-primary' : 'text-slate-200'}`}>\n                Charging Queue ({globalQueue.length})\n              </h3>\n              \n              {globalQueue.length === 0 ? (\n                <div className=\"text-center py-8\">\n                  <QueueListIcon className={`w-12 h-12 mx-auto mb-3 ${isTransparent ? 'text-text-muted' : 'text-slate-500'}`} />\n                  <h4 className={`text-lg font-semibold mb-2 ${isTransparent ? 'text-text-secondary' : 'text-slate-300'}`}>No Drones in Queue</h4>\n                  <p className={`${isTransparent ? 'text-text-muted' : 'text-slate-500'}`}>All drones are either charged or currently charging</p>\n                </div>\n              ) : (\n                <div className={`space-y-3 ${isTransparent ? 'max-h-64' : 'max-h-96'} overflow-y-auto`}>\n                  {globalQueue.map((item, index) => (\n                    <QueueItemCard key={item.id} item={item} index={index} />\n                  ))}\n                </div>\n              )}\n            </motion.div>\n          )}\n          \n          {activeView === 'stations' && (\n            <motion.div\n              key=\"stations\"\n              initial={{ opacity: 0, y: 10 }}\n              animate={{ opacity: 1, y: 0 }}\n              exit={{ opacity: 0, y: -10 }}\n              className=\"space-y-4\"\n            >\n              <h3 className={`text-lg font-medium ${isTransparent ? 'text-text-primary' : 'text-slate-200'}`}>\n                Charging Stations ({chargingStations.length})\n              </h3>\n              \n              <div className=\"grid gap-4 lg:grid-cols-2\">\n                {chargingStations.map((station, index) => (\n                  <StationCard key={station.id} station={station} index={index} />\n                ))}\n              </div>\n            </motion.div>\n          )}\n        </AnimatePresence>\n      </div>\n    </div>\n  );\n};\n\nexport default ChargingPanel;","import React, { useState, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport {\n  ShieldCheckIcon,\n  ShieldExclamationIcon,\n  ExclamationTriangleIcon,\n  BoltIcon,\n  ClockIcon,\n  CheckCircleIcon,\n  XCircleIcon,\n  BellIcon,\n  ArrowPathIcon\n} from '@heroicons/react/24/outline';\nimport { useFleetStore } from '@/store/fleet';\nimport EmergencyPanel from '../EmergencyPanel';\nimport CoordinationPanel from '../../coordination/CoordinationPanel';\nimport ChargingPanel from '../../charging/ChargingPanel';\n\ninterface SafetyAlert {\n  id: string;\n  droneId?: string;\n  severity: 'info' | 'warning' | 'critical';\n  type: string;\n  message: string;\n  category: string;\n  timestamp: string;\n  data?: any;\n  resolved: boolean;\n  acknowledged: boolean;\n}\n\ninterface SafetyStatus {\n  overall: 'safe' | 'caution' | 'warning' | 'critical';\n  lastCheck: number;\n  criticalAlerts: number;\n  warningAlerts: number;\n  activeDrones: number;\n  dronesAtRisk: number;\n  totalAlerts: number;\n}\n\ninterface SafetyPanelProps {\n  className?: string;\n}\n\nconst SafetyPanel: React.FC<SafetyPanelProps> = ({ className = '' }) => {\n  const drones = useFleetStore((state) => Object.values(state.drones));\n  const [safetyStatus, setSafetyStatus] = useState<SafetyStatus>({\n    overall: 'safe',\n    lastCheck: Date.now(),\n    criticalAlerts: 0,\n    warningAlerts: 0,\n    activeDrones: 0,\n    dronesAtRisk: 0,\n    totalAlerts: 0\n  });\n\n  const [alerts, setAlerts] = useState<SafetyAlert[]>([]);\n  const [isConnected, setIsConnected] = useState(false);\n  const [showAllAlerts, setShowAllAlerts] = useState(false);\n  const [activeTab, setActiveTab] = useState<'overview' | 'emergencies' | 'coordination' | 'charging'>('overview');\n\n  useEffect(() => {\n    // Initialize safety WebSocket connection\n    const initSafetyConnection = () => {\n      try {\n        const ws = new WebSocket('ws://localhost:3005/safety-ws');\n        \n        ws.onopen = () => {\n          console.log('Safety WebSocket connected');\n          setIsConnected(true);\n          \n          // Subscribe to safety alerts\n          ws.send(JSON.stringify({\n            type: 'subscribe',\n            channels: ['battery_alerts', 'safety_alerts', 'emergency_alerts', 'all_alerts']\n          }));\n          \n          // Request current alerts\n          ws.send(JSON.stringify({\n            type: 'get_alerts'\n          }));\n        };\n        \n        ws.onmessage = (event) => {\n          try {\n            const message = JSON.parse(event.data);\n            handleSafetyMessage(message);\n          } catch (error) {\n            console.error('Failed to parse safety message:', error);\n          }\n        };\n        \n        ws.onclose = () => {\n          console.log('Safety WebSocket disconnected');\n          setIsConnected(false);\n          // Attempt to reconnect after 5 seconds\n          setTimeout(initSafetyConnection, 5000);\n        };\n        \n        ws.onerror = (error) => {\n          console.error('Safety WebSocket error:', error);\n          setIsConnected(false);\n        };\n        \n        return ws;\n      } catch (error) {\n        console.error('Failed to initialize safety connection:', error);\n        setIsConnected(false);\n        return null;\n      }\n    };\n\n    const ws = initSafetyConnection();\n    return () => {\n      if (ws) {\n        ws.close();\n      }\n    };\n  }, []);\n\n  const handleSafetyMessage = (message: any) => {\n    switch (message.type) {\n      case 'battery_alert':\n      case 'safety_alert':\n      case 'emergency_alert':\n        // Add new alert to the list\n        setAlerts(prev => [message.data, ...prev.slice(0, 19)]); // Keep last 20 alerts\n        break;\n        \n      case 'system_safety_status':\n        setSafetyStatus(message.data.status);\n        break;\n        \n      case 'alerts_data':\n        setAlerts(message.data.alerts || []);\n        break;\n        \n      case 'alert_resolved':\n        // Remove resolved alert\n        setAlerts(prev => prev.filter(alert => alert.id !== message.data.alertId));\n        break;\n    }\n  };\n\n  const getSafetyStatusColor = (status: string) => {\n    switch (status) {\n      case 'safe':\n        return 'text-green-400 bg-green-900/20';\n      case 'caution':\n        return 'text-yellow-400 bg-yellow-900/20';\n      case 'warning':\n        return 'text-orange-400 bg-orange-900/20';\n      case 'critical':\n        return 'text-red-400 bg-red-900/20';\n      default:\n        return 'text-gray-400 bg-gray-900/20';\n    }\n  };\n\n  const getSafetyIcon = (status: string) => {\n    switch (status) {\n      case 'safe':\n        return <ShieldCheckIcon className=\"w-5 h-5\" />;\n      case 'caution':\n      case 'warning':\n        return <ShieldExclamationIcon className=\"w-5 h-5\" />;\n      case 'critical':\n        return <ExclamationTriangleIcon className=\"w-5 h-5\" />;\n      default:\n        return <ShieldCheckIcon className=\"w-5 h-5\" />;\n    }\n  };\n\n  const getAlertIcon = (alert: SafetyAlert) => {\n    if (alert.type === 'battery') {\n      return <BoltIcon className=\"w-4 h-4\" />;\n    }\n    \n    switch (alert.severity) {\n      case 'critical':\n        return <ExclamationTriangleIcon className=\"w-4 h-4\" />;\n      case 'warning':\n        return <ShieldExclamationIcon className=\"w-4 h-4\" />;\n      default:\n        return <BellIcon className=\"w-4 h-4\" />;\n    }\n  };\n\n  const getAlertSeverityColor = (severity: string) => {\n    switch (severity) {\n      case 'critical':\n        return 'text-red-400 bg-red-900/20 border-red-500/30';\n      case 'warning':\n        return 'text-orange-400 bg-orange-900/20 border-orange-500/30';\n      case 'info':\n        return 'text-blue-400 bg-blue-900/20 border-blue-500/30';\n      default:\n        return 'text-gray-400 bg-gray-900/20 border-gray-500/30';\n    }\n  };\n\n  const formatTimestamp = (timestamp: string) => {\n    const date = new Date(timestamp);\n    const now = new Date();\n    const diff = now.getTime() - date.getTime();\n    \n    if (diff < 60000) {\n      return 'Just now';\n    } else if (diff < 3600000) {\n      return `${Math.floor(diff / 60000)}m ago`;\n    } else if (diff < 86400000) {\n      return `${Math.floor(diff / 3600000)}h ago`;\n    } else {\n      return date.toLocaleDateString();\n    }\n  };\n\n  const acknowledgeAlert = async (alertId: string) => {\n    try {\n      // In a real implementation, this would call the API\n      console.log(`Acknowledging alert: ${alertId}`);\n      \n      // Update local state\n      setAlerts(prev => \n        prev.map(alert => \n          alert.id === alertId \n            ? { ...alert, acknowledged: true }\n            : alert\n        )\n      );\n    } catch (error) {\n      console.error('Failed to acknowledge alert:', error);\n    }\n  };\n\n  const resolveAlert = async (alertId: string) => {\n    try {\n      // In a real implementation, this would call the API\n      console.log(`Resolving alert: ${alertId}`);\n      \n      // Remove from local state\n      setAlerts(prev => prev.filter(alert => alert.id !== alertId));\n    } catch (error) {\n      console.error('Failed to resolve alert:', error);\n    }\n  };\n\n  const visibleAlerts = showAllAlerts ? alerts : alerts.slice(0, 5);\n\n  return (\n    <div className={`bg-dark-secondary rounded-lg border border-dark-border flex flex-col h-full max-h-full overflow-hidden ${className}`}>\n      {/* Header */}\n      <div className=\"p-4 border-b border-dark-border flex-shrink-0\">\n        <div className=\"flex items-center justify-between mb-3\">\n          <h3 className=\"text-lg font-semibold text-text-primary\">Safety Monitor</h3>\n          <div className=\"flex items-center gap-2\">\n            <div className={`w-2 h-2 rounded-full ${isConnected ? 'bg-green-400' : 'bg-red-400'}`} />\n            <span className=\"text-xs text-text-secondary\">\n              {isConnected ? 'Connected' : 'Disconnected'}\n            </span>\n          </div>\n        </div>\n\n        {/* Tab Navigation */}\n        <div className=\"flex flex-wrap gap-1 mb-3 min-w-0\">\n          <button\n            onClick={() => setActiveTab('overview')}\n            className={`px-2 py-1.5 rounded text-xs font-medium transition-colors flex-shrink-0 ${\n              activeTab === 'overview'\n                ? 'bg-dark-tertiary text-text-primary border border-dark-border'\n                : 'text-text-secondary hover:text-text-primary hover:bg-dark-hover'\n            }`}\n          >\n            Overview\n          </button>\n          <button\n            onClick={() => setActiveTab('emergencies')}\n            className={`px-2 py-1.5 rounded text-xs font-medium transition-colors flex items-center gap-1 flex-shrink-0 ${\n              activeTab === 'emergencies'\n                ? 'bg-dark-tertiary text-text-primary border border-dark-border'\n                : 'text-text-secondary hover:text-text-primary hover:bg-dark-hover'\n            }`}\n          >\n            <ShieldExclamationIcon className=\"w-3 h-3\" />\n            Emergency\n            {drones.some(d => d.emergencyState && !d.emergencyState.resolved) && (\n              <span className=\"bg-red-500 text-white text-xs rounded-full px-1.5 py-0.5 min-w-[18px] text-center\">\n                {drones.filter(d => d.emergencyState && !d.emergencyState.resolved).length}\n              </span>\n            )}\n          </button>\n          <button\n            onClick={() => setActiveTab('coordination')}\n            className={`px-2 py-1.5 rounded text-xs font-medium transition-colors flex items-center gap-1 flex-shrink-0 ${\n              activeTab === 'coordination'\n                ? 'bg-dark-tertiary text-text-primary border border-dark-border'\n                : 'text-text-secondary hover:text-text-primary hover:bg-dark-hover'\n            }`}\n          >\n            <ArrowPathIcon className=\"w-3 h-3\" />\n            Coord\n          </button>\n          <button\n            onClick={() => setActiveTab('charging')}\n            className={`px-2 py-1.5 rounded text-xs font-medium transition-colors flex items-center gap-1 flex-shrink-0 ${\n              activeTab === 'charging'\n                ? 'bg-dark-tertiary text-text-primary border border-dark-border'\n                : 'text-text-secondary hover:text-text-primary hover:bg-dark-hover'\n            }`}\n          >\n            <BoltIcon className=\"w-3 h-3\" />\n            Charge\n            {drones.filter(d => d.status === 'charging').length > 0 && (\n              <span className=\"bg-yellow-500 text-white text-xs rounded-full px-1.5 py-0.5 min-w-[18px] text-center\">\n                {drones.filter(d => d.status === 'charging').length}\n              </span>\n            )}\n          </button>\n        </div>\n\n        {/* Overall Safety Status */}\n        <div className={`flex items-center gap-3 p-3 rounded-lg border ${getSafetyStatusColor(safetyStatus.overall)}`}>\n          {getSafetyIcon(safetyStatus.overall)}\n          <div className=\"flex-1\">\n            <div className=\"font-medium capitalize\">\n              System Status: {safetyStatus.overall}\n            </div>\n            <div className=\"text-sm opacity-80\">\n              {safetyStatus.dronesAtRisk > 0 \n                ? `${safetyStatus.dronesAtRisk} drone${safetyStatus.dronesAtRisk > 1 ? 's' : ''} at risk`\n                : 'All drones operating safely'\n              }\n            </div>\n          </div>\n          <div className=\"text-right text-sm\">\n            <div>{safetyStatus.totalAlerts} alerts</div>\n            <div className=\"opacity-70\">\n              {safetyStatus.criticalAlerts} critical\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Safety Metrics */}\n      <div className=\"p-4 border-b border-dark-border flex-shrink-0\">\n        <div className=\"grid grid-cols-2 gap-4\">\n          <div className=\"bg-dark-tertiary rounded-lg p-3\">\n            <div className=\"text-2xl font-bold text-text-primary\">\n              {safetyStatus.activeDrones}\n            </div>\n            <div className=\"text-sm text-text-secondary\">Active Drones</div>\n          </div>\n          <div className=\"bg-dark-tertiary rounded-lg p-3\">\n            <div className=\"text-2xl font-bold text-red-400\">\n              {safetyStatus.criticalAlerts}\n            </div>\n            <div className=\"text-sm text-text-secondary\">Critical Alerts</div>\n          </div>\n        </div>\n      </div>\n\n      {/* Content based on active tab */}\n      <div className=\"flex-1 min-h-0 overflow-auto\">\n        {activeTab === 'overview' ? (\n          /* Recent Alerts */\n          <div className=\"flex flex-col min-h-full\">\n        <div className=\"flex items-center justify-between p-4 pb-2 flex-shrink-0\">\n          <h4 className=\"font-medium text-text-primary\">Recent Alerts</h4>\n          {alerts.length > 5 && (\n            <button\n              onClick={() => setShowAllAlerts(!showAllAlerts)}\n              className=\"text-xs text-status-active hover:text-status-active/80 transition-colors\"\n            >\n              {showAllAlerts ? 'Show Less' : `Show All (${alerts.length})`}\n            </button>\n          )}\n        </div>\n\n        <div className=\"flex-1 px-4 pb-4 space-y-2 overflow-y-auto\">\n          <AnimatePresence>\n            {visibleAlerts.length > 0 ? (\n              visibleAlerts.map((alert) => (\n                <motion.div\n                  key={alert.id}\n                  initial={{ opacity: 0, y: -20 }}\n                  animate={{ opacity: 1, y: 0 }}\n                  exit={{ opacity: 0, x: -100 }}\n                  className={`p-3 rounded-lg border ${getAlertSeverityColor(alert.severity)}`}\n                >\n                  <div className=\"flex items-start gap-2\">\n                    {getAlertIcon(alert)}\n                    <div className=\"flex-1 min-w-0\">\n                      <div className=\"flex items-center gap-2 mb-1\">\n                        <span className=\"text-xs font-medium uppercase tracking-wide\">\n                          {alert.type.replace('_', ' ')}\n                        </span>\n                        {alert.droneId && (\n                          <span className=\"text-xs text-text-secondary\">\n                            {alert.droneId}\n                          </span>\n                        )}\n                        <span className=\"text-xs text-text-secondary ml-auto\">\n                          {formatTimestamp(alert.timestamp)}\n                        </span>\n                      </div>\n                      <div className=\"text-sm text-text-primary mb-2\">\n                        {alert.message}\n                      </div>\n                      \n                      {/* Battery-specific data */}\n                      {alert.type === 'battery' && alert.data && (\n                        <div className=\"text-xs text-text-secondary mb-2\">\n                          Battery: {alert.data.batteryLevel}% \n                          {alert.data.batteryVoltage && ` (${alert.data.batteryVoltage}V)`}\n                        </div>\n                      )}\n                      \n                      {/* Action buttons */}\n                      <div className=\"flex items-center gap-2\">\n                        {!alert.acknowledged && (\n                          <button\n                            onClick={() => acknowledgeAlert(alert.id)}\n                            className=\"flex items-center gap-1 text-xs text-status-active hover:text-status-active/80 transition-colors\"\n                          >\n                            <CheckCircleIcon className=\"w-3 h-3\" />\n                            Acknowledge\n                          </button>\n                        )}\n                        {alert.acknowledged && !alert.resolved && (\n                          <button\n                            onClick={() => resolveAlert(alert.id)}\n                            className=\"flex items-center gap-1 text-xs text-green-400 hover:text-green-300 transition-colors\"\n                          >\n                            <XCircleIcon className=\"w-3 h-3\" />\n                            Resolve\n                          </button>\n                        )}\n                        {alert.acknowledged && (\n                          <span className=\"flex items-center gap-1 text-xs text-green-400\">\n                            <CheckCircleIcon className=\"w-3 h-3\" />\n                            Acknowledged\n                          </span>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n                </motion.div>\n              ))\n            ) : (\n              <div className=\"text-center py-8 text-text-secondary\">\n                <ShieldCheckIcon className=\"w-12 h-12 mx-auto mb-3 opacity-50\" />\n                <div className=\"text-sm\">No active safety alerts</div>\n                <div className=\"text-xs opacity-70 mt-1\">All systems operating normally</div>\n              </div>\n            )}\n          </AnimatePresence>\n        </div>\n          </div>\n        ) : activeTab === 'emergencies' ? (\n          /* Emergency Panel */\n          <div className=\"h-full overflow-auto\">\n            <EmergencyPanel drones={drones} className=\"h-full border-0 bg-transparent\" />\n          </div>\n        ) : activeTab === 'coordination' ? (\n          /* Coordination Panel */\n          <div className=\"h-full overflow-auto\">\n            <CoordinationPanel className=\"h-full border-0 bg-transparent\" />\n          </div>\n        ) : (\n          /* Charging Panel */\n          <div className=\"h-full overflow-auto\">\n            <ChargingPanel className=\"h-full border-0 bg-transparent\" />\n          </div>\n        )}\n      </div>\n\n      {/* Last Update */}\n      <div className=\"px-4 py-2 border-t border-dark-border flex-shrink-0\">\n        <div className=\"flex items-center gap-1 text-xs text-text-secondary\">\n          <ClockIcon className=\"w-3 h-3\" />\n          Last update: {formatTimestamp(new Date(safetyStatus.lastCheck).toISOString())}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default SafetyPanel;","import React, { useState, useRef, useCallback, useEffect } from 'react';\n\ninterface ResizablePanelProps {\n  children: React.ReactNode;\n  minHeight?: number;\n  maxHeight?: number;\n  initialHeight?: number;\n  onHeightChange?: (height: number) => void;\n  className?: string;\n  disabled?: boolean;\n}\n\nconst ResizablePanel: React.FC<ResizablePanelProps> = ({\n  children,\n  minHeight = 200,\n  maxHeight = 800,\n  initialHeight = 400,\n  onHeightChange,\n  className = '',\n  disabled = false\n}) => {\n  const [height, setHeight] = useState(initialHeight);\n  const [isResizing, setIsResizing] = useState(false);\n  const [showHint, setShowHint] = useState(false);\n  const panelRef = useRef<HTMLDivElement>(null);\n  const startY = useRef<number>(0);\n  const startHeight = useRef<number>(0);\n\n  const handleMouseDown = useCallback((e: React.MouseEvent) => {\n    if (disabled) return;\n    \n    e.preventDefault();\n    setIsResizing(true);\n    startY.current = e.clientY;\n    startHeight.current = height;\n    \n    document.body.style.cursor = 'ns-resize';\n    document.body.style.userSelect = 'none';\n  }, [height, disabled]);\n\n  const handleMouseMove = useCallback((e: MouseEvent) => {\n    if (!isResizing) return;\n\n    const deltaY = e.clientY - startY.current;\n    const newHeight = Math.min(\n      Math.max(startHeight.current + deltaY, minHeight),\n      maxHeight\n    );\n    \n    setHeight(newHeight);\n    onHeightChange?.(newHeight);\n  }, [isResizing, minHeight, maxHeight, onHeightChange]);\n\n  const handleMouseUp = useCallback(() => {\n    if (!isResizing) return;\n    \n    setIsResizing(false);\n    document.body.style.cursor = '';\n    document.body.style.userSelect = '';\n  }, [isResizing]);\n\n  const handleKeyDown = useCallback((e: React.KeyboardEvent) => {\n    if (disabled) return;\n    \n    const step = e.shiftKey ? 50 : 10;\n    let newHeight = height;\n    \n    if (e.key === 'ArrowUp') {\n      e.preventDefault();\n      newHeight = Math.max(height - step, minHeight);\n    } else if (e.key === 'ArrowDown') {\n      e.preventDefault();\n      newHeight = Math.min(height + step, maxHeight);\n    } else if (e.key === 'Home') {\n      e.preventDefault();\n      newHeight = minHeight;\n    } else if (e.key === 'End') {\n      e.preventDefault();\n      newHeight = maxHeight;\n    }\n    \n    if (newHeight !== height) {\n      setHeight(newHeight);\n      onHeightChange?.(newHeight);\n    }\n  }, [height, minHeight, maxHeight, disabled, onHeightChange]);\n\n  useEffect(() => {\n    if (isResizing) {\n      document.addEventListener('mousemove', handleMouseMove);\n      document.addEventListener('mouseup', handleMouseUp);\n      \n      return () => {\n        document.removeEventListener('mousemove', handleMouseMove);\n        document.removeEventListener('mouseup', handleMouseUp);\n      };\n    }\n  }, [isResizing, handleMouseMove, handleMouseUp]);\n\n  // Show resize hint on first mount\n  useEffect(() => {\n    const timer = setTimeout(() => setShowHint(true), 1000);\n    const hideTimer = setTimeout(() => setShowHint(false), 4000);\n    return () => {\n      clearTimeout(timer);\n      clearTimeout(hideTimer);\n    };\n  }, []);\n\n  return (\n    <div \n      ref={panelRef}\n      className={`relative border border-dark-border rounded-lg bg-dark-secondary overflow-hidden ${className}`}\n      style={{ height: `${height}px` }}\n    >\n      {/* Panel Content */}\n      <div className=\"h-full w-full\">\n        {children}\n      </div>\n      \n      {/* Resize Handle */}\n      {!disabled && (\n        <div\n          className={`\n            absolute bottom-0 left-0 right-0 h-3 cursor-ns-resize\n            hover:bg-status-active/20 transition-all duration-200\n            ${isResizing ? 'bg-status-active/30' : showHint ? 'bg-status-active/10' : 'bg-transparent hover:bg-dark-hover/50'}\n            group flex items-center justify-center focus:outline-none focus:ring-2 focus:ring-status-active/50\n          `}\n          onMouseDown={handleMouseDown}\n          onKeyDown={handleKeyDown}\n          tabIndex={0}\n          role=\"separator\"\n          aria-orientation=\"horizontal\"\n          aria-label={`Resize panel. Current height: ${height}px. Range: ${minHeight}px to ${maxHeight}px. Use arrow keys to adjust, Shift+arrows for larger steps.`}\n          title={`Drag to resize panel (${minHeight}px - ${maxHeight}px). Keyboard:  arrows, Shift+arrows for 50px steps, Home/End for min/max`}\n        >\n          {/* Drag Handle Bar */}\n          <div className={`\n            h-1 rounded-full transition-all duration-200 relative\n            ${isResizing \n              ? 'w-16 bg-status-active shadow-lg' \n              : 'w-12 bg-text-muted/40 group-hover:bg-status-active/70 group-hover:w-16'\n            }\n          `}>\n            {/* Animated dots for better visual feedback */}\n            <div className={`\n              absolute inset-0 flex items-center justify-center gap-0.5 transition-opacity\n              ${isResizing ? 'opacity-0' : 'opacity-100 group-hover:opacity-0'}\n            `}>\n              {[0, 1, 2].map((dot) => (\n                <div\n                  key={dot}\n                  className=\"w-0.5 h-0.5 bg-current rounded-full\"\n                />\n              ))}\n            </div>\n          </div>\n          \n          {/* Resize Indicator Text */}\n          {isResizing && (\n            <div className=\"absolute -top-8 left-1/2 transform -translate-x-1/2 \n                          bg-dark-tertiary text-text-primary text-xs px-2 py-1 rounded \n                          border border-dark-border shadow-lg whitespace-nowrap\">\n              {height}px\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default ResizablePanel;","import React, { useState } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport {\n  PlusIcon,\n  MapPinIcon,\n  TrashIcon,\n  PencilIcon,\n  CheckIcon,\n  XMarkIcon,\n  ChevronUpIcon,\n  ChevronDownIcon\n} from '@heroicons/react/24/outline';\nimport { Waypoint, Position } from '@/types/fleet';\n\ninterface WaypointManagerProps {\n  waypoints: Waypoint[];\n  onWaypointsChange: (waypoints: Waypoint[]) => void;\n  disabled?: boolean;\n  className?: string;\n}\n\ninterface WaypointFormData {\n  position: Position;\n  action: Waypoint['action'];\n  hoverTime?: number;\n  notes?: string;\n}\n\nconst WaypointManager: React.FC<WaypointManagerProps> = ({\n  waypoints,\n  onWaypointsChange,\n  disabled = false,\n  className = ''\n}) => {\n  const [editingIndex, setEditingIndex] = useState<number | null>(null);\n  const [showAddForm, setShowAddForm] = useState(false);\n  const [formData, setFormData] = useState<WaypointFormData>({\n    position: { lat: 37.7749, lng: -122.4194, alt: 50 },\n    action: 'navigation',\n    hoverTime: 0,\n    notes: ''\n  });\n\n  // Action options with icons and descriptions\n  const actionOptions = [\n    { value: 'navigation', label: 'Navigate', icon: '', description: 'Fly to location' },\n    { value: 'pickup', label: 'Pickup', icon: '', description: 'Pickup item' },\n    { value: 'delivery', label: 'Delivery', icon: '', description: 'Deliver item' },\n    { value: 'hover', label: 'Hover', icon: '', description: 'Hover in place' },\n    { value: 'survey', label: 'Survey', icon: '', description: 'Survey area' },\n    { value: 'landing', label: 'Land', icon: '', description: 'Land drone' },\n    { value: 'takeoff', label: 'Takeoff', icon: '', description: 'Takeoff drone' }\n  ];\n\n  const resetForm = () => {\n    setFormData({\n      position: { lat: 37.7749, lng: -122.4194, alt: 50 },\n      action: 'navigation',\n      hoverTime: 0,\n      notes: ''\n    });\n  };\n\n  const handleAddWaypoint = () => {\n    if (!formData.position.lat || !formData.position.lng) return;\n\n    const newWaypoint: Waypoint = {\n      id: `waypoint-${Date.now()}`,\n      position: formData.position,\n      action: formData.action,\n      hoverTime: formData.hoverTime || 0,\n      notes: formData.notes || '',\n      completed: false\n    };\n\n    onWaypointsChange([...waypoints, newWaypoint]);\n    resetForm();\n    setShowAddForm(false);\n  };\n\n  const handleEditWaypoint = (index: number) => {\n    const waypoint = waypoints[index];\n    setFormData({\n      position: waypoint.position,\n      action: waypoint.action,\n      hoverTime: waypoint.hoverTime,\n      notes: waypoint.notes\n    });\n    setEditingIndex(index);\n  };\n\n  const handleSaveEdit = () => {\n    if (editingIndex === null) return;\n\n    const updatedWaypoints = [...waypoints];\n    updatedWaypoints[editingIndex] = {\n      ...updatedWaypoints[editingIndex],\n      position: formData.position,\n      action: formData.action,\n      hoverTime: formData.hoverTime || 0,\n      notes: formData.notes || ''\n    };\n\n    onWaypointsChange(updatedWaypoints);\n    setEditingIndex(null);\n    resetForm();\n  };\n\n  const handleCancelEdit = () => {\n    setEditingIndex(null);\n    setShowAddForm(false);\n    resetForm();\n  };\n\n  const handleDeleteWaypoint = (index: number) => {\n    const updatedWaypoints = waypoints.filter((_, i) => i !== index);\n    onWaypointsChange(updatedWaypoints);\n  };\n\n  const handleMoveWaypoint = (index: number, direction: 'up' | 'down') => {\n    if (direction === 'up' && index === 0) return;\n    if (direction === 'down' && index === waypoints.length - 1) return;\n\n    const updatedWaypoints = [...waypoints];\n    const newIndex = direction === 'up' ? index - 1 : index + 1;\n    \n    [updatedWaypoints[index], updatedWaypoints[newIndex]] = \n    [updatedWaypoints[newIndex], updatedWaypoints[index]];\n\n    onWaypointsChange(updatedWaypoints);\n  };\n\n  const getActionOption = (action: string) => {\n    return actionOptions.find(opt => opt.value === action) || actionOptions[0];\n  };\n\n  const calculateDistance = (pos1: Position, pos2: Position) => {\n    const R = 6371000; // Earth's radius in meters\n    const lat1Rad = pos1.lat * Math.PI / 180;\n    const lat2Rad = pos2.lat * Math.PI / 180;\n    const deltaLat = (pos2.lat - pos1.lat) * Math.PI / 180;\n    const deltaLng = (pos2.lng - pos1.lng) * Math.PI / 180;\n\n    const a = Math.sin(deltaLat / 2) * Math.sin(deltaLat / 2) +\n              Math.cos(lat1Rad) * Math.cos(lat2Rad) *\n              Math.sin(deltaLng / 2) * Math.sin(deltaLng / 2);\n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n\n    return Math.round(R * c);\n  };\n\n  return (\n    <div className={`space-y-4 ${className}`}>\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h3 className=\"text-lg font-semibold text-text-primary\">Waypoints</h3>\n          <p className=\"text-sm text-text-secondary\">\n            {waypoints.length} waypoint{waypoints.length !== 1 ? 's' : ''}\n            {waypoints.length > 1 && (\n              <span className=\"ml-2\">\n                Total distance: ~{waypoints.reduce((total, waypoint, index) => {\n                  if (index === 0) return total;\n                  return total + calculateDistance(waypoints[index - 1].position, waypoint.position);\n                }, 0)}m\n              </span>\n            )}\n          </p>\n        </div>\n        \n        {!disabled && (\n          <button\n            onClick={() => setShowAddForm(true)}\n            disabled={showAddForm || editingIndex !== null}\n            className=\"flex items-center gap-2 px-3 py-2 bg-status-active hover:bg-status-active/80 \n                     text-white rounded-lg text-sm font-medium transition-colors\n                     disabled:opacity-50 disabled:cursor-not-allowed\"\n          >\n            <PlusIcon className=\"w-4 h-4\" />\n            Add Waypoint\n          </button>\n        )}\n      </div>\n\n      {/* Waypoint List */}\n      <div className=\"space-y-3\">\n        <AnimatePresence>\n          {waypoints.map((waypoint, index) => (\n            <motion.div\n              key={waypoint.id || index}\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              exit={{ opacity: 0, y: -20 }}\n              className=\"bg-dark-tertiary rounded-lg border border-dark-border\"\n            >\n              {editingIndex === index ? (\n                // Edit Form\n                <div className=\"p-4 space-y-4\">\n                  <WaypointForm\n                    data={formData}\n                    onChange={setFormData}\n                    actionOptions={actionOptions}\n                  />\n                  \n                  <div className=\"flex justify-end gap-2\">\n                    <button\n                      onClick={handleCancelEdit}\n                      className=\"flex items-center gap-1 px-3 py-2 text-text-secondary hover:text-text-primary \n                               transition-colors text-sm\"\n                    >\n                      <XMarkIcon className=\"w-4 h-4\" />\n                      Cancel\n                    </button>\n                    <button\n                      onClick={handleSaveEdit}\n                      className=\"flex items-center gap-1 px-3 py-2 bg-status-active hover:bg-status-active/80 \n                               text-white rounded transition-colors text-sm\"\n                    >\n                      <CheckIcon className=\"w-4 h-4\" />\n                      Save\n                    </button>\n                  </div>\n                </div>\n              ) : (\n                // Display View\n                <div className=\"p-4\">\n                  <div className=\"flex items-start justify-between\">\n                    <div className=\"flex-1\">\n                      <div className=\"flex items-center gap-3 mb-2\">\n                        <span className=\"text-lg\">{getActionOption(waypoint.action).icon}</span>\n                        <div>\n                          <h4 className=\"font-medium text-text-primary\">\n                            {index + 1}. {getActionOption(waypoint.action).label}\n                          </h4>\n                          <p className=\"text-sm text-text-secondary\">\n                            {getActionOption(waypoint.action).description}\n                          </p>\n                        </div>\n                        {waypoint.completed && (\n                          <span className=\"px-2 py-1 bg-status-operational/20 text-status-operational \n                                         text-xs font-medium rounded-full\">\n                             Completed\n                          </span>\n                        )}\n                      </div>\n                      \n                      <div className=\"grid grid-cols-2 gap-4 text-sm\">\n                        <div>\n                          <span className=\"text-text-secondary\">Position:</span>\n                          <div className=\"font-mono text-text-primary\">\n                            {waypoint.position.lat.toFixed(6)}, {waypoint.position.lng.toFixed(6)}\n                          </div>\n                          <div className=\"font-mono text-text-secondary\">\n                            Alt: {waypoint.position.alt}m\n                          </div>\n                        </div>\n                        \n                        <div>\n                          {waypoint.action === 'hover' && waypoint.hoverTime && (\n                            <div>\n                              <span className=\"text-text-secondary\">Hover Time:</span>\n                              <div className=\"text-text-primary\">{waypoint.hoverTime}s</div>\n                            </div>\n                          )}\n                          {index > 0 && (\n                            <div>\n                              <span className=\"text-text-secondary\">Distance:</span>\n                              <div className=\"text-text-primary\">\n                                ~{calculateDistance(waypoints[index - 1].position, waypoint.position)}m\n                              </div>\n                            </div>\n                          )}\n                        </div>\n                      </div>\n                      \n                      {waypoint.notes && (\n                        <div className=\"mt-2 p-2 bg-dark-hover rounded text-sm\">\n                          <span className=\"text-text-secondary\">Notes:</span>\n                          <div className=\"text-text-primary mt-1\">{waypoint.notes}</div>\n                        </div>\n                      )}\n                    </div>\n\n                    {!disabled && !waypoint.completed && (\n                      <div className=\"flex items-center gap-1 ml-4\">\n                        {/* Move buttons */}\n                        <button\n                          onClick={() => handleMoveWaypoint(index, 'up')}\n                          disabled={index === 0}\n                          className=\"p-1 text-text-secondary hover:text-text-primary transition-colors\n                                   disabled:opacity-30 disabled:cursor-not-allowed\"\n                          title=\"Move up\"\n                        >\n                          <ChevronUpIcon className=\"w-4 h-4\" />\n                        </button>\n                        <button\n                          onClick={() => handleMoveWaypoint(index, 'down')}\n                          disabled={index === waypoints.length - 1}\n                          className=\"p-1 text-text-secondary hover:text-text-primary transition-colors\n                                   disabled:opacity-30 disabled:cursor-not-allowed\"\n                          title=\"Move down\"\n                        >\n                          <ChevronDownIcon className=\"w-4 h-4\" />\n                        </button>\n                        \n                        {/* Edit button */}\n                        <button\n                          onClick={() => handleEditWaypoint(index)}\n                          disabled={editingIndex !== null || showAddForm}\n                          className=\"p-1 text-text-secondary hover:text-status-warning transition-colors\n                                   disabled:opacity-30 disabled:cursor-not-allowed\"\n                          title=\"Edit waypoint\"\n                        >\n                          <PencilIcon className=\"w-4 h-4\" />\n                        </button>\n                        \n                        {/* Delete button */}\n                        <button\n                          onClick={() => handleDeleteWaypoint(index)}\n                          disabled={editingIndex !== null || showAddForm}\n                          className=\"p-1 text-text-secondary hover:text-status-critical transition-colors\n                                   disabled:opacity-30 disabled:cursor-not-allowed\"\n                          title=\"Delete waypoint\"\n                        >\n                          <TrashIcon className=\"w-4 h-4\" />\n                        </button>\n                      </div>\n                    )}\n                  </div>\n                </div>\n              )}\n            </motion.div>\n          ))}\n        </AnimatePresence>\n\n        {/* Add Waypoint Form */}\n        <AnimatePresence>\n          {showAddForm && (\n            <motion.div\n              initial={{ opacity: 0, height: 0 }}\n              animate={{ opacity: 1, height: 'auto' }}\n              exit={{ opacity: 0, height: 0 }}\n              className=\"bg-dark-tertiary rounded-lg border border-dark-border p-4\"\n            >\n              <h4 className=\"text-text-primary font-medium mb-4 flex items-center gap-2\">\n                <MapPinIcon className=\"w-5 h-5\" />\n                Add New Waypoint\n              </h4>\n              \n              <div className=\"space-y-4\">\n                <WaypointForm\n                  data={formData}\n                  onChange={setFormData}\n                  actionOptions={actionOptions}\n                />\n                \n                <div className=\"flex justify-end gap-2\">\n                  <button\n                    onClick={handleCancelEdit}\n                    className=\"flex items-center gap-1 px-3 py-2 text-text-secondary hover:text-text-primary \n                             transition-colors text-sm\"\n                  >\n                    <XMarkIcon className=\"w-4 h-4\" />\n                    Cancel\n                  </button>\n                  <button\n                    onClick={handleAddWaypoint}\n                    disabled={!formData.position.lat || !formData.position.lng}\n                    className=\"flex items-center gap-1 px-3 py-2 bg-status-active hover:bg-status-active/80 \n                             text-white rounded transition-colors text-sm\n                             disabled:opacity-50 disabled:cursor-not-allowed\"\n                  >\n                    <PlusIcon className=\"w-4 h-4\" />\n                    Add Waypoint\n                  </button>\n                </div>\n              </div>\n            </motion.div>\n          )}\n        </AnimatePresence>\n      </div>\n\n      {/* Empty State */}\n      {waypoints.length === 0 && (\n        <div className=\"text-center py-8 text-text-secondary\">\n          <MapPinIcon className=\"w-12 h-12 mx-auto mb-3 opacity-50\" />\n          <h4 className=\"text-lg font-medium mb-2\">No waypoints added</h4>\n          <p className=\"text-sm mb-4\">Add waypoints to define the mission route</p>\n          {!disabled && (\n            <button\n              onClick={() => setShowAddForm(true)}\n              className=\"px-4 py-2 bg-status-active hover:bg-status-active/80 text-white rounded-lg\n                       transition-colors text-sm font-medium\"\n            >\n              Add First Waypoint\n            </button>\n          )}\n        </div>\n      )}\n    </div>\n  );\n};\n\n// Waypoint Form Component\ninterface WaypointFormProps {\n  data: WaypointFormData;\n  onChange: (data: WaypointFormData) => void;\n  actionOptions: Array<{\n    value: string;\n    label: string;\n    icon: string;\n    description: string;\n  }>;\n}\n\nconst WaypointForm: React.FC<WaypointFormProps> = ({ data, onChange, actionOptions }) => {\n  return (\n    <div className=\"space-y-4\">\n      {/* Position */}\n      <div>\n        <label className=\"block text-sm font-medium text-text-primary mb-2\">\n          Position\n        </label>\n        <div className=\"grid grid-cols-3 gap-2\">\n          <div>\n            <input\n              type=\"number\"\n              step=\"0.000001\"\n              placeholder=\"Latitude\"\n              value={data.position.lat}\n              onChange={(e) => onChange({\n                ...data,\n                position: { ...data.position, lat: parseFloat(e.target.value) || 0 }\n              })}\n              className=\"w-full px-3 py-2 bg-dark-hover border border-dark-border rounded text-sm\n                       text-text-primary focus:outline-none focus:ring-1 focus:ring-status-active\"\n            />\n            <span className=\"text-xs text-text-secondary\">Latitude</span>\n          </div>\n          <div>\n            <input\n              type=\"number\"\n              step=\"0.000001\"\n              placeholder=\"Longitude\"\n              value={data.position.lng}\n              onChange={(e) => onChange({\n                ...data,\n                position: { ...data.position, lng: parseFloat(e.target.value) || 0 }\n              })}\n              className=\"w-full px-3 py-2 bg-dark-hover border border-dark-border rounded text-sm\n                       text-text-primary focus:outline-none focus:ring-1 focus:ring-status-active\"\n            />\n            <span className=\"text-xs text-text-secondary\">Longitude</span>\n          </div>\n          <div>\n            <input\n              type=\"number\"\n              min=\"0\"\n              max=\"1000\"\n              placeholder=\"Altitude\"\n              value={data.position.alt}\n              onChange={(e) => onChange({\n                ...data,\n                position: { ...data.position, alt: parseInt(e.target.value) || 0 }\n              })}\n              className=\"w-full px-3 py-2 bg-dark-hover border border-dark-border rounded text-sm\n                       text-text-primary focus:outline-none focus:ring-1 focus:ring-status-active\"\n            />\n            <span className=\"text-xs text-text-secondary\">Altitude (m)</span>\n          </div>\n        </div>\n      </div>\n\n      {/* Action */}\n      <div>\n        <label className=\"block text-sm font-medium text-text-primary mb-2\">\n          Action\n        </label>\n        <select\n          value={data.action}\n          onChange={(e) => onChange({\n            ...data,\n            action: e.target.value as Waypoint['action']\n          })}\n          className=\"w-full px-3 py-2 bg-dark-hover border border-dark-border rounded text-sm\n                   text-text-primary focus:outline-none focus:ring-1 focus:ring-status-active\"\n        >\n          {actionOptions.map(option => (\n            <option key={option.value} value={option.value}>\n              {option.icon} {option.label} - {option.description}\n            </option>\n          ))}\n        </select>\n      </div>\n\n      {/* Hover Time (conditional) */}\n      {data.action === 'hover' && (\n        <div>\n          <label className=\"block text-sm font-medium text-text-primary mb-2\">\n            Hover Time (seconds)\n          </label>\n          <input\n            type=\"number\"\n            min=\"1\"\n            max=\"3600\"\n            value={data.hoverTime || 0}\n            onChange={(e) => onChange({\n              ...data,\n              hoverTime: parseInt(e.target.value) || 0\n            })}\n            className=\"w-full px-3 py-2 bg-dark-hover border border-dark-border rounded text-sm\n                     text-text-primary focus:outline-none focus:ring-1 focus:ring-status-active\"\n          />\n        </div>\n      )}\n\n      {/* Notes */}\n      <div>\n        <label className=\"block text-sm font-medium text-text-primary mb-2\">\n          Notes (optional)\n        </label>\n        <textarea\n          rows={2}\n          placeholder=\"Additional notes about this waypoint...\"\n          value={data.notes || ''}\n          onChange={(e) => onChange({\n            ...data,\n            notes: e.target.value\n          })}\n          className=\"w-full px-3 py-2 bg-dark-hover border border-dark-border rounded text-sm\n                   text-text-primary focus:outline-none focus:ring-1 focus:ring-status-active\n                   resize-none\"\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default WaypointManager;","import { create } from 'zustand';\nimport { subscribeWithSelector } from 'zustand/middleware';\nimport { MissionData } from '@/types/fleet';\n\ninterface MissionStats {\n  total: number;\n  pending: number;\n  active: number;\n  completed: number;\n  failed: number;\n  cancelled: number;\n  avg_progress: number;\n  today: number;\n}\n\ninterface MissionStore {\n  // State\n  missions: Record<string, MissionData>;\n  activeMissions: MissionData[];\n  selectedMissionId: string | null;\n  missionStats: MissionStats | null;\n  \n  // WebSocket connection state\n  wsConnected: boolean;\n  wsError: string | null;\n  lastUpdate: string | null;\n\n  // Loading states\n  loading: boolean;\n  creating: boolean;\n  updating: boolean;\n  deleting: boolean;\n\n  // Actions\n  setMissions: (missions: MissionData[]) => void;\n  setActiveMissions: (missions: MissionData[]) => void;\n  setMissionStats: (stats: MissionStats) => void;\n  selectMission: (missionId: string | null) => void;\n  \n  // CRUD operations\n  createMission: (missionData: Partial<MissionData>) => Promise<MissionData>;\n  updateMission: (missionId: string, updates: Partial<MissionData>) => Promise<MissionData>;\n  deleteMission: (missionId: string) => Promise<void>;\n  assignMissionToDrone: (missionId: string, droneId: string) => Promise<void>;\n  updateMissionProgress: (missionId: string, progress: number, currentWaypoint?: number) => Promise<void>;\n  \n  // WebSocket actions\n  setWsConnected: (connected: boolean) => void;\n  setWsError: (error: string | null) => void;\n  handleMissionEvent: (event: string, data: any) => void;\n  \n  // Utility functions\n  getMissionById: (missionId: string) => MissionData | undefined;\n  getMissionsByDrone: (droneId: string) => MissionData[];\n  getMissionsByStatus: (status: MissionData['status']) => MissionData[];\n  clearMissions: () => void;\n}\n\nconst API_BASE_URL = 'http://localhost:3001/api';\nconst WS_URL = 'ws://localhost:3001/ws';\n\nlet wsConnection: WebSocket | null = null;\nlet reconnectAttempts = 0;\nconst maxReconnectAttempts = 5;\n\nconst useMissionStore = create<MissionStore>()(\n  subscribeWithSelector((set, get) => ({\n    // Initial state\n    missions: {},\n    activeMissions: [],\n    selectedMissionId: null,\n    missionStats: null,\n    \n    wsConnected: false,\n    wsError: null,\n    lastUpdate: null,\n    \n    loading: false,\n    creating: false,\n    updating: false,\n    deleting: false,\n\n    // State setters\n    setMissions: (missions) => {\n      const missionMap: Record<string, MissionData> = {};\n      missions.forEach(mission => {\n        missionMap[mission.id] = mission;\n      });\n      \n      set({\n        missions: missionMap,\n        lastUpdate: new Date().toISOString()\n      });\n    },\n\n    setActiveMissions: (missions) => set({ activeMissions: missions }),\n    setMissionStats: (stats) => set({ missionStats: stats }),\n    selectMission: (missionId) => set({ selectedMissionId: missionId }),\n\n    // CRUD operations\n    createMission: async (missionData) => {\n      set({ creating: true });\n      \n      try {\n        const response = await fetch(`${API_BASE_URL}/missions`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify(missionData),\n        });\n\n        if (!response.ok) {\n          const error = await response.json();\n          throw new Error(error.message || 'Failed to create mission');\n        }\n\n        const result = await response.json();\n        const mission = result.data;\n\n        // Update local state\n        set((state) => ({\n          missions: {\n            ...state.missions,\n            [mission.id]: mission\n          },\n          creating: false,\n          lastUpdate: new Date().toISOString()\n        }));\n\n        return mission;\n      } catch (error) {\n        set({ creating: false });\n        throw error;\n      }\n    },\n\n    updateMission: async (missionId, updates) => {\n      set({ updating: true });\n      \n      try {\n        const response = await fetch(`${API_BASE_URL}/missions/${missionId}`, {\n          method: 'PUT',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify(updates),\n        });\n\n        if (!response.ok) {\n          const error = await response.json();\n          throw new Error(error.message || 'Failed to update mission');\n        }\n\n        const result = await response.json();\n        const mission = result.data;\n\n        // Update local state\n        set((state) => ({\n          missions: {\n            ...state.missions,\n            [missionId]: mission\n          },\n          updating: false,\n          lastUpdate: new Date().toISOString()\n        }));\n\n        return mission;\n      } catch (error) {\n        set({ updating: false });\n        throw error;\n      }\n    },\n\n    deleteMission: async (missionId) => {\n      set({ deleting: true });\n      \n      try {\n        const response = await fetch(`${API_BASE_URL}/missions/${missionId}`, {\n          method: 'DELETE',\n        });\n\n        if (!response.ok) {\n          const error = await response.json();\n          throw new Error(error.message || 'Failed to delete mission');\n        }\n\n        // Update local state\n        set((state) => {\n          const { [missionId]: deleted, ...remainingMissions } = state.missions;\n          return {\n            missions: remainingMissions,\n            selectedMissionId: state.selectedMissionId === missionId ? null : state.selectedMissionId,\n            activeMissions: state.activeMissions.filter(m => m.id !== missionId),\n            deleting: false,\n            lastUpdate: new Date().toISOString()\n          };\n        });\n      } catch (error) {\n        set({ deleting: false });\n        throw error;\n      }\n    },\n\n    assignMissionToDrone: async (missionId, droneId) => {\n      try {\n        const response = await fetch(`${API_BASE_URL}/missions/${missionId}/assign`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify({ droneId }),\n        });\n\n        if (!response.ok) {\n          const error = await response.json();\n          throw new Error(error.message || 'Failed to assign mission');\n        }\n\n        const result = await response.json();\n        const mission = result.data;\n\n        // Update local state\n        set((state) => ({\n          missions: {\n            ...state.missions,\n            [missionId]: mission\n          },\n          lastUpdate: new Date().toISOString()\n        }));\n      } catch (error) {\n        throw error;\n      }\n    },\n\n    updateMissionProgress: async (missionId, progress, currentWaypoint) => {\n      try {\n        const response = await fetch(`${API_BASE_URL}/missions/${missionId}/progress`, {\n          method: 'PUT',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify({ progress, currentWaypoint }),\n        });\n\n        if (!response.ok) {\n          const error = await response.json();\n          throw new Error(error.message || 'Failed to update progress');\n        }\n\n        // Update local state\n        set((state) => {\n          const mission = state.missions[missionId];\n          if (mission) {\n            return {\n              missions: {\n                ...state.missions,\n                [missionId]: {\n                  ...mission,\n                  progress,\n                  currentWaypoint: currentWaypoint ?? mission.currentWaypoint\n                }\n              },\n              lastUpdate: new Date().toISOString()\n            };\n          }\n          return state;\n        });\n      } catch (error) {\n        throw error;\n      }\n    },\n\n    // WebSocket actions\n    setWsConnected: (connected) => set({ wsConnected: connected }),\n    setWsError: (error) => set({ wsError: error }),\n\n    handleMissionEvent: (event, data) => {\n      const state = get();\n      \n      switch (event) {\n        case 'mission_created':\n          set({\n            missions: {\n              ...state.missions,\n              [data.id]: data\n            },\n            lastUpdate: new Date().toISOString()\n          });\n          break;\n\n        case 'mission_updated':\n          set({\n            missions: {\n              ...state.missions,\n              [data.id]: data\n            },\n            lastUpdate: new Date().toISOString()\n          });\n          break;\n\n        case 'mission_deleted':\n          const { [data.id]: deleted, ...remainingMissions } = state.missions;\n          set({\n            missions: remainingMissions,\n            selectedMissionId: state.selectedMissionId === data.id ? null : state.selectedMissionId,\n            activeMissions: state.activeMissions.filter(m => m.id !== data.id),\n            lastUpdate: new Date().toISOString()\n          });\n          break;\n\n        case 'mission_assigned':\n          if (state.missions[data.missionId]) {\n            set({\n              missions: {\n                ...state.missions,\n                [data.missionId]: data.mission\n              },\n              lastUpdate: new Date().toISOString()\n            });\n          }\n          break;\n\n        case 'mission_progress':\n          const mission = state.missions[data.missionId];\n          if (mission) {\n            set({\n              missions: {\n                ...state.missions,\n                [data.missionId]: {\n                  ...mission,\n                  progress: data.progress,\n                  currentWaypoint: data.currentWaypoint,\n                  status: data.status || mission.status\n                }\n              },\n              lastUpdate: new Date().toISOString()\n            });\n          }\n          break;\n\n        default:\n          console.log('Unknown mission event:', event, data);\n      }\n    },\n\n    // Utility functions\n    getMissionById: (missionId) => get().missions[missionId],\n    \n    getMissionsByDrone: (droneId) => {\n      const missions = Object.values(get().missions);\n      return missions.filter(mission => mission.assignedDrone === droneId);\n    },\n    \n    getMissionsByStatus: (status) => {\n      const missions = Object.values(get().missions);\n      return missions.filter(mission => mission.status === status);\n    },\n    \n    clearMissions: () => set({\n      missions: {},\n      activeMissions: [],\n      selectedMissionId: null,\n      missionStats: null,\n      lastUpdate: null\n    })\n  }))\n);\n\n// WebSocket connection management\nconst connectWebSocket = () => {\n  if (wsConnection?.readyState === WebSocket.OPEN) {\n    return;\n  }\n\n  try {\n    wsConnection = new WebSocket(WS_URL);\n    \n    wsConnection.onopen = () => {\n      console.log('Mission WebSocket connected');\n      useMissionStore.getState().setWsConnected(true);\n      useMissionStore.getState().setWsError(null);\n      reconnectAttempts = 0;\n\n      // Subscribe to mission updates\n      wsConnection?.send(JSON.stringify({\n        type: 'subscribe_missions',\n        requestId: `sub-${Date.now()}`\n      }));\n    };\n\n    wsConnection.onmessage = (event) => {\n      try {\n        const message = JSON.parse(event.data);\n        const { type, data } = message;\n\n        // Handle specific mission events\n        if (type.startsWith('mission_') || type.startsWith('waypoint_')) {\n          useMissionStore.getState().handleMissionEvent(type, data);\n        }\n\n        // Handle other message types\n        switch (type) {\n          case 'mission_stats':\n            useMissionStore.getState().setMissionStats(data);\n            break;\n          \n          case 'active_missions':\n            useMissionStore.getState().setActiveMissions(data);\n            break;\n            \n          default:\n            // Log other message types for debugging\n            console.log('Mission WebSocket message:', type, data);\n        }\n      } catch (error) {\n        console.error('Error parsing WebSocket message:', error);\n      }\n    };\n\n    wsConnection.onclose = (event) => {\n      console.log('Mission WebSocket disconnected:', event.code, event.reason);\n      useMissionStore.getState().setWsConnected(false);\n      \n      // Attempt to reconnect\n      if (reconnectAttempts < maxReconnectAttempts) {\n        reconnectAttempts++;\n        setTimeout(connectWebSocket, 2000 * reconnectAttempts);\n      }\n    };\n\n    wsConnection.onerror = (error) => {\n      console.error('Mission WebSocket error:', error);\n      useMissionStore.getState().setWsError('WebSocket connection error');\n    };\n\n  } catch (error) {\n    console.error('Failed to create WebSocket connection:', error);\n    useMissionStore.getState().setWsError('Failed to connect to mission service');\n  }\n};\n\n// Initialize WebSocket connection\nexport const initializeMissionWebSocket = () => {\n  connectWebSocket();\n};\n\n// Hook to get selected mission\nexport const useSelectedMission = () => {\n  const { selectedMissionId, missions } = useMissionStore();\n  return selectedMissionId ? missions[selectedMissionId] : null;\n};\n\n// Hook to get missions for a specific drone\nexport const useDroneMissions = (droneId: string) => {\n  return useMissionStore((state) => state.getMissionsByDrone(droneId));\n};\n\n// Hook to get missions by status\nexport const useMissionsByStatus = (status: MissionData['status']) => {\n  return useMissionStore((state) => state.getMissionsByStatus(status));\n};\n\n// Hook for WebSocket connection status\nexport const useMissionWebSocketStatus = () => {\n  return useMissionStore((state) => ({\n    connected: state.wsConnected,\n    error: state.wsError,\n    lastUpdate: state.lastUpdate\n  }));\n};\n\nexport default useMissionStore;","import React, { useState } from 'react';\nimport { motion } from 'framer-motion';\nimport {\n  RocketLaunchIcon,\n  XMarkIcon,\n  CheckIcon,\n  ExclamationTriangleIcon\n} from '@heroicons/react/24/outline';\nimport { MissionData, Waypoint } from '@/types/fleet';\nimport WaypointManager from '../WaypointManager';\nimport useMissionStore from '@/store/mission';\n\ninterface MissionCreatorProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onMissionCreated?: (mission: MissionData) => void;\n}\n\ninterface MissionFormData {\n  name: string;\n  description: string;\n  priority: number;\n  waypoints: Waypoint[];\n}\n\nconst MissionCreator: React.FC<MissionCreatorProps> = ({\n  isOpen,\n  onClose,\n  onMissionCreated\n}) => {\n  const { createMission, creating } = useMissionStore();\n  const [formData, setFormData] = useState<MissionFormData>({\n    name: '',\n    description: '',\n    priority: 5,\n    waypoints: []\n  });\n  const [error, setError] = useState<string | null>(null);\n\n  const priorityOptions = [\n    { value: 1, label: 'Very Low', color: 'text-gray-400' },\n    { value: 2, label: 'Low', color: 'text-blue-400' },\n    { value: 3, label: 'Low-Medium', color: 'text-blue-300' },\n    { value: 4, label: 'Medium-Low', color: 'text-yellow-400' },\n    { value: 5, label: 'Medium', color: 'text-yellow-300' },\n    { value: 6, label: 'Medium-High', color: 'text-orange-400' },\n    { value: 7, label: 'High', color: 'text-orange-300' },\n    { value: 8, label: 'High-Critical', color: 'text-red-400' },\n    { value: 9, label: 'Critical', color: 'text-red-300' },\n    { value: 10, label: 'Emergency', color: 'text-red-200' }\n  ];\n\n  const resetForm = () => {\n    setFormData({\n      name: '',\n      description: '',\n      priority: 5,\n      waypoints: []\n    });\n    setError(null);\n  };\n\n  const handleClose = () => {\n    resetForm();\n    onClose();\n  };\n\n  const validateForm = () => {\n    if (!formData.name.trim()) {\n      setError('Mission name is required');\n      return false;\n    }\n\n    if (formData.name.length > 100) {\n      setError('Mission name must be less than 100 characters');\n      return false;\n    }\n\n    if (formData.waypoints.length === 0) {\n      setError('At least one waypoint is required');\n      return false;\n    }\n\n    if (formData.waypoints.length > 50) {\n      setError('Maximum 50 waypoints allowed');\n      return false;\n    }\n\n    // Validate waypoints\n    for (let i = 0; i < formData.waypoints.length; i++) {\n      const waypoint = formData.waypoints[i];\n      \n      if (!waypoint.position.lat || !waypoint.position.lng) {\n        setError(`Waypoint ${i + 1}: Invalid coordinates`);\n        return false;\n      }\n\n      if (Math.abs(waypoint.position.lat) > 90) {\n        setError(`Waypoint ${i + 1}: Invalid latitude (must be -90 to 90)`);\n        return false;\n      }\n\n      if (Math.abs(waypoint.position.lng) > 180) {\n        setError(`Waypoint ${i + 1}: Invalid longitude (must be -180 to 180)`);\n        return false;\n      }\n\n      if (waypoint.position.alt < 0 || waypoint.position.alt > 1000) {\n        setError(`Waypoint ${i + 1}: Invalid altitude (must be 0-1000m)`);\n        return false;\n      }\n\n      if (waypoint.action === 'hover' && (!waypoint.hoverTime || waypoint.hoverTime <= 0)) {\n        setError(`Waypoint ${i + 1}: Hover time required for hover action`);\n        return false;\n      }\n    }\n\n    return true;\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError(null);\n\n    if (!validateForm()) {\n      return;\n    }\n\n    try {\n      const mission = await createMission({\n        name: formData.name.trim(),\n        description: formData.description.trim(),\n        priority: formData.priority,\n        waypoints: formData.waypoints.map((waypoint, index) => ({\n          ...waypoint,\n          sequence: index\n        })),\n        status: 'pending'\n      });\n\n      onMissionCreated?.(mission);\n      handleClose();\n    } catch (err: any) {\n      setError(err.message || 'Failed to create mission');\n    }\n  };\n\n  const getPriorityOption = (priority: number) => {\n    return priorityOptions.find(opt => opt.value === priority) || priorityOptions[4];\n  };\n\n  const calculateEstimatedDuration = () => {\n    if (formData.waypoints.length < 2) return 0;\n    \n    let totalTime = 0;\n    const speed = 10; // m/s average speed\n    \n    for (let i = 1; i < formData.waypoints.length; i++) {\n      const prev = formData.waypoints[i - 1];\n      const curr = formData.waypoints[i];\n      \n      // Calculate distance\n      const R = 6371000;\n      const lat1Rad = prev.position.lat * Math.PI / 180;\n      const lat2Rad = curr.position.lat * Math.PI / 180;\n      const deltaLat = (curr.position.lat - prev.position.lat) * Math.PI / 180;\n      const deltaLng = (curr.position.lng - prev.position.lng) * Math.PI / 180;\n\n      const a = Math.sin(deltaLat / 2) * Math.sin(deltaLat / 2) +\n                Math.cos(lat1Rad) * Math.cos(lat2Rad) *\n                Math.sin(deltaLng / 2) * Math.sin(deltaLng / 2);\n      const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n      const distance = R * c;\n      \n      totalTime += distance / speed;\n      \n      // Add hover time\n      if (curr.hoverTime) {\n        totalTime += curr.hoverTime;\n      }\n    }\n    \n    return Math.round(totalTime);\n  };\n\n  const formatDuration = (seconds: number) => {\n    const hours = Math.floor(seconds / 3600);\n    const minutes = Math.floor((seconds % 3600) / 60);\n    const secs = seconds % 60;\n    \n    if (hours > 0) {\n      return `${hours}h ${minutes}m ${secs}s`;\n    } else if (minutes > 0) {\n      return `${minutes}m ${secs}s`;\n    } else {\n      return `${secs}s`;\n    }\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-[10001] p-4\">\n      <motion.div\n        initial={{ opacity: 0, scale: 0.95 }}\n        animate={{ opacity: 1, scale: 1 }}\n        exit={{ opacity: 0, scale: 0.95 }}\n        className=\"bg-dark-secondary rounded-lg border border-dark-border shadow-xl\n                   w-full max-w-4xl max-h-[90vh] flex flex-col overflow-hidden\"\n      >\n        {/* Header */}\n        <div className=\"flex items-center justify-between p-6 border-b border-dark-border\">\n          <div className=\"flex items-center gap-3\">\n            <RocketLaunchIcon className=\"w-6 h-6 text-status-active\" />\n            <h2 className=\"text-xl font-semibold text-text-primary\">Create New Mission</h2>\n          </div>\n          <button\n            onClick={handleClose}\n            className=\"p-2 hover:bg-dark-hover rounded-lg transition-colors\"\n          >\n            <XMarkIcon className=\"w-5 h-5 text-text-secondary\" />\n          </button>\n        </div>\n\n        {/* Form */}\n        <form onSubmit={handleSubmit} className=\"flex flex-col flex-1 min-h-0\">\n          <div className=\"flex-1 overflow-y-auto p-6 space-y-6 scrollbar-thin scrollbar-thumb-dark-border scrollbar-track-transparent\">\n            {/* Error Message */}\n            {error && (\n              <div className=\"flex items-center gap-2 p-3 bg-status-critical/10 border border-status-critical/20 \n                            rounded-lg text-status-critical\">\n                <ExclamationTriangleIcon className=\"w-5 h-5 flex-shrink-0\" />\n                <span className=\"text-sm\">{error}</span>\n              </div>\n            )}\n\n            {/* Basic Information */}\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n              <div className=\"space-y-4\">\n                <h3 className=\"text-lg font-medium text-text-primary\">Mission Details</h3>\n                \n                {/* Mission Name */}\n                <div>\n                  <label className=\"block text-sm font-medium text-text-primary mb-2\">\n                    Mission Name *\n                  </label>\n                  <input\n                    type=\"text\"\n                    required\n                    maxLength={100}\n                    placeholder=\"e.g., Emergency Medical Delivery\"\n                    value={formData.name}\n                    onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n                    className=\"w-full px-3 py-2 bg-dark-tertiary border border-dark-border rounded-lg\n                             text-text-primary placeholder-text-secondary focus:outline-none \n                             focus:ring-2 focus:ring-status-active\"\n                  />\n                  <div className=\"text-xs text-text-secondary mt-1\">\n                    {formData.name.length}/100 characters\n                  </div>\n                </div>\n\n                {/* Description */}\n                <div>\n                  <label className=\"block text-sm font-medium text-text-primary mb-2\">\n                    Description\n                  </label>\n                  <textarea\n                    rows={3}\n                    maxLength={1000}\n                    placeholder=\"Describe the mission objectives and requirements...\"\n                    value={formData.description}\n                    onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n                    className=\"w-full px-3 py-2 bg-dark-tertiary border border-dark-border rounded-lg\n                             text-text-primary placeholder-text-secondary focus:outline-none \n                             focus:ring-2 focus:ring-status-active resize-none\"\n                  />\n                </div>\n\n                {/* Priority */}\n                <div>\n                  <label className=\"block text-sm font-medium text-text-primary mb-2\">\n                    Priority\n                  </label>\n                  <select\n                    value={formData.priority}\n                    onChange={(e) => setFormData({ ...formData, priority: parseInt(e.target.value) })}\n                    className=\"w-full px-3 py-2 bg-dark-tertiary border border-dark-border rounded-lg\n                             text-text-primary focus:outline-none focus:ring-2 focus:ring-status-active\"\n                  >\n                    {priorityOptions.map(option => (\n                      <option key={option.value} value={option.value} className=\"bg-dark-tertiary\">\n                        {option.value} - {option.label}\n                      </option>\n                    ))}\n                  </select>\n                  <div className={`text-xs mt-1 ${getPriorityOption(formData.priority).color}`}>\n                    {getPriorityOption(formData.priority).label}\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"space-y-4\">\n                <h3 className=\"text-lg font-medium text-text-primary\">Mission Summary</h3>\n                \n                <div className=\"bg-dark-tertiary rounded-lg p-4 space-y-3\">\n                  <div className=\"grid grid-cols-2 gap-4 text-sm\">\n                    <div>\n                      <span className=\"text-text-secondary\">Waypoints:</span>\n                      <div className=\"text-text-primary font-medium\">{formData.waypoints.length}</div>\n                    </div>\n                    <div>\n                      <span className=\"text-text-secondary\">Priority:</span>\n                      <div className={`font-medium ${getPriorityOption(formData.priority).color}`}>\n                        {getPriorityOption(formData.priority).label}\n                      </div>\n                    </div>\n                  </div>\n                  \n                  {formData.waypoints.length > 1 && (\n                    <div className=\"text-sm\">\n                      <span className=\"text-text-secondary\">Estimated Duration:</span>\n                      <div className=\"text-text-primary font-medium\">\n                        {formatDuration(calculateEstimatedDuration())}\n                      </div>\n                    </div>\n                  )}\n                  \n                  <div className=\"text-xs text-text-secondary\">\n                    Status: <span className=\"text-status-warning\">Pending Assignment</span>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            {/* Waypoint Manager */}\n            <div>\n              <WaypointManager\n                waypoints={formData.waypoints}\n                onWaypointsChange={(waypoints) => {\n                  setFormData({ ...formData, waypoints });\n                  setError(null); // Clear error when waypoints change\n                }}\n              />\n            </div>\n          </div>\n\n          {/* Footer */}\n          <div className=\"flex-shrink-0 flex items-center justify-between p-6 border-t border-dark-border bg-dark-tertiary\">\n            <div className=\"text-sm text-text-secondary\">\n              {formData.waypoints.length > 0 ? (\n                <span>Mission ready to create with {formData.waypoints.length} waypoints</span>\n              ) : (\n                <span>Add waypoints to define the mission route</span>\n              )}\n            </div>\n            \n            <div className=\"flex gap-3\">\n              <button\n                type=\"button\"\n                onClick={handleClose}\n                disabled={creating}\n                className=\"px-4 py-2 text-text-secondary hover:text-text-primary transition-colors\n                         disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                Cancel\n              </button>\n              <button\n                type=\"submit\"\n                disabled={creating || !formData.name.trim() || formData.waypoints.length === 0}\n                className=\"flex items-center gap-2 px-6 py-2 bg-status-active hover:bg-status-active/80 \n                         text-white rounded-lg font-medium transition-colors\n                         disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                {creating ? (\n                  <>\n                    <div className=\"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin\" />\n                    Creating...\n                  </>\n                ) : (\n                  <>\n                    <CheckIcon className=\"w-4 h-4\" />\n                    Create Mission\n                  </>\n                )}\n              </button>\n            </div>\n          </div>\n        </form>\n      </motion.div>\n    </div>\n  );\n};\n\nexport default MissionCreator;","import React, { useState, useEffect } from 'react';\nimport { motion } from 'framer-motion';\nimport {\n  UserIcon,\n  CheckCircleIcon,\n  XCircleIcon,\n  ClockIcon,\n  MapPinIcon,\n  Battery0Icon,\n  SignalIcon,\n  ExclamationTriangleIcon,\n  ArrowRightIcon\n} from '@heroicons/react/24/outline';\nimport { MissionData, DroneData } from '@/types/fleet';\nimport { useFleetStore } from '@/store/fleet';\nimport useMissionStore from '@/store/mission';\n\ninterface DroneAssignmentProps {\n  mission: MissionData;\n  isOpen: boolean;\n  onClose: () => void;\n  onAssigned?: (missionId: string, droneId: string) => void;\n}\n\ninterface DroneCompatibility {\n  drone: DroneData;\n  compatible: boolean;\n  score: number;\n  issues: string[];\n  warnings: string[];\n}\n\nconst DroneAssignment: React.FC<DroneAssignmentProps> = ({\n  mission,\n  isOpen,\n  onClose,\n  onAssigned\n}) => {\n  const drones = useFleetStore((state) => Object.values(state.drones));\n  const { assignMissionToDrone, missions } = useMissionStore();\n  const [selectedDroneId, setSelectedDroneId] = useState<string | null>(null);\n  const [assigning, setAssigning] = useState(false);\n  const [droneCompatibility, setDroneCompatibility] = useState<DroneCompatibility[]>([]);\n\n  useEffect(() => {\n    if (isOpen) {\n      analyzeDroneCompatibility();\n    }\n  }, [isOpen, mission, drones]);\n\n  const analyzeDroneCompatibility = () => {\n    const compatibility: DroneCompatibility[] = drones.map(drone => {\n      const issues: string[] = [];\n      const warnings: string[] = [];\n      let score = 100;\n\n      // Check drone status\n      if (drone.status === 'maintenance' || drone.status === 'emergency') {\n        issues.push(`Drone is in ${drone.status} mode`);\n        score -= 100;\n      }\n\n      if (drone.status === 'charging') {\n        warnings.push('Drone is currently charging');\n        score -= 20;\n      }\n\n      // Check battery level\n      if (drone.batteryLevel < 30) {\n        issues.push(`Low battery: ${drone.batteryLevel}%`);\n        score -= 50;\n      } else if (drone.batteryLevel < 50) {\n        warnings.push(`Medium battery: ${drone.batteryLevel}%`);\n        score -= 20;\n      }\n\n      // Check signal strength\n      if (drone.signalStrength < 50) {\n        warnings.push(`Weak signal: ${drone.signalStrength}%`);\n        score -= 10;\n      }\n\n      // Check existing mission assignment\n      const existingMission = Object.values(missions).find(m => \n        m.assignedDrone === drone.id && ['pending', 'active', 'paused'].includes(m.status)\n      );\n      if (existingMission) {\n        issues.push(`Already assigned to: ${existingMission.name}`);\n        score -= 80;\n      }\n\n      // Check distance to first waypoint\n      if (mission.waypoints && mission.waypoints.length > 0) {\n        const firstWaypoint = mission.waypoints[0];\n        const distance = calculateDistance(drone.position, firstWaypoint.position);\n        if (distance > 50000) { // 50km\n          warnings.push(`Far from start: ${(distance / 1000).toFixed(1)}km`);\n          score -= 15;\n        }\n      }\n\n      // Priority bonus/penalty\n      if (mission.priority >= 8) {\n        score += 10; // High priority missions get slight preference\n      }\n\n      // Flight time consideration\n      if (drone.totalFlightTime && drone.totalFlightTime > 3600) { // 1 hour\n        warnings.push('Drone has been flying for extended time');\n        score -= 5;\n      }\n\n      const compatible = score > 0 && issues.length === 0;\n\n      return {\n        drone,\n        compatible,\n        score: Math.max(0, score),\n        issues,\n        warnings\n      };\n    });\n\n    // Sort by compatibility score (best first)\n    compatibility.sort((a, b) => b.score - a.score);\n    setDroneCompatibility(compatibility);\n  };\n\n  const calculateDistance = (pos1: { lat: number; lng: number }, pos2: { lat: number; lng: number }) => {\n    const R = 6371000; // Earth's radius in meters\n    const lat1Rad = pos1.lat * Math.PI / 180;\n    const lat2Rad = pos2.lat * Math.PI / 180;\n    const deltaLat = (pos2.lat - pos1.lat) * Math.PI / 180;\n    const deltaLng = (pos2.lng - pos1.lng) * Math.PI / 180;\n\n    const a = Math.sin(deltaLat / 2) * Math.sin(deltaLat / 2) +\n              Math.cos(lat1Rad) * Math.cos(lat2Rad) *\n              Math.sin(deltaLng / 2) * Math.sin(deltaLng / 2);\n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n\n    return R * c;\n  };\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'active':\n      case 'in_flight':\n        return 'text-status-operational bg-status-operational/10';\n      case 'idle':\n        return 'text-status-active bg-status-active/10';\n      case 'charging':\n        return 'text-status-warning bg-status-warning/10';\n      case 'maintenance':\n      case 'emergency':\n        return 'text-status-critical bg-status-critical/10';\n      default:\n        return 'text-text-secondary bg-text-secondary/10';\n    }\n  };\n\n  const getBatteryColor = (level: number) => {\n    if (level > 70) return 'text-status-operational';\n    if (level > 30) return 'text-status-warning';\n    return 'text-status-critical';\n  };\n\n  const getCompatibilityIndicator = (compatibility: DroneCompatibility) => {\n    if (!compatibility.compatible) {\n      return <XCircleIcon className=\"w-5 h-5 text-status-critical\" />;\n    }\n    if (compatibility.score >= 80) {\n      return <CheckCircleIcon className=\"w-5 h-5 text-status-operational\" />;\n    }\n    if (compatibility.score >= 60) {\n      return <ClockIcon className=\"w-5 h-5 text-status-warning\" />;\n    }\n    return <ExclamationTriangleIcon className=\"w-5 h-5 text-status-warning\" />;\n  };\n\n  const handleAssign = async () => {\n    if (!selectedDroneId) return;\n\n    setAssigning(true);\n    try {\n      await assignMissionToDrone(mission.id, selectedDroneId);\n      onAssigned?.(mission.id, selectedDroneId);\n      onClose();\n    } catch (error) {\n      console.error('Failed to assign mission:', error);\n    } finally {\n      setAssigning(false);\n    }\n  };\n\n  const estimateFlightTime = (compatibility: DroneCompatibility) => {\n    if (!mission.waypoints || mission.waypoints.length === 0) return null;\n    \n    const speed = 10; // m/s average speed\n    let totalTime = 0;\n    let currentPos = compatibility.drone.position;\n    \n    // Time to reach first waypoint\n    const distanceToStart = calculateDistance(currentPos, mission.waypoints[0].position);\n    totalTime += distanceToStart / speed;\n    \n    // Time for mission waypoints\n    for (let i = 1; i < mission.waypoints.length; i++) {\n      const distance = calculateDistance(mission.waypoints[i - 1].position, mission.waypoints[i].position);\n      totalTime += distance / speed;\n      \n      if (mission.waypoints[i].hoverTime) {\n        totalTime += mission.waypoints[i].hoverTime!;\n      }\n    }\n    \n    return totalTime;\n  };\n\n  const formatTime = (seconds: number) => {\n    const hours = Math.floor(seconds / 3600);\n    const minutes = Math.floor((seconds % 3600) / 60);\n    if (hours > 0) {\n      return `${hours}h ${minutes}m`;\n    }\n    return `${minutes}m`;\n  };\n\n  if (!isOpen) return null;\n\n  const selectedCompatibility = droneCompatibility.find(d => d.drone.id === selectedDroneId);\n\n  return (\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-[10001] p-4\">\n      <motion.div\n        initial={{ opacity: 0, scale: 0.95 }}\n        animate={{ opacity: 1, scale: 1 }}\n        exit={{ opacity: 0, scale: 0.95 }}\n        className=\"bg-dark-secondary rounded-lg border border-dark-border shadow-xl\n                   w-full max-w-4xl max-h-[90vh] overflow-hidden\"\n      >\n        {/* Header */}\n        <div className=\"flex items-center justify-between p-6 border-b border-dark-border\">\n          <div>\n            <h2 className=\"text-xl font-semibold text-text-primary\">Assign Mission to Drone</h2>\n            <p className=\"text-text-secondary mt-1\">\n              Mission: <span className=\"font-medium\">{mission.name}</span>\n            </p>\n          </div>\n          <button\n            onClick={onClose}\n            className=\"p-2 hover:bg-dark-hover rounded-lg transition-colors\"\n          >\n            <XCircleIcon className=\"w-5 h-5 text-text-secondary\" />\n          </button>\n        </div>\n\n        <div className=\"flex h-full\">\n          {/* Drone List */}\n          <div className=\"w-1/2 border-r border-dark-border\">\n            <div className=\"p-4 border-b border-dark-border\">\n              <h3 className=\"font-medium text-text-primary\">Available Drones ({droneCompatibility.length})</h3>\n              <p className=\"text-sm text-text-secondary mt-1\">\n                Select a drone to assign this mission\n              </p>\n            </div>\n\n            <div className=\"overflow-y-auto max-h-[60vh] p-4 space-y-3\">\n              {droneCompatibility.map((compatibility) => (\n                <motion.div\n                  key={compatibility.drone.id}\n                  className={`p-4 rounded-lg border cursor-pointer transition-all\n                    ${selectedDroneId === compatibility.drone.id\n                      ? 'border-status-active bg-status-active/5'\n                      : 'border-dark-border hover:border-dark-hover bg-dark-tertiary hover:bg-dark-hover'\n                    }\n                    ${!compatibility.compatible ? 'opacity-50' : ''}\n                  `}\n                  onClick={() => compatibility.compatible && setSelectedDroneId(compatibility.drone.id)}\n                  whileHover={compatibility.compatible ? { scale: 1.02 } : {}}\n                  whileTap={compatibility.compatible ? { scale: 0.98 } : {}}\n                >\n                  <div className=\"flex items-start justify-between mb-3\">\n                    <div className=\"flex items-center gap-3\">\n                      {getCompatibilityIndicator(compatibility)}\n                      <div>\n                        <h4 className=\"font-medium text-text-primary\">{compatibility.drone.name}</h4>\n                        <p className=\"text-sm text-text-secondary\">{compatibility.drone.id}</p>\n                      </div>\n                    </div>\n                    \n                    <div className=\"flex flex-col items-end gap-1\">\n                      <span className={`px-2 py-1 rounded-full text-xs font-medium ${getStatusColor(compatibility.drone.status)}`}>\n                        {compatibility.drone.status.toUpperCase()}\n                      </span>\n                      <div className=\"text-sm font-medium text-text-primary\">\n                        Score: {compatibility.score}/100\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Drone Stats */}\n                  <div className=\"grid grid-cols-3 gap-3 mb-3 text-sm\">\n                    <div className=\"flex items-center gap-1\">\n                      <Battery0Icon className={`w-4 h-4 ${getBatteryColor(compatibility.drone.batteryLevel)}`} />\n                      <span className={getBatteryColor(compatibility.drone.batteryLevel)}>\n                        {compatibility.drone.batteryLevel}%\n                      </span>\n                    </div>\n                    <div className=\"flex items-center gap-1\">\n                      <SignalIcon className=\"w-4 h-4 text-text-secondary\" />\n                      <span className=\"text-text-primary\">{compatibility.drone.signalStrength}%</span>\n                    </div>\n                    <div className=\"flex items-center gap-1\">\n                      <MapPinIcon className=\"w-4 h-4 text-text-secondary\" />\n                      <span className=\"text-text-primary text-xs\">\n                        {compatibility.drone.position.lat.toFixed(3)}, {compatibility.drone.position.lng.toFixed(3)}\n                      </span>\n                    </div>\n                  </div>\n\n                  {/* Issues and Warnings */}\n                  {compatibility.issues.length > 0 && (\n                    <div className=\"mb-2\">\n                      {compatibility.issues.map((issue, index) => (\n                        <div key={index} className=\"flex items-center gap-2 text-xs text-status-critical\">\n                          <XCircleIcon className=\"w-3 h-3\" />\n                          {issue}\n                        </div>\n                      ))}\n                    </div>\n                  )}\n\n                  {compatibility.warnings.length > 0 && (\n                    <div className=\"mb-2\">\n                      {compatibility.warnings.map((warning, index) => (\n                        <div key={index} className=\"flex items-center gap-2 text-xs text-status-warning\">\n                          <ExclamationTriangleIcon className=\"w-3 h-3\" />\n                          {warning}\n                        </div>\n                      ))}\n                    </div>\n                  )}\n\n                  {/* Flight Time Estimate */}\n                  {compatibility.compatible && (\n                    <div className=\"text-xs text-text-secondary\">\n                      Estimated flight time: {formatTime(estimateFlightTime(compatibility) || 0)}\n                    </div>\n                  )}\n                </motion.div>\n              ))}\n            </div>\n          </div>\n\n          {/* Assignment Details */}\n          <div className=\"w-1/2 flex flex-col\">\n            {selectedCompatibility ? (\n              <>\n                <div className=\"p-4 border-b border-dark-border\">\n                  <h3 className=\"font-medium text-text-primary mb-2\">Assignment Preview</h3>\n                  <div className=\"flex items-center gap-3 p-3 bg-dark-tertiary rounded-lg\">\n                    <div className=\"text-center\">\n                      <div className=\"font-medium text-text-primary\">{mission.name}</div>\n                      <div className=\"text-xs text-text-secondary\">Mission</div>\n                    </div>\n                    <ArrowRightIcon className=\"w-5 h-5 text-status-active\" />\n                    <div className=\"text-center\">\n                      <div className=\"font-medium text-text-primary\">{selectedCompatibility.drone.name}</div>\n                      <div className=\"text-xs text-text-secondary\">Drone</div>\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"flex-1 p-4 overflow-y-auto\">\n                  {/* Mission Details */}\n                  <div className=\"space-y-4\">\n                    <div>\n                      <h4 className=\"font-medium text-text-primary mb-2\">Mission Details</h4>\n                      <div className=\"bg-dark-tertiary rounded-lg p-3 space-y-2 text-sm\">\n                        <div className=\"flex justify-between\">\n                          <span className=\"text-text-secondary\">Priority:</span>\n                          <span className=\"text-text-primary font-medium\">Level {mission.priority}</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span className=\"text-text-secondary\">Waypoints:</span>\n                          <span className=\"text-text-primary font-medium\">{mission.waypoints?.length || 0}</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span className=\"text-text-secondary\">Status:</span>\n                          <span className=\"text-status-warning font-medium\">{mission.status.toUpperCase()}</span>\n                        </div>\n                      </div>\n                    </div>\n\n                    {/* Drone Readiness */}\n                    <div>\n                      <h4 className=\"font-medium text-text-primary mb-2\">Drone Readiness</h4>\n                      <div className=\"bg-dark-tertiary rounded-lg p-3 space-y-2 text-sm\">\n                        <div className=\"flex justify-between\">\n                          <span className=\"text-text-secondary\">Compatibility Score:</span>\n                          <span className=\"text-text-primary font-medium\">{selectedCompatibility.score}/100</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span className=\"text-text-secondary\">Battery Level:</span>\n                          <span className={`font-medium ${getBatteryColor(selectedCompatibility.drone.batteryLevel)}`}>\n                            {selectedCompatibility.drone.batteryLevel}%\n                          </span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span className=\"text-text-secondary\">Signal Strength:</span>\n                          <span className=\"text-text-primary font-medium\">{selectedCompatibility.drone.signalStrength}%</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span className=\"text-text-secondary\">Current Status:</span>\n                          <span className=\"text-text-primary font-medium\">{selectedCompatibility.drone.status.toUpperCase()}</span>\n                        </div>\n                      </div>\n                    </div>\n\n                    {/* Flight Estimate */}\n                    <div>\n                      <h4 className=\"font-medium text-text-primary mb-2\">Flight Estimate</h4>\n                      <div className=\"bg-dark-tertiary rounded-lg p-3 space-y-2 text-sm\">\n                        <div className=\"flex justify-between\">\n                          <span className=\"text-text-secondary\">Estimated Duration:</span>\n                          <span className=\"text-text-primary font-medium\">\n                            {formatTime(estimateFlightTime(selectedCompatibility) || 0)}\n                          </span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span className=\"text-text-secondary\">Distance to Start:</span>\n                          <span className=\"text-text-primary font-medium\">\n                            {mission.waypoints && mission.waypoints.length > 0 \n                              ? `${(calculateDistance(selectedCompatibility.drone.position, mission.waypoints[0].position) / 1000).toFixed(1)}km`\n                              : 'N/A'\n                            }\n                          </span>\n                        </div>\n                      </div>\n                    </div>\n\n                    {/* Warnings/Issues */}\n                    {(selectedCompatibility.issues.length > 0 || selectedCompatibility.warnings.length > 0) && (\n                      <div>\n                        <h4 className=\"font-medium text-text-primary mb-2\">Considerations</h4>\n                        <div className=\"space-y-2\">\n                          {selectedCompatibility.issues.map((issue, index) => (\n                            <div key={index} className=\"flex items-start gap-2 p-2 bg-status-critical/10 rounded text-sm\">\n                              <XCircleIcon className=\"w-4 h-4 text-status-critical mt-0.5\" />\n                              <span className=\"text-status-critical\">{issue}</span>\n                            </div>\n                          ))}\n                          {selectedCompatibility.warnings.map((warning, index) => (\n                            <div key={index} className=\"flex items-start gap-2 p-2 bg-status-warning/10 rounded text-sm\">\n                              <ExclamationTriangleIcon className=\"w-4 h-4 text-status-warning mt-0.5\" />\n                              <span className=\"text-status-warning\">{warning}</span>\n                            </div>\n                          ))}\n                        </div>\n                      </div>\n                    )}\n                  </div>\n                </div>\n\n                {/* Assignment Actions */}\n                <div className=\"p-4 border-t border-dark-border\">\n                  <div className=\"flex justify-between items-center\">\n                    <div className=\"text-sm text-text-secondary\">\n                      {selectedCompatibility.compatible \n                        ? 'Ready to assign mission' \n                        : 'Cannot assign due to compatibility issues'\n                      }\n                    </div>\n                    \n                    <div className=\"flex gap-3\">\n                      <button\n                        onClick={onClose}\n                        disabled={assigning}\n                        className=\"px-4 py-2 text-text-secondary hover:text-text-primary transition-colors\n                                 disabled:opacity-50 disabled:cursor-not-allowed\"\n                      >\n                        Cancel\n                      </button>\n                      <button\n                        onClick={handleAssign}\n                        disabled={!selectedCompatibility.compatible || assigning}\n                        className=\"flex items-center gap-2 px-6 py-2 bg-status-active hover:bg-status-active/80 \n                                 text-white rounded-lg font-medium transition-colors\n                                 disabled:opacity-50 disabled:cursor-not-allowed\"\n                      >\n                        {assigning ? (\n                          <>\n                            <div className=\"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin\" />\n                            Assigning...\n                          </>\n                        ) : (\n                          <>\n                            <UserIcon className=\"w-4 h-4\" />\n                            Assign Mission\n                          </>\n                        )}\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              </>\n            ) : (\n              <div className=\"flex-1 flex items-center justify-center p-8\">\n                <div className=\"text-center\">\n                  <UserIcon className=\"w-12 h-12 mx-auto text-text-secondary opacity-50 mb-4\" />\n                  <h3 className=\"text-lg font-medium text-text-primary mb-2\">Select a Drone</h3>\n                  <p className=\"text-text-secondary\">\n                    Choose a drone from the list to see assignment details\n                  </p>\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n      </motion.div>\n    </div>\n  );\n};\n\nexport default DroneAssignment;","import React, { useState } from 'react';\nimport { motion } from 'framer-motion';\nimport {\n  UserIcon,\n  CheckCircleIcon,\n  XCircleIcon,\n  ExclamationTriangleIcon\n} from '@heroicons/react/24/outline';\nimport { MissionData } from '@/types/fleet';\nimport { useFleetStore } from '@/store/fleet';\nimport useMissionStore from '@/store/mission';\n\ninterface QuickAssignmentProps {\n  mission: MissionData;\n  onAssigned?: (missionId: string, droneId: string) => void;\n  className?: string;\n}\n\nconst QuickAssignment: React.FC<QuickAssignmentProps> = ({\n  mission,\n  onAssigned,\n  className = ''\n}) => {\n  const drones = useFleetStore((state) => Object.values(state.drones));\n  const { assignMissionToDrone, missions } = useMissionStore();\n  const [assigning, setAssigning] = useState(false);\n  const [showOptions, setShowOptions] = useState(false);\n\n  // Find best available drone\n  const getAvailableDrones = () => {\n    return drones.filter(drone => {\n      // Must not be in maintenance or emergency\n      if (drone.status === 'maintenance' || drone.status === 'emergency') {\n        return false;\n      }\n\n      // Must have sufficient battery\n      if (drone.batteryLevel < 30) {\n        return false;\n      }\n\n      // Must not have active mission\n      const hasActiveMission = Object.values(missions).some(m => \n        m.assignedDrone === drone.id && ['pending', 'active', 'paused'].includes(m.status)\n      );\n      if (hasActiveMission) {\n        return false;\n      }\n\n      return true;\n    });\n  };\n\n  const getBestDrone = () => {\n    const availableDrones = getAvailableDrones();\n    if (availableDrones.length === 0) return null;\n\n    // Score drones based on multiple factors\n    const scoredDrones = availableDrones.map(drone => {\n      let score = 0;\n      \n      // Battery score (0-30 points)\n      score += Math.floor(drone.batteryLevel * 0.3);\n      \n      // Signal strength score (0-20 points)\n      score += Math.floor(drone.signalStrength * 0.2);\n      \n      // Status preference (idle > charging > in_flight/active)\n      if (drone.status === 'idle') score += 30;\n      else if (drone.status === 'charging') score += 20;\n      else if (drone.status === 'active' || drone.status === 'in_flight') score += 10;\n      \n      // Distance to mission start (if waypoints available)\n      if (mission.waypoints && mission.waypoints.length > 0) {\n        const distance = calculateDistance(drone.position, mission.waypoints[0].position);\n        // Closer is better (max 20 points, decreases with distance)\n        const distanceScore = Math.max(0, 20 - (distance / 5000)); // 5km = 0 points\n        score += distanceScore;\n      }\n\n      return { drone, score };\n    });\n\n    // Return the highest scored drone\n    scoredDrones.sort((a, b) => b.score - a.score);\n    return scoredDrones[0]?.drone || null;\n  };\n\n  const calculateDistance = (pos1: { lat: number; lng: number }, pos2: { lat: number; lng: number }) => {\n    const R = 6371000; // Earth's radius in meters\n    const lat1Rad = pos1.lat * Math.PI / 180;\n    const lat2Rad = pos2.lat * Math.PI / 180;\n    const deltaLat = (pos2.lat - pos1.lat) * Math.PI / 180;\n    const deltaLng = (pos2.lng - pos1.lng) * Math.PI / 180;\n\n    const a = Math.sin(deltaLat / 2) * Math.sin(deltaLat / 2) +\n              Math.cos(lat1Rad) * Math.cos(lat2Rad) *\n              Math.sin(deltaLng / 2) * Math.sin(deltaLng / 2);\n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n\n    return R * c;\n  };\n\n  const handleQuickAssign = async (droneId: string) => {\n    setAssigning(true);\n    try {\n      await assignMissionToDrone(mission.id, droneId);\n      onAssigned?.(mission.id, droneId);\n      setShowOptions(false);\n    } catch (error) {\n      console.error('Failed to assign mission:', error);\n    } finally {\n      setAssigning(false);\n    }\n  };\n\n  const availableDrones = getAvailableDrones();\n  const bestDrone = getBestDrone();\n\n  if (mission.assignedDrone) {\n    const assignedDrone = drones.find(d => d.id === mission.assignedDrone);\n    return (\n      <div className={`flex items-center gap-2 text-sm ${className}`}>\n        <CheckCircleIcon className=\"w-4 h-4 text-status-operational\" />\n        <span className=\"text-text-secondary\">Assigned to:</span>\n        <span className=\"text-text-primary font-medium\">\n          {assignedDrone?.name || mission.assignedDrone}\n        </span>\n      </div>\n    );\n  }\n\n  if (availableDrones.length === 0) {\n    return (\n      <div className={`flex items-center gap-2 text-sm text-status-critical ${className}`}>\n        <XCircleIcon className=\"w-4 h-4\" />\n        <span>No available drones</span>\n      </div>\n    );\n  }\n\n  return (\n    <div className={`relative ${className}`}>\n      {!showOptions ? (\n        <div className=\"flex items-center gap-2\">\n          {bestDrone && (\n            <>\n              <button\n                onClick={() => handleQuickAssign(bestDrone.id)}\n                disabled={assigning}\n                className=\"flex items-center gap-2 px-3 py-2 bg-status-active hover:bg-status-active/80 \n                         text-white rounded-lg text-sm font-medium transition-colors\n                         disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                {assigning ? (\n                  <>\n                    <div className=\"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin\" />\n                    Assigning...\n                  </>\n                ) : (\n                  <>\n                    <UserIcon className=\"w-4 h-4\" />\n                    Auto-assign to {bestDrone.name}\n                  </>\n                )}\n              </button>\n              \n              <button\n                onClick={() => setShowOptions(true)}\n                className=\"px-3 py-2 border border-dark-border hover:border-dark-hover \n                         text-text-secondary hover:text-text-primary rounded-lg text-sm transition-colors\"\n              >\n                Choose Drone ({availableDrones.length} available)\n              </button>\n            </>\n          )}\n        </div>\n      ) : (\n        <motion.div\n          initial={{ opacity: 0, y: -10 }}\n          animate={{ opacity: 1, y: 0 }}\n          className=\"absolute top-0 left-0 z-10 bg-dark-secondary border border-dark-border \n                     rounded-lg shadow-lg p-3 min-w-80\"\n        >\n          <div className=\"flex items-center justify-between mb-3\">\n            <h4 className=\"font-medium text-text-primary\">Choose Drone</h4>\n            <button\n              onClick={() => setShowOptions(false)}\n              className=\"text-text-secondary hover:text-text-primary\"\n            >\n              <XCircleIcon className=\"w-4 h-4\" />\n            </button>\n          </div>\n\n          <div className=\"space-y-2 max-h-60 overflow-y-auto\">\n            {availableDrones.map(drone => {\n              const isBest = drone.id === bestDrone?.id;\n              const hasWarning = drone.batteryLevel < 50 || drone.signalStrength < 70;\n              \n              return (\n                <button\n                  key={drone.id}\n                  onClick={() => handleQuickAssign(drone.id)}\n                  disabled={assigning}\n                  className=\"w-full p-3 text-left border border-dark-border hover:border-dark-hover \n                           rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed\n                           hover:bg-dark-hover\"\n                >\n                  <div className=\"flex items-center justify-between mb-2\">\n                    <div className=\"flex items-center gap-2\">\n                      <span className=\"font-medium text-text-primary\">{drone.name}</span>\n                      {isBest && (\n                        <span className=\"px-2 py-0.5 bg-status-active text-white text-xs rounded-full\">\n                          Best Match\n                        </span>\n                      )}\n                    </div>\n                    {hasWarning && (\n                      <ExclamationTriangleIcon className=\"w-4 h-4 text-status-warning\" />\n                    )}\n                  </div>\n                  \n                  <div className=\"grid grid-cols-3 gap-2 text-xs text-text-secondary\">\n                    <div>\n                      <span className=\"text-text-secondary\">Battery:</span>\n                      <div className={`font-medium ${\n                        drone.batteryLevel > 70 ? 'text-status-operational' : \n                        drone.batteryLevel > 30 ? 'text-status-warning' : 'text-status-critical'\n                      }`}>\n                        {drone.batteryLevel}%\n                      </div>\n                    </div>\n                    <div>\n                      <span className=\"text-text-secondary\">Signal:</span>\n                      <div className=\"text-text-primary font-medium\">{drone.signalStrength}%</div>\n                    </div>\n                    <div>\n                      <span className=\"text-text-secondary\">Status:</span>\n                      <div className=\"text-text-primary font-medium capitalize\">{drone.status}</div>\n                    </div>\n                  </div>\n                  \n                  {mission.waypoints && mission.waypoints.length > 0 && (\n                    <div className=\"mt-2 text-xs text-text-secondary\">\n                      Distance to start: {(calculateDistance(drone.position, mission.waypoints[0].position) / 1000).toFixed(1)}km\n                    </div>\n                  )}\n                </button>\n              );\n            })}\n          </div>\n        </motion.div>\n      )}\n    </div>\n  );\n};\n\nexport default QuickAssignment;","import React, { useState } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport {\n  PlusIcon,\n  MagnifyingGlassIcon,\n  FunnelIcon,\n  EyeIcon,\n  PencilIcon,\n  TrashIcon,\n  PlayIcon,\n  PauseIcon,\n  StopIcon,\n  UserIcon\n} from '@heroicons/react/24/outline';\nimport { MissionData } from '@/types/fleet';\nimport useMissionStore from '@/store/mission';\nimport MissionCreator from '../MissionCreator';\nimport DroneAssignment from '../DroneAssignment';\nimport QuickAssignment from '../QuickAssignment';\n\ninterface MissionListProps {\n  className?: string;\n}\n\nconst MissionList: React.FC<MissionListProps> = ({ className = '' }) => {\n  const {\n    missions,\n    missionStats,\n    selectedMissionId,\n    selectMission,\n    deleteMission,\n    updateMission\n  } = useMissionStore();\n\n  const [showCreator, setShowCreator] = useState(false);\n  const [selectedMissionForAssignment, setSelectedMissionForAssignment] = useState<MissionData | null>(null);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [statusFilter, setStatusFilter] = useState<'all' | MissionData['status']>('all');\n  const [priorityFilter, setPriorityFilter] = useState<'all' | 'high' | 'medium' | 'low'>('all');\n\n  // Convert missions object to array\n  const missionList = Object.values(missions);\n\n  // Filter missions\n  const filteredMissions = missionList.filter(mission => {\n    // Search filter\n    if (searchQuery && !mission.name.toLowerCase().includes(searchQuery.toLowerCase()) &&\n        !mission.description?.toLowerCase().includes(searchQuery.toLowerCase())) {\n      return false;\n    }\n\n    // Status filter\n    if (statusFilter !== 'all' && mission.status !== statusFilter) {\n      return false;\n    }\n\n    // Priority filter\n    if (priorityFilter !== 'all') {\n      if (priorityFilter === 'high' && mission.priority < 7) return false;\n      if (priorityFilter === 'medium' && (mission.priority < 4 || mission.priority > 6)) return false;\n      if (priorityFilter === 'low' && mission.priority > 3) return false;\n    }\n\n    return true;\n  });\n\n  // Sort missions (active first, then by priority, then by creation date)\n  const sortedMissions = [...filteredMissions].sort((a, b) => {\n    // Active missions first\n    if (a.status === 'active' && b.status !== 'active') return -1;\n    if (b.status === 'active' && a.status !== 'active') return 1;\n    \n    // Then by priority (high to low)\n    if (a.priority !== b.priority) return b.priority - a.priority;\n    \n    // Then by creation date (newest first)\n    return new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime();\n  });\n\n  const getStatusColor = (status: MissionData['status']) => {\n    switch (status) {\n      case 'active': return 'text-status-operational bg-status-operational/10 border-status-operational/20';\n      case 'completed': return 'text-status-active bg-status-active/10 border-status-active/20';\n      case 'pending': return 'text-status-warning bg-status-warning/10 border-status-warning/20';\n      case 'failed': return 'text-status-critical bg-status-critical/10 border-status-critical/20';\n      case 'cancelled': return 'text-text-secondary bg-text-secondary/10 border-text-secondary/20';\n      case 'paused': return 'text-status-warning bg-status-warning/10 border-status-warning/20';\n      default: return 'text-text-secondary bg-text-secondary/10 border-text-secondary/20';\n    }\n  };\n\n  const getPriorityColor = (priority: number) => {\n    if (priority >= 8) return 'text-red-400';\n    if (priority >= 6) return 'text-orange-400';\n    if (priority >= 4) return 'text-yellow-400';\n    return 'text-blue-400';\n  };\n\n  const handleStatusChange = async (mission: MissionData, newStatus: MissionData['status']) => {\n    try {\n      await updateMission(mission.id, { status: newStatus });\n    } catch (error) {\n      console.error('Failed to update mission status:', error);\n    }\n  };\n\n  const handleDelete = async (missionId: string) => {\n    if (window.confirm('Are you sure you want to delete this mission?')) {\n      try {\n        await deleteMission(missionId);\n      } catch (error) {\n        console.error('Failed to delete mission:', error);\n      }\n    }\n  };\n\n  const formatDate = (dateString: string) => {\n    return new Date(dateString).toLocaleDateString('en-US', {\n      month: 'short',\n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n\n  const formatDuration = (seconds: number | null) => {\n    if (!seconds) return 'N/A';\n    const hours = Math.floor(seconds / 3600);\n    const minutes = Math.floor((seconds % 3600) / 60);\n    return hours > 0 ? `${hours}h ${minutes}m` : `${minutes}m`;\n  };\n\n  return (\n    <div className={`space-y-6 ${className}`}>\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-2xl font-bold text-text-primary\">Missions</h2>\n          <p className=\"text-text-secondary mt-1\">\n            {missionList.length} total missions\n            {missionStats && (\n              <span className=\"ml-4\">\n                {missionStats.active} active  {missionStats.completed} completed  {missionStats.pending} pending\n              </span>\n            )}\n          </p>\n        </div>\n        \n        <button\n          onClick={() => setShowCreator(true)}\n          className=\"flex items-center gap-2 px-4 py-2 bg-status-active hover:bg-status-active/80 \n                   text-white rounded-lg font-medium transition-colors\"\n        >\n          <PlusIcon className=\"w-5 h-5\" />\n          New Mission\n        </button>\n      </div>\n\n      {/* Filters */}\n      <div className=\"flex items-center gap-4 p-4 bg-dark-secondary rounded-lg border border-dark-border\">\n        {/* Search */}\n        <div className=\"relative flex-1\">\n          <MagnifyingGlassIcon className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-text-secondary\" />\n          <input\n            type=\"text\"\n            placeholder=\"Search missions...\"\n            value={searchQuery}\n            onChange={(e) => setSearchQuery(e.target.value)}\n            className=\"w-full pl-10 pr-4 py-2 bg-dark-tertiary border border-dark-border rounded-lg\n                     text-text-primary placeholder-text-secondary focus:outline-none \n                     focus:ring-2 focus:ring-status-active\"\n          />\n        </div>\n\n        {/* Status Filter */}\n        <select\n          value={statusFilter}\n          onChange={(e) => setStatusFilter(e.target.value as any)}\n          className=\"px-3 py-2 bg-dark-tertiary border border-dark-border rounded-lg\n                   text-text-primary focus:outline-none focus:ring-2 focus:ring-status-active\"\n        >\n          <option value=\"all\">All Status</option>\n          <option value=\"active\">Active</option>\n          <option value=\"pending\">Pending</option>\n          <option value=\"completed\">Completed</option>\n          <option value=\"paused\">Paused</option>\n          <option value=\"failed\">Failed</option>\n          <option value=\"cancelled\">Cancelled</option>\n        </select>\n\n        {/* Priority Filter */}\n        <select\n          value={priorityFilter}\n          onChange={(e) => setPriorityFilter(e.target.value as any)}\n          className=\"px-3 py-2 bg-dark-tertiary border border-dark-border rounded-lg\n                   text-text-primary focus:outline-none focus:ring-2 focus:ring-status-active\"\n        >\n          <option value=\"all\">All Priority</option>\n          <option value=\"high\">High (7-10)</option>\n          <option value=\"medium\">Medium (4-6)</option>\n          <option value=\"low\">Low (1-3)</option>\n        </select>\n\n        <div className=\"flex items-center text-text-secondary\">\n          <FunnelIcon className=\"w-4 h-4 mr-2\" />\n          {filteredMissions.length} of {missionList.length}\n        </div>\n      </div>\n\n      {/* Mission List */}\n      <div className=\"space-y-3\">\n        <AnimatePresence>\n          {sortedMissions.map(mission => (\n            <motion.div\n              key={mission.id}\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              exit={{ opacity: 0, y: -20 }}\n              className={`p-4 bg-dark-secondary rounded-lg border border-dark-border\n                        hover:border-dark-hover transition-colors cursor-pointer\n                        ${selectedMissionId === mission.id ? 'ring-2 ring-status-active' : ''}`}\n              onClick={() => selectMission(selectedMissionId === mission.id ? null : mission.id)}\n            >\n              <div className=\"flex items-start justify-between\">\n                <div className=\"flex-1\">\n                  {/* Mission Header */}\n                  <div className=\"flex items-center gap-3 mb-2\">\n                    <h3 className=\"text-lg font-semibold text-text-primary\">{mission.name}</h3>\n                    \n                    <span className={`px-2 py-1 rounded-full text-xs font-medium border ${getStatusColor(mission.status)}`}>\n                      {mission.status.toUpperCase()}\n                    </span>\n                    \n                    <span className={`text-sm font-medium ${getPriorityColor(mission.priority)}`}>\n                      Priority {mission.priority}\n                    </span>\n                  </div>\n\n                  {/* Description */}\n                  {mission.description && (\n                    <p className=\"text-text-secondary text-sm mb-3 line-clamp-2\">\n                      {mission.description}\n                    </p>\n                  )}\n\n                  {/* Mission Details */}\n                  <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-4 text-sm\">\n                    <div>\n                      <span className=\"text-text-secondary\">Waypoints:</span>\n                      <div className=\"text-text-primary font-medium\">{mission.waypoints?.length || 0}</div>\n                    </div>\n                    \n                    <div>\n                      <span className=\"text-text-secondary\">Progress:</span>\n                      <div className=\"text-text-primary font-medium\">\n                        {mission.progress}%\n                        {mission.status === 'active' && (\n                          <div className=\"w-full bg-dark-border rounded-full h-1.5 mt-1\">\n                            <div \n                              className=\"bg-status-active h-1.5 rounded-full transition-all duration-300\"\n                              style={{ width: `${mission.progress}%` }}\n                            />\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                    \n                    <div>\n                      <span className=\"text-text-secondary\">\n                        {mission.assignedDrone ? 'Assigned:' : 'Created:'}\n                      </span>\n                      <div className=\"text-text-primary font-medium\">\n                        {mission.assignedDrone || formatDate(mission.createdAt)}\n                      </div>\n                    </div>\n                    \n                    <div>\n                      <span className=\"text-text-secondary\">Duration:</span>\n                      <div className=\"text-text-primary font-medium\">\n                        {mission.actualDuration \n                          ? formatDuration(mission.actualDuration)\n                          : mission.estimatedDuration \n                            ? `~${formatDuration(mission.estimatedDuration)}`\n                            : 'N/A'\n                        }\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Assignment Section */}\n                  {mission.status === 'pending' && (\n                    <div className=\"mt-4 pt-3 border-t border-dark-border\">\n                      <QuickAssignment\n                        mission={mission}\n                        onAssigned={() => {\n                          console.log('Mission assigned successfully');\n                        }}\n                      />\n                    </div>\n                  )}\n                </div>\n\n                {/* Actions */}\n                <div className=\"flex items-center gap-2 ml-4\">\n                  {/* Status Controls */}\n                  {mission.status === 'pending' && (\n                    <button\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        handleStatusChange(mission, 'active');\n                      }}\n                      className=\"p-2 text-status-operational hover:bg-status-operational/10 rounded-lg transition-colors\"\n                      title=\"Start mission\"\n                    >\n                      <PlayIcon className=\"w-4 h-4\" />\n                    </button>\n                  )}\n                  \n                  {mission.status === 'active' && (\n                    <>\n                      <button\n                        onClick={(e) => {\n                          e.stopPropagation();\n                          handleStatusChange(mission, 'paused');\n                        }}\n                        className=\"p-2 text-status-warning hover:bg-status-warning/10 rounded-lg transition-colors\"\n                        title=\"Pause mission\"\n                      >\n                        <PauseIcon className=\"w-4 h-4\" />\n                      </button>\n                      <button\n                        onClick={(e) => {\n                          e.stopPropagation();\n                          handleStatusChange(mission, 'cancelled');\n                        }}\n                        className=\"p-2 text-status-critical hover:bg-status-critical/10 rounded-lg transition-colors\"\n                        title=\"Stop mission\"\n                      >\n                        <StopIcon className=\"w-4 h-4\" />\n                      </button>\n                    </>\n                  )}\n                  \n                  {mission.status === 'paused' && (\n                    <button\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        handleStatusChange(mission, 'active');\n                      }}\n                      className=\"p-2 text-status-operational hover:bg-status-operational/10 rounded-lg transition-colors\"\n                      title=\"Resume mission\"\n                    >\n                      <PlayIcon className=\"w-4 h-4\" />\n                    </button>\n                  )}\n\n                  {/* Assignment Action */}\n                  {mission.status === 'pending' && !mission.assignedDrone && (\n                    <button\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        setSelectedMissionForAssignment(mission);\n                      }}\n                      className=\"p-2 text-text-secondary hover:text-status-active hover:bg-status-active/10 \n                               rounded-lg transition-colors\"\n                      title=\"Assign to drone\"\n                    >\n                      <UserIcon className=\"w-4 h-4\" />\n                    </button>\n                  )}\n\n                  {/* View/Edit Actions */}\n                  <button\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      selectMission(mission.id);\n                    }}\n                    className=\"p-2 text-text-secondary hover:text-text-primary hover:bg-dark-hover \n                             rounded-lg transition-colors\"\n                    title=\"View details\"\n                  >\n                    <EyeIcon className=\"w-4 h-4\" />\n                  </button>\n\n                  {['pending', 'paused'].includes(mission.status) && (\n                    <button\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        // TODO: Implement edit mission\n                        console.log('Edit mission:', mission.id);\n                      }}\n                      className=\"p-2 text-text-secondary hover:text-status-warning hover:bg-status-warning/10 \n                               rounded-lg transition-colors\"\n                      title=\"Edit mission\"\n                    >\n                      <PencilIcon className=\"w-4 h-4\" />\n                    </button>\n                  )}\n\n                  {!['active'].includes(mission.status) && (\n                    <button\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        handleDelete(mission.id);\n                      }}\n                      className=\"p-2 text-text-secondary hover:text-status-critical hover:bg-status-critical/10 \n                               rounded-lg transition-colors\"\n                      title=\"Delete mission\"\n                    >\n                      <TrashIcon className=\"w-4 h-4\" />\n                    </button>\n                  )}\n                </div>\n              </div>\n            </motion.div>\n          ))}\n        </AnimatePresence>\n      </div>\n\n      {/* Empty State */}\n      {sortedMissions.length === 0 && (\n        <div className=\"text-center py-12\">\n          {searchQuery || statusFilter !== 'all' || priorityFilter !== 'all' ? (\n            <div>\n              <MagnifyingGlassIcon className=\"w-12 h-12 mx-auto text-text-secondary opacity-50 mb-4\" />\n              <h3 className=\"text-lg font-medium text-text-primary mb-2\">No missions found</h3>\n              <p className=\"text-text-secondary mb-4\">No missions match your current filters</p>\n              <button\n                onClick={() => {\n                  setSearchQuery('');\n                  setStatusFilter('all');\n                  setPriorityFilter('all');\n                }}\n                className=\"px-4 py-2 bg-dark-tertiary hover:bg-dark-hover text-text-primary \n                         rounded-lg transition-colors\"\n              >\n                Clear Filters\n              </button>\n            </div>\n          ) : (\n            <div>\n              <PlusIcon className=\"w-12 h-12 mx-auto text-text-secondary opacity-50 mb-4\" />\n              <h3 className=\"text-lg font-medium text-text-primary mb-2\">No missions created</h3>\n              <p className=\"text-text-secondary mb-4\">Create your first mission to get started</p>\n              <button\n                onClick={() => setShowCreator(true)}\n                className=\"px-6 py-2 bg-status-active hover:bg-status-active/80 text-white \n                         rounded-lg font-medium transition-colors\"\n              >\n                Create Mission\n              </button>\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Mission Creator Modal */}\n      <MissionCreator\n        isOpen={showCreator}\n        onClose={() => setShowCreator(false)}\n        onMissionCreated={() => {\n          // Mission will be automatically added to store via WebSocket/API\n          console.log('Mission created successfully');\n        }}\n      />\n\n      {/* Assignment Modal */}\n      {selectedMissionForAssignment && (\n        <DroneAssignment\n          mission={selectedMissionForAssignment}\n          isOpen={true}\n          onClose={() => setSelectedMissionForAssignment(null)}\n          onAssigned={() => {\n            setSelectedMissionForAssignment(null);\n            console.log('Mission assigned successfully');\n          }}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default MissionList;","import React, { useState } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport {\n  RocketLaunchIcon,\n  MapPinIcon,\n  ChartBarIcon,\n  PlusIcon,\n  EyeIcon\n} from '@heroicons/react/24/outline';\nimport useMissionStore, { useSelectedMission } from '@/store/mission';\nimport { useFleetStore } from '@/store/fleet';\nimport MissionCreator from '../MissionCreator';\nimport WaypointManager from '../WaypointManager';\n\ninterface MissionPanelProps {\n  className?: string;\n  compact?: boolean;\n}\n\nconst MissionPanel: React.FC<MissionPanelProps> = ({\n  className = '',\n  compact = false\n}) => {\n  const {\n    missions,\n    activeMissions,\n    missionStats,\n    selectMission,\n    assignMissionToDrone\n  } = useMissionStore();\n  \n  const selectedDrone = useFleetStore((state) => {\n    const droneId = state.selectedDroneId;\n    return droneId ? state.drones[droneId] : null;\n  });\n  \n  const selectedMission = useSelectedMission();\n  const [showCreator, setShowCreator] = useState(false);\n  const [showWaypoints, setShowWaypoints] = useState(false);\n\n  // Get missions for selected drone\n  const droneMissions = selectedDrone \n    ? Object.values(missions).filter(m => m.assignedDrone === selectedDrone.id)\n    : [];\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'active': return 'text-status-operational';\n      case 'completed': return 'text-status-active';\n      case 'pending': return 'text-status-warning';\n      case 'failed': return 'text-status-critical';\n      case 'cancelled': return 'text-text-secondary';\n      case 'paused': return 'text-status-warning';\n      default: return 'text-text-secondary';\n    }\n  };\n\n  const handleAssignToSelectedDrone = async (missionId: string) => {\n    if (!selectedDrone) return;\n    \n    try {\n      await assignMissionToDrone(missionId, selectedDrone.id);\n    } catch (error) {\n      console.error('Failed to assign mission:', error);\n    }\n  };\n\n  const formatDate = (dateString: string) => {\n    return new Date(dateString).toLocaleDateString('en-US', {\n      month: 'short',\n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n\n  if (compact) {\n    return (\n      <div className={`bg-dark-secondary rounded-lg border border-dark-border p-4 ${className}`}>\n        <div className=\"flex items-center justify-between mb-4\">\n          <h3 className=\"font-semibold text-text-primary flex items-center gap-2\">\n            <RocketLaunchIcon className=\"w-5 h-5\" />\n            Missions\n          </h3>\n          <button\n            onClick={() => setShowCreator(true)}\n            className=\"p-1 text-text-secondary hover:text-status-active transition-colors\"\n          >\n            <PlusIcon className=\"w-4 h-4\" />\n          </button>\n        </div>\n\n        {/* Quick Stats */}\n        {missionStats && (\n          <div className=\"grid grid-cols-3 gap-2 mb-4 text-sm\">\n            <div className=\"text-center p-2 bg-dark-tertiary rounded\">\n              <div className=\"text-status-operational font-medium\">{missionStats.active}</div>\n              <div className=\"text-text-secondary text-xs\">Active</div>\n            </div>\n            <div className=\"text-center p-2 bg-dark-tertiary rounded\">\n              <div className=\"text-status-warning font-medium\">{missionStats.pending}</div>\n              <div className=\"text-text-secondary text-xs\">Pending</div>\n            </div>\n            <div className=\"text-center p-2 bg-dark-tertiary rounded\">\n              <div className=\"text-status-active font-medium\">{missionStats.today}</div>\n              <div className=\"text-text-secondary text-xs\">Today</div>\n            </div>\n          </div>\n        )}\n\n        {/* Active Missions */}\n        <div className=\"space-y-2\">\n          {activeMissions.slice(0, 3).map(mission => (\n            <div\n              key={mission.id}\n              className=\"p-2 bg-dark-tertiary rounded cursor-pointer hover:bg-dark-hover transition-colors\"\n              onClick={() => selectMission(mission.id)}\n            >\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex-1\">\n                  <div className=\"font-medium text-text-primary text-sm truncate\">\n                    {mission.name}\n                  </div>\n                  <div className=\"text-xs text-text-secondary\">\n                    {mission.assignedDrone || 'Unassigned'}  {mission.progress}%\n                  </div>\n                </div>\n                <div className=\"w-8 h-1 bg-dark-border rounded-full overflow-hidden\">\n                  <div \n                    className=\"h-full bg-status-active transition-all\"\n                    style={{ width: `${mission.progress}%` }}\n                  />\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n\n        {activeMissions.length === 0 && (\n          <div className=\"text-center text-text-secondary text-sm py-4\">\n            No active missions\n          </div>\n        )}\n\n        <MissionCreator\n          isOpen={showCreator}\n          onClose={() => setShowCreator(false)}\n        />\n      </div>\n    );\n  }\n\n  return (\n    <div className={`bg-dark-secondary rounded-lg border border-dark-border ${className}`}>\n      {/* Header */}\n      <div className=\"p-4 border-b border-dark-border\">\n        <div className=\"flex items-center justify-between mb-2\">\n          <h2 className=\"text-lg font-semibold text-text-primary flex items-center gap-2\">\n            <RocketLaunchIcon className=\"w-6 h-6\" />\n            Mission Control\n          </h2>\n          <button\n            onClick={() => setShowCreator(true)}\n            className=\"px-3 py-1 bg-status-active hover:bg-status-active/80 text-white \n                     rounded text-sm font-medium transition-colors flex items-center gap-1\"\n          >\n            <PlusIcon className=\"w-4 h-4\" />\n            New\n          </button>\n        </div>\n\n        {/* Stats */}\n        {missionStats && (\n          <div className=\"grid grid-cols-4 gap-3 text-sm\">\n            <div className=\"text-center\">\n              <div className=\"text-status-operational font-medium\">{missionStats.active}</div>\n              <div className=\"text-text-secondary text-xs\">Active</div>\n            </div>\n            <div className=\"text-center\">\n              <div className=\"text-status-warning font-medium\">{missionStats.pending}</div>\n              <div className=\"text-text-secondary text-xs\">Pending</div>\n            </div>\n            <div className=\"text-center\">\n              <div className=\"text-status-active font-medium\">{missionStats.completed}</div>\n              <div className=\"text-text-secondary text-xs\">Completed</div>\n            </div>\n            <div className=\"text-center\">\n              <div className=\"text-text-primary font-medium\">{missionStats.today}</div>\n              <div className=\"text-text-secondary text-xs\">Today</div>\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Content */}\n      <div className=\"p-4 space-y-4\">\n        {/* Selected Mission Details */}\n        {selectedMission ? (\n          <div className=\"space-y-4\">\n            <div className=\"flex items-start justify-between\">\n              <div>\n                <h3 className=\"text-lg font-semibold text-text-primary\">{selectedMission.name}</h3>\n                <p className=\"text-sm text-text-secondary\">{selectedMission.description}</p>\n              </div>\n              <span className={`px-2 py-1 rounded text-xs font-medium ${getStatusColor(selectedMission.status)}`}>\n                {selectedMission.status.toUpperCase()}\n              </span>\n            </div>\n\n            {/* Mission Progress */}\n            <div className=\"space-y-2\">\n              <div className=\"flex justify-between text-sm\">\n                <span className=\"text-text-secondary\">Progress</span>\n                <span className=\"text-text-primary font-medium\">{selectedMission.progress}%</span>\n              </div>\n              <div className=\"w-full bg-dark-border rounded-full h-2\">\n                <div \n                  className=\"bg-status-active h-2 rounded-full transition-all duration-300\"\n                  style={{ width: `${selectedMission.progress}%` }}\n                />\n              </div>\n            </div>\n\n            {/* Mission Info */}\n            <div className=\"grid grid-cols-2 gap-4 text-sm\">\n              <div>\n                <span className=\"text-text-secondary\">Priority:</span>\n                <div className=\"text-text-primary font-medium\">Level {selectedMission.priority}</div>\n              </div>\n              <div>\n                <span className=\"text-text-secondary\">Waypoints:</span>\n                <div className=\"text-text-primary font-medium\">{selectedMission.waypoints?.length || 0}</div>\n              </div>\n              <div>\n                <span className=\"text-text-secondary\">Assigned:</span>\n                <div className=\"text-text-primary font-medium\">\n                  {selectedMission.assignedDrone || 'Unassigned'}\n                </div>\n              </div>\n              <div>\n                <span className=\"text-text-secondary\">Created:</span>\n                <div className=\"text-text-primary font-medium\">\n                  {formatDate(selectedMission.createdAt)}\n                </div>\n              </div>\n            </div>\n\n            {/* Actions */}\n            <div className=\"flex gap-2\">\n              {selectedMission.waypoints && selectedMission.waypoints.length > 0 && (\n                <button\n                  onClick={() => setShowWaypoints(!showWaypoints)}\n                  className=\"flex items-center gap-1 px-3 py-2 bg-dark-tertiary hover:bg-dark-hover \n                           text-text-primary rounded text-sm transition-colors\"\n                >\n                  <MapPinIcon className=\"w-4 h-4\" />\n                  {showWaypoints ? 'Hide' : 'Show'} Waypoints\n                </button>\n              )}\n\n              {selectedDrone && selectedMission.status === 'pending' && !selectedMission.assignedDrone && (\n                <button\n                  onClick={() => handleAssignToSelectedDrone(selectedMission.id)}\n                  className=\"flex items-center gap-1 px-3 py-2 bg-status-active hover:bg-status-active/80 \n                           text-white rounded text-sm transition-colors\"\n                >\n                  Assign to {selectedDrone.name}\n                </button>\n              )}\n            </div>\n\n            {/* Waypoints */}\n            <AnimatePresence>\n              {showWaypoints && selectedMission.waypoints && (\n                <motion.div\n                  initial={{ opacity: 0, height: 0 }}\n                  animate={{ opacity: 1, height: 'auto' }}\n                  exit={{ opacity: 0, height: 0 }}\n                  className=\"border-t border-dark-border pt-4\"\n                >\n                  <WaypointManager\n                    waypoints={selectedMission.waypoints}\n                    onWaypointsChange={() => {}} // Read-only in this view\n                    disabled={true}\n                  />\n                </motion.div>\n              )}\n            </AnimatePresence>\n          </div>\n        ) : selectedDrone && droneMissions.length > 0 ? (\n          // Show drone missions\n          <div className=\"space-y-3\">\n            <h3 className=\"font-medium text-text-primary\">\n              {selectedDrone.name} Missions ({droneMissions.length})\n            </h3>\n            {droneMissions.map(mission => (\n              <div\n                key={mission.id}\n                className=\"p-3 bg-dark-tertiary rounded-lg cursor-pointer hover:bg-dark-hover transition-colors\"\n                onClick={() => selectMission(mission.id)}\n              >\n                <div className=\"flex items-start justify-between\">\n                  <div className=\"flex-1\">\n                    <h4 className=\"font-medium text-text-primary\">{mission.name}</h4>\n                    <p className=\"text-sm text-text-secondary truncate\">{mission.description}</p>\n                    <div className=\"flex items-center gap-4 mt-2 text-xs text-text-secondary\">\n                      <span>Priority {mission.priority}</span>\n                      <span>{mission.waypoints?.length || 0} waypoints</span>\n                      <span>{mission.progress}% complete</span>\n                    </div>\n                  </div>\n                  <div className=\"flex flex-col items-end gap-1\">\n                    <span className={`px-2 py-1 rounded text-xs ${getStatusColor(mission.status)}`}>\n                      {mission.status}\n                    </span>\n                    <button\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        selectMission(mission.id);\n                      }}\n                      className=\"p-1 text-text-secondary hover:text-text-primary transition-colors\"\n                    >\n                      <EyeIcon className=\"w-4 h-4\" />\n                    </button>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        ) : (\n          // Empty state\n          <div className=\"text-center py-8\">\n            {selectedDrone ? (\n              <div>\n                <RocketLaunchIcon className=\"w-12 h-12 mx-auto text-text-secondary opacity-50 mb-4\" />\n                <h3 className=\"text-lg font-medium text-text-primary mb-2\">No missions assigned</h3>\n                <p className=\"text-text-secondary mb-4\">\n                  {selectedDrone.name} has no missions assigned\n                </p>\n                <button\n                  onClick={() => setShowCreator(true)}\n                  className=\"px-4 py-2 bg-status-active hover:bg-status-active/80 text-white \n                           rounded-lg font-medium transition-colors\"\n                >\n                  Create Mission\n                </button>\n              </div>\n            ) : (\n              <div>\n                <ChartBarIcon className=\"w-12 h-12 mx-auto text-text-secondary opacity-50 mb-4\" />\n                <h3 className=\"text-lg font-medium text-text-primary mb-2\">Mission Overview</h3>\n                <p className=\"text-text-secondary mb-4\">\n                  Select a drone to view its missions or create a new mission\n                </p>\n                <div className=\"grid grid-cols-2 gap-3 text-sm\">\n                  <div className=\"p-3 bg-dark-tertiary rounded\">\n                    <div className=\"text-status-operational font-medium text-lg\">\n                      {activeMissions.length}\n                    </div>\n                    <div className=\"text-text-secondary\">Active Missions</div>\n                  </div>\n                  <div className=\"p-3 bg-dark-tertiary rounded\">\n                    <div className=\"text-text-primary font-medium text-lg\">\n                      {Object.keys(missions).length}\n                    </div>\n                    <div className=\"text-text-secondary\">Total Missions</div>\n                  </div>\n                </div>\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n\n      {/* Mission Creator Modal */}\n      <MissionCreator\n        isOpen={showCreator}\n        onClose={() => setShowCreator(false)}\n      />\n    </div>\n  );\n};\n\nexport default MissionPanel;","import React, { useState, useMemo } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport {\n  UserIcon,\n  ArrowPathIcon,\n  XMarkIcon,\n  CheckCircleIcon,\n  ClockIcon,\n  ExclamationTriangleIcon\n} from '@heroicons/react/24/outline';\nimport { MissionData, DroneData } from '@/types/fleet';\nimport { useFleetStore } from '@/store/fleet';\nimport useMissionStore from '@/store/mission';\nimport DroneAssignment from '../DroneAssignment';\n\ninterface AssignmentManagerProps {\n  className?: string;\n}\n\ninterface Assignment {\n  mission: MissionData;\n  drone: DroneData | null;\n  status: 'assigned' | 'unassigned' | 'conflict';\n  issues: string[];\n}\n\nconst AssignmentManager: React.FC<AssignmentManagerProps> = ({ className = '' }) => {\n  const drones = useFleetStore((state) => Object.values(state.drones));\n  const dronesMap = useFleetStore((state) => state.drones);\n  const { missions, updateMission } = useMissionStore();\n  \n  const [selectedMissionForAssignment, setSelectedMissionForAssignment] = useState<MissionData | null>(null);\n  const [filter, setFilter] = useState<'all' | 'assigned' | 'unassigned' | 'issues'>('all');\n\n  // Create assignment data\n  const assignments = useMemo<Assignment[]>(() => {\n    return Object.values(missions)\n      .filter(mission => ['pending', 'active', 'paused'].includes(mission.status))\n      .map(mission => {\n        const drone = mission.assignedDrone ? dronesMap[mission.assignedDrone] : null;\n        const issues: string[] = [];\n        let status: Assignment['status'] = 'unassigned';\n\n        if (mission.assignedDrone) {\n          if (!drone) {\n            issues.push('Assigned drone not found');\n            status = 'conflict';\n          } else {\n            status = 'assigned';\n            \n            // Check drone health\n            if (drone.status === 'maintenance' || drone.status === 'emergency') {\n              issues.push(`Drone is in ${drone.status} mode`);\n              status = 'conflict';\n            }\n            \n            if (drone.batteryLevel < 20) {\n              issues.push(`Critical battery: ${drone.batteryLevel}%`);\n              status = 'conflict';\n            } else if (drone.batteryLevel < 30) {\n              issues.push(`Low battery: ${drone.batteryLevel}%`);\n            }\n            \n            if (drone.signalStrength < 30) {\n              issues.push(`Poor signal: ${drone.signalStrength}%`);\n            }\n          }\n        }\n\n        return {\n          mission,\n          drone,\n          status,\n          issues\n        };\n      })\n      .sort((a, b) => {\n        // Sort by priority first, then by status issues\n        if (a.mission.priority !== b.mission.priority) {\n          return b.mission.priority - a.mission.priority;\n        }\n        \n        if (a.status !== b.status) {\n          const statusOrder = { conflict: 0, unassigned: 1, assigned: 2 };\n          return statusOrder[a.status] - statusOrder[b.status];\n        }\n        \n        return new Date(b.mission.createdAt).getTime() - new Date(a.mission.createdAt).getTime();\n      });\n  }, [missions, dronesMap]);\n\n  // Filter assignments\n  const filteredAssignments = assignments.filter(assignment => {\n    switch (filter) {\n      case 'assigned':\n        return assignment.status === 'assigned' && assignment.issues.length === 0;\n      case 'unassigned':\n        return assignment.status === 'unassigned';\n      case 'issues':\n        return assignment.status === 'conflict' || assignment.issues.length > 0;\n      default:\n        return true;\n    }\n  });\n\n  const getStatusIcon = (assignment: Assignment) => {\n    switch (assignment.status) {\n      case 'assigned':\n        return assignment.issues.length > 0 \n          ? <ExclamationTriangleIcon className=\"w-5 h-5 text-status-warning\" />\n          : <CheckCircleIcon className=\"w-5 h-5 text-status-operational\" />;\n      case 'conflict':\n        return <XMarkIcon className=\"w-5 h-5 text-status-critical\" />;\n      case 'unassigned':\n      default:\n        return <ClockIcon className=\"w-5 h-5 text-text-secondary\" />;\n    }\n  };\n\n  const getStatusColor = (assignment: Assignment) => {\n    switch (assignment.status) {\n      case 'assigned':\n        return assignment.issues.length > 0 \n          ? 'border-status-warning bg-status-warning/5'\n          : 'border-status-operational bg-status-operational/5';\n      case 'conflict':\n        return 'border-status-critical bg-status-critical/5';\n      case 'unassigned':\n      default:\n        return 'border-text-secondary bg-text-secondary/5';\n    }\n  };\n\n  const handleUnassign = async (missionId: string) => {\n    try {\n      await updateMission(missionId, { assignedDrone: undefined });\n    } catch (error) {\n      console.error('Failed to unassign mission:', error);\n    }\n  };\n\n  const getAvailableDronesCount = () => {\n    return drones.filter(drone => {\n      // Must be operational\n      if (['maintenance', 'emergency'].includes(drone.status)) return false;\n      \n      // Must have sufficient battery\n      if (drone.batteryLevel < 30) return false;\n      \n      // Must not have active mission\n      const hasActiveMission = Object.values(missions).some(m => \n        m.assignedDrone === drone.id && ['pending', 'active', 'paused'].includes(m.status)\n      );\n      \n      return !hasActiveMission;\n    }).length;\n  };\n\n  const stats = {\n    total: assignments.length,\n    assigned: assignments.filter(a => a.status === 'assigned' && a.issues.length === 0).length,\n    unassigned: assignments.filter(a => a.status === 'unassigned').length,\n    issues: assignments.filter(a => a.status === 'conflict' || a.issues.length > 0).length,\n    availableDrones: getAvailableDronesCount()\n  };\n\n  return (\n    <div className={`space-y-6 ${className}`}>\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-2xl font-bold text-text-primary\">Assignment Manager</h2>\n          <p className=\"text-text-secondary mt-1\">\n            Manage mission-to-drone assignments  {stats.availableDrones} drones available\n          </p>\n        </div>\n      </div>\n\n      {/* Stats */}\n      <div className=\"grid grid-cols-4 gap-4\">\n        <div className=\"bg-dark-secondary rounded-lg border border-dark-border p-4 text-center\">\n          <div className=\"text-2xl font-bold text-text-primary\">{stats.total}</div>\n          <div className=\"text-sm text-text-secondary\">Total Missions</div>\n        </div>\n        <div className=\"bg-dark-secondary rounded-lg border border-dark-border p-4 text-center\">\n          <div className=\"text-2xl font-bold text-status-operational\">{stats.assigned}</div>\n          <div className=\"text-sm text-text-secondary\">Assigned</div>\n        </div>\n        <div className=\"bg-dark-secondary rounded-lg border border-dark-border p-4 text-center\">\n          <div className=\"text-2xl font-bold text-text-secondary\">{stats.unassigned}</div>\n          <div className=\"text-sm text-text-secondary\">Unassigned</div>\n        </div>\n        <div className=\"bg-dark-secondary rounded-lg border border-dark-border p-4 text-center\">\n          <div className=\"text-2xl font-bold text-status-warning\">{stats.issues}</div>\n          <div className=\"text-sm text-text-secondary\">Issues</div>\n        </div>\n      </div>\n\n      {/* Filters */}\n      <div className=\"flex items-center gap-4 p-4 bg-dark-secondary rounded-lg border border-dark-border\">\n        <span className=\"text-text-secondary font-medium\">Filter:</span>\n        <div className=\"flex gap-2\">\n          {[\n            { value: 'all', label: `All (${stats.total})` },\n            { value: 'assigned', label: `Assigned (${stats.assigned})` },\n            { value: 'unassigned', label: `Unassigned (${stats.unassigned})` },\n            { value: 'issues', label: `Issues (${stats.issues})` }\n          ].map(option => (\n            <button\n              key={option.value}\n              onClick={() => setFilter(option.value as any)}\n              className={`px-3 py-2 rounded-lg text-sm font-medium transition-colors ${\n                filter === option.value\n                  ? 'bg-status-active text-white'\n                  : 'text-text-secondary hover:text-text-primary hover:bg-dark-hover'\n              }`}\n            >\n              {option.label}\n            </button>\n          ))}\n        </div>\n      </div>\n\n      {/* Assignment List */}\n      <div className=\"space-y-3\">\n        <AnimatePresence>\n          {filteredAssignments.map(assignment => (\n            <motion.div\n              key={assignment.mission.id}\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              exit={{ opacity: 0, y: -20 }}\n              className={`p-6 rounded-lg border-2 transition-all ${getStatusColor(assignment)}`}\n            >\n              <div className=\"flex items-start justify-between\">\n                <div className=\"flex-1\">\n                  {/* Header */}\n                  <div className=\"flex items-center gap-3 mb-3\">\n                    {getStatusIcon(assignment)}\n                    <div>\n                      <h3 className=\"text-lg font-semibold text-text-primary\">\n                        {assignment.mission.name}\n                      </h3>\n                      <p className=\"text-sm text-text-secondary\">\n                        Priority {assignment.mission.priority}  {assignment.mission.waypoints?.length || 0} waypoints\n                      </p>\n                    </div>\n                  </div>\n\n                  {/* Assignment Status */}\n                  <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-4\">\n                    <div>\n                      <h4 className=\"font-medium text-text-primary mb-2\">Mission Status</h4>\n                      <div className=\"space-y-1 text-sm\">\n                        <div className=\"flex justify-between\">\n                          <span className=\"text-text-secondary\">Status:</span>\n                          <span className=\"text-text-primary capitalize\">{assignment.mission.status}</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span className=\"text-text-secondary\">Progress:</span>\n                          <span className=\"text-text-primary\">{assignment.mission.progress}%</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span className=\"text-text-secondary\">Created:</span>\n                          <span className=\"text-text-primary\">\n                            {new Date(assignment.mission.createdAt).toLocaleDateString()}\n                          </span>\n                        </div>\n                      </div>\n                    </div>\n\n                    <div>\n                      <h4 className=\"font-medium text-text-primary mb-2\">Assignment</h4>\n                      <div className=\"space-y-1 text-sm\">\n                        {assignment.drone ? (\n                          <>\n                            <div className=\"flex justify-between\">\n                              <span className=\"text-text-secondary\">Assigned to:</span>\n                              <span className=\"text-text-primary font-medium\">{assignment.drone.name}</span>\n                            </div>\n                            <div className=\"flex justify-between\">\n                              <span className=\"text-text-secondary\">Drone Status:</span>\n                              <span className=\"text-text-primary capitalize\">{assignment.drone.status}</span>\n                            </div>\n                            <div className=\"flex justify-between\">\n                              <span className=\"text-text-secondary\">Battery:</span>\n                              <span className={`font-medium ${\n                                assignment.drone.batteryLevel > 70 ? 'text-status-operational' :\n                                assignment.drone.batteryLevel > 30 ? 'text-status-warning' : 'text-status-critical'\n                              }`}>\n                                {assignment.drone.batteryLevel}%\n                              </span>\n                            </div>\n                          </>\n                        ) : (\n                          <div className=\"text-text-secondary\">No drone assigned</div>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Issues */}\n                  {assignment.issues.length > 0 && (\n                    <div className=\"mb-4\">\n                      <h4 className=\"font-medium text-status-warning mb-2 flex items-center gap-2\">\n                        <ExclamationTriangleIcon className=\"w-4 h-4\" />\n                        Issues\n                      </h4>\n                      <div className=\"space-y-1\">\n                        {assignment.issues.map((issue, index) => (\n                          <div key={index} className=\"flex items-start gap-2 text-sm\">\n                            <div className=\"w-1 h-1 bg-status-warning rounded-full mt-2 flex-shrink-0\" />\n                            <span className=\"text-status-warning\">{issue}</span>\n                          </div>\n                        ))}\n                      </div>\n                    </div>\n                  )}\n\n                  {/* Mission Description */}\n                  {assignment.mission.description && (\n                    <p className=\"text-sm text-text-secondary line-clamp-2\">\n                      {assignment.mission.description}\n                    </p>\n                  )}\n                </div>\n\n                {/* Actions */}\n                <div className=\"flex flex-col gap-2 ml-6\">\n                  {assignment.status === 'unassigned' ? (\n                    <button\n                      onClick={() => setSelectedMissionForAssignment(assignment.mission)}\n                      className=\"flex items-center gap-2 px-4 py-2 bg-status-active hover:bg-status-active/80 \n                               text-white rounded-lg text-sm font-medium transition-colors\"\n                    >\n                      <UserIcon className=\"w-4 h-4\" />\n                      Assign Drone\n                    </button>\n                  ) : (\n                    <>\n                      <button\n                        onClick={() => setSelectedMissionForAssignment(assignment.mission)}\n                        className=\"flex items-center gap-2 px-4 py-2 bg-dark-tertiary hover:bg-dark-hover \n                                 text-text-primary rounded-lg text-sm font-medium transition-colors border border-dark-border\"\n                      >\n                        <ArrowPathIcon className=\"w-4 h-4\" />\n                        Reassign\n                      </button>\n                      \n                      <button\n                        onClick={() => handleUnassign(assignment.mission.id)}\n                        className=\"flex items-center gap-2 px-4 py-2 text-text-secondary hover:text-status-critical \n                                 hover:bg-status-critical/10 rounded-lg text-sm transition-colors\"\n                      >\n                        <XMarkIcon className=\"w-4 h-4\" />\n                        Unassign\n                      </button>\n                    </>\n                  )}\n                </div>\n              </div>\n            </motion.div>\n          ))}\n        </AnimatePresence>\n      </div>\n\n      {/* Empty State */}\n      {filteredAssignments.length === 0 && (\n        <div className=\"text-center py-12\">\n          <UserIcon className=\"w-12 h-12 mx-auto text-text-secondary opacity-50 mb-4\" />\n          <h3 className=\"text-lg font-medium text-text-primary mb-2\">\n            {filter === 'all' ? 'No missions to assign' : `No ${filter} missions`}\n          </h3>\n          <p className=\"text-text-secondary mb-4\">\n            {filter === 'all' \n              ? 'Create missions to start managing assignments'\n              : `Change the filter to see other missions`\n            }\n          </p>\n          {filter !== 'all' && (\n            <button\n              onClick={() => setFilter('all')}\n              className=\"px-4 py-2 bg-dark-tertiary hover:bg-dark-hover text-text-primary \n                       rounded-lg transition-colors\"\n            >\n              Show All Missions\n            </button>\n          )}\n        </div>\n      )}\n\n      {/* Assignment Modal */}\n      {selectedMissionForAssignment && (\n        <DroneAssignment\n          mission={selectedMissionForAssignment}\n          isOpen={true}\n          onClose={() => setSelectedMissionForAssignment(null)}\n          onAssigned={() => {\n            setSelectedMissionForAssignment(null);\n          }}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default AssignmentManager;","import React, { useState } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport {\n  RocketLaunchIcon,\n  UserIcon,\n  ChartBarIcon,\n  Cog6ToothIcon,\n  XMarkIcon\n} from '@heroicons/react/24/outline';\nimport MissionList from '../MissionList';\nimport AssignmentManager from '../AssignmentManager';\nimport MissionPanel from '../MissionPanel';\n\ninterface MissionControlsProps {\n  className?: string;\n  onClose?: () => void;\n}\n\ntype ViewMode = 'panel' | 'list' | 'assignments';\n\nconst MissionControls: React.FC<MissionControlsProps> = ({ className = '', onClose }) => {\n  const [isExpanded, setIsExpanded] = useState(false);\n  const [viewMode, setViewMode] = useState<ViewMode>('panel');\n\n  const viewOptions = [\n    { mode: 'panel' as ViewMode, label: 'Panel', icon: ChartBarIcon, description: 'Compact mission overview' },\n    { mode: 'list' as ViewMode, label: 'List', icon: RocketLaunchIcon, description: 'All missions list' },\n    { mode: 'assignments' as ViewMode, label: 'Assignments', icon: UserIcon, description: 'Mission assignments' }\n  ];\n\n  if (!isExpanded) {\n    return (\n      <div className={`${className}`}>\n        {/* Collapsed View - Mission Panel */}\n        <MissionPanel compact={true} />\n        \n        {/* Expand Button */}\n        <div className=\"mt-4 flex justify-center\">\n          <button\n            onClick={() => setIsExpanded(true)}\n            className=\"flex items-center gap-2 px-4 py-2 bg-dark-tertiary hover:bg-dark-hover \n                     text-text-primary rounded-lg border border-dark-border transition-colors\"\n          >\n            <Cog6ToothIcon className=\"w-4 h-4\" />\n            Mission Controls\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-[10000] p-4\">\n      <motion.div\n        initial={{ opacity: 0, scale: 0.95 }}\n        animate={{ opacity: 1, scale: 1 }}\n        exit={{ opacity: 0, scale: 0.95 }}\n        className=\"bg-dark-secondary rounded-lg border border-dark-border shadow-xl\n                   w-full max-w-7xl max-h-[95vh] overflow-hidden flex flex-col\"\n      >\n        {/* Header */}\n        <div className=\"flex items-center justify-between p-6 border-b border-dark-border\">\n          <div>\n            <h2 className=\"text-2xl font-bold text-text-primary flex items-center gap-3\">\n              <RocketLaunchIcon className=\"w-7 h-7 text-status-active\" />\n              Mission Control Center\n            </h2>\n            <p className=\"text-text-secondary mt-1\">\n              Manage missions, assignments, and drone operations\n            </p>\n          </div>\n\n          {/* View Mode Selector */}\n          <div className=\"flex items-center gap-4\">\n            <div className=\"flex bg-dark-tertiary rounded-lg p-1\">\n              {viewOptions.map((option) => (\n                <button\n                  key={option.mode}\n                  onClick={() => setViewMode(option.mode)}\n                  className={`flex items-center gap-2 px-4 py-2 rounded-md text-sm font-medium transition-colors ${\n                    viewMode === option.mode\n                      ? 'bg-status-active text-white'\n                      : 'text-text-secondary hover:text-text-primary hover:bg-dark-hover'\n                  }`}\n                  title={option.description}\n                >\n                  <option.icon className=\"w-4 h-4\" />\n                  {option.label}\n                </button>\n              ))}\n            </div>\n\n            <button\n              onClick={() => {\n                if (onClose) {\n                  onClose();\n                } else {\n                  setIsExpanded(false);\n                }\n              }}\n              className=\"p-2 hover:bg-dark-hover rounded-lg transition-colors\"\n            >\n              <XMarkIcon className=\"w-5 h-5 text-text-secondary\" />\n            </button>\n          </div>\n        </div>\n\n        {/* Content */}\n        <div className=\"flex-1 overflow-hidden p-6\">\n          <AnimatePresence mode=\"wait\">\n            {viewMode === 'panel' && (\n              <motion.div\n                key=\"panel\"\n                initial={{ opacity: 0, x: 20 }}\n                animate={{ opacity: 1, x: 0 }}\n                exit={{ opacity: 0, x: -20 }}\n                className=\"h-full\"\n              >\n                <MissionPanel className=\"h-full\" />\n              </motion.div>\n            )}\n\n            {viewMode === 'list' && (\n              <motion.div\n                key=\"list\"\n                initial={{ opacity: 0, x: 20 }}\n                animate={{ opacity: 1, x: 0 }}\n                exit={{ opacity: 0, x: -20 }}\n                className=\"h-full overflow-y-auto\"\n              >\n                <MissionList />\n              </motion.div>\n            )}\n\n            {viewMode === 'assignments' && (\n              <motion.div\n                key=\"assignments\"\n                initial={{ opacity: 0, x: 20 }}\n                animate={{ opacity: 1, x: 0 }}\n                exit={{ opacity: 0, x: -20 }}\n                className=\"h-full overflow-y-auto\"\n              >\n                <AssignmentManager />\n              </motion.div>\n            )}\n          </AnimatePresence>\n        </div>\n\n        {/* Footer */}\n        <div className=\"p-6 border-t border-dark-border bg-dark-tertiary\">\n          <div className=\"flex items-center justify-between text-sm text-text-secondary\">\n            <div className=\"flex items-center gap-4\">\n              <div className=\"flex items-center gap-2\">\n                <div className=\"w-2 h-2 bg-status-operational rounded-full\"></div>\n                <span>Mission Service Connected</span>\n              </div>\n              <div className=\"text-text-secondary\">\n                Last update: {new Date().toLocaleTimeString()}\n              </div>\n            </div>\n            \n            <div className=\"flex items-center gap-4\">\n              <span>\n                Current View: <span className=\"text-text-primary font-medium\">{\n                  viewOptions.find(opt => opt.mode === viewMode)?.label\n                }</span>\n              </span>\n              <button\n                onClick={() => {\n                  if (onClose) {\n                    onClose();\n                  } else {\n                    setIsExpanded(false);\n                  }\n                }}\n                className=\"px-3 py-1 text-text-secondary hover:text-text-primary transition-colors\"\n              >\n                Close\n              </button>\n            </div>\n          </div>\n        </div>\n      </motion.div>\n    </div>\n  );\n};\n\nexport default MissionControls;","import { useEffect, useState } from 'react';\nimport './App.css';\nimport FleetMap from '@/components/fleet/FleetMap';\nimport FleetStatus from '@/components/fleet/FleetStatus';\nimport TelemetryPanel from '@/components/telemetry/TelemetryPanel';\nimport ConnectionStatusIndicator from '@/components/common/ConnectionStatusIndicator';\nimport SafetyPanel from '@/components/safety/SafetyPanel';\nimport ResizablePanel from '@/components/common/ResizablePanel';\nimport { MissionControls } from '@/components/mission';\nimport { useFleetStore, useConnectionStatus, useSelectedDrone, initializeFleetStore } from '@/store/fleet';\nimport { initializeMissionWebSocket } from '@/store/mission';\nimport { ChevronLeftIcon, ChevronRightIcon, RocketLaunchIcon } from '@heroicons/react/24/outline';\n\nfunction App() {\n  const { state: connectionState, isConnected, error: connectionError } = useConnectionStatus();\n  const drones = useFleetStore((state) => Object.values(state.drones));\n  const selectedDroneId = useFleetStore((state) => state.selectedDroneId);\n  const selectedDrone = useSelectedDrone();\n  const selectDrone = useFleetStore((state) => state.selectDrone);\n  const [sidebarCollapsed, setSidebarCollapsed] = useState(false);\n  const [showMissionCenter, setShowMissionCenter] = useState(false);\n  const [safetyPanelHeight, setSafetyPanelHeight] = useState(() => {\n    // Restore saved height from localStorage\n    const saved = localStorage.getItem('safetyPanelHeight');\n    return saved ? parseInt(saved, 10) : 400;\n  });\n\n  // Initialize the fleet store and WebSocket connections\n  useEffect(() => {\n    initializeFleetStore();\n    initializeMissionWebSocket();\n  }, []);\n\n  const handleDroneSelect = (droneId: string) => {\n    selectDrone(droneId);\n  };\n\n  const handleDroneAction = (droneId: string, action: string) => {\n    console.log(`Action \"${action}\" requested for drone ${droneId}`);\n    // TODO: Implement drone actions (start mission, return home, etc.)\n  };\n\n  return (\n    <div className=\"min-h-screen bg-dark-primary text-text-primary flex\">\n      {/* Left Sidebar - FleetStatus */}\n      <div className={`\n        transition-all duration-300 ease-in-out bg-dark-secondary border-r border-dark-border\n        ${sidebarCollapsed ? 'w-16' : 'w-80'}\n        flex flex-col h-screen\n      `}>\n        {/* Sidebar Header */}\n        <div className=\"p-4 border-b border-dark-border flex items-center justify-between\">\n          {!sidebarCollapsed && (\n            <div>\n              <h2 className=\"text-lg font-semibold text-text-primary\">Fleet Control</h2>\n              <p className=\"text-text-secondary text-xs\">5 drones active</p>\n            </div>\n          )}\n          <button\n            onClick={() => setSidebarCollapsed(!sidebarCollapsed)}\n            className=\"p-2 hover:bg-dark-hover rounded-lg transition-colors\"\n            title={sidebarCollapsed ? \"Expand sidebar\" : \"Collapse sidebar\"}\n          >\n            {sidebarCollapsed ? (\n              <ChevronRightIcon className=\"w-5 h-5 text-text-secondary\" />\n            ) : (\n              <ChevronLeftIcon className=\"w-5 h-5 text-text-secondary\" />\n            )}\n          </button>\n        </div>\n\n        {/* FleetStatus Content */}\n        <div className=\"flex-1 overflow-hidden\">\n          {!sidebarCollapsed && (\n            <FleetStatus\n              drones={drones}\n              selectedDroneId={selectedDroneId || undefined}\n              onDroneSelect={handleDroneSelect}\n              onDroneAction={handleDroneAction}\n              className=\"h-full\"\n            />\n          )}\n          \n          {sidebarCollapsed && (\n            <div className=\"p-2 space-y-2 overflow-y-auto scrollbar-thin\">\n              {drones.map((drone) => (\n                <button\n                  key={drone.id}\n                  onClick={() => handleDroneSelect(drone.id)}\n                  className={`\n                    w-full p-2 rounded-lg border transition-all duration-200\n                    ${drone.id === selectedDroneId \n                      ? 'border-status-active bg-status-active/10' \n                      : 'border-dark-border hover:border-dark-hover hover:bg-dark-hover'\n                    }\n                  `}\n                  title={`${drone.name} - ${drone.status}`}\n                >\n                  <div \n                    className=\"w-8 h-8 mx-auto rounded-full border flex items-center justify-center\"\n                    style={{ \n                      backgroundColor: drone.status === 'active' || drone.status === 'in_flight' ? '#238636' : \n                                       drone.status === 'charging' ? '#d29922' : \n                                       drone.status === 'maintenance' ? '#da3633' : '#8b949e',\n                      borderColor: drone.status === 'active' || drone.status === 'in_flight' ? '#238636' : \n                                   drone.status === 'charging' ? '#d29922' : \n                                   drone.status === 'maintenance' ? '#da3633' : '#8b949e'\n                    }}\n                  >\n                    <span className=\"text-xs font-bold text-white\">\n                      {drone.name.split('-')[1] || drone.name.charAt(0)}\n                    </span>\n                  </div>\n                </button>\n              ))}\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Main Content Area */}\n      <div className=\"flex-1 flex flex-col h-screen\">\n        {/* Header */}\n        <header className=\"bg-dark-secondary border-b border-dark-border px-6 py-4\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h1 className=\"text-xl font-bold\">Multi-Drone Fleet Management System</h1>\n              <p className=\"text-text-secondary text-sm\">\n                Real-time fleet monitoring and control dashboard\n              </p>\n            </div>\n            <div className=\"flex items-center gap-4\">\n              <button\n                onClick={() => setShowMissionCenter(true)}\n                className=\"flex items-center gap-2 px-4 py-2 bg-status-active hover:bg-status-active/80 \n                         text-white rounded-lg font-medium transition-colors\"\n              >\n                <RocketLaunchIcon className=\"w-5 h-5\" />\n                Mission Center\n              </button>\n              \n              <ConnectionStatusIndicator \n                connectionState={connectionState}\n                isConnected={isConnected}\n                error={connectionError || undefined}\n              />\n            </div>\n          </div>\n        </header>\n\n        {/* Main Dashboard */}\n        <main className=\"flex-1 p-4 overflow-hidden\">\n          <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-4 h-full\">\n            {/* Fleet Map Container */}\n            <div className=\"lg:col-span-2 h-full overflow-hidden\">\n              <FleetMap\n                drones={drones}\n                selectedDroneId={selectedDroneId || undefined}\n                onDroneSelect={handleDroneSelect}\n                className=\"h-full w-full\"\n              />\n            </div>\n            \n            {/* Right Panel - Scrollable Split between Telemetry, Safety, and Missions */}\n            <div className=\"lg:col-span-1 h-full overflow-y-auto overflow-x-hidden flex flex-col gap-4 pr-2 scrollbar-thin\">\n              {/* Telemetry Panel - Top Section */}\n              <div className=\"flex-shrink-0 h-[450px] border border-dark-border rounded-lg bg-dark-secondary overflow-hidden\">\n                <TelemetryPanel\n                  drone={selectedDrone}\n                  isLive={isConnected}\n                  className=\"h-full w-full\"\n                />\n              </div>\n              \n              {/* Safety Panel - Middle Section - Resizable */}\n              <div className=\"flex-shrink-0\">\n                <ResizablePanel\n                  initialHeight={safetyPanelHeight}\n                  minHeight={250}\n                  maxHeight={600}\n                  onHeightChange={(height) => {\n                    setSafetyPanelHeight(height);\n                    localStorage.setItem('safetyPanelHeight', height.toString());\n                  }}\n                  className=\"\"\n                >\n                  <SafetyPanel className=\"h-full\" />\n                </ResizablePanel>\n              </div>\n              \n              {/* Mission Controls - Bottom Section */}\n              <div className=\"flex-shrink-0 h-[500px] mb-4\">\n                <MissionControls />\n              </div>\n            </div>\n          </div>\n        </main>\n      </div>\n      \n      {/* Mission Center Modal */}\n      {showMissionCenter && (\n        <div className=\"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[9999] p-4\"\n             onClick={(e) => {\n               // Close modal when clicking backdrop\n               if (e.target === e.currentTarget) {\n                 setShowMissionCenter(false);\n               }\n             }}>\n          <div className=\"bg-dark-secondary rounded-lg border border-dark-border shadow-2xl\n                         w-full max-w-7xl max-h-[95vh] overflow-hidden relative z-[10000]\"\n               onClick={(e) => e.stopPropagation()}>\n            <MissionControls \n              className=\"h-full\" \n              onClose={() => setShowMissionCenter(false)} \n            />\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default App;","import React from 'react'\nimport ReactDOM from 'react-dom/client'\nimport App from './App.tsx'\nimport './App.css'\n\nReactDOM.createRoot(document.getElementById('root')!).render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n)"],"names":["f","require$$0","k","l","m","n","p","q","c","a","g","b","d","e","h","reactJsxRuntime_production_min","jsxRuntimeModule","client","ArrowDownIcon","title","titleId","props","svgRef","React.createElement","ForwardRef","React.forwardRef","ArrowLeftIcon","ArrowPathIcon","ArrowRightIcon","ArrowUpIcon","Battery0Icon","BellIcon","BoltSlashIcon","BoltIcon","ChartBarIcon","CheckCircleIcon","CheckIcon","ChevronDownIcon","ChevronLeftIcon","ChevronRightIcon","ChevronUpIcon","ClockIcon","Cog6ToothIcon","CogIcon","CpuChipIcon","ExclamationTriangleIcon","EyeIcon","FireIcon","FunnelIcon","GlobeAltIcon","InformationCircleIcon","MagnifyingGlassIcon","MapPinIcon","PauseIcon","PencilIcon","PlayIcon","PlusIcon","QueueListIcon","RocketLaunchIcon","ShieldCheckIcon","ShieldExclamationIcon","SignalSlashIcon","SignalIcon","StopIcon","TrashIcon","UserIcon","WifiIcon","WrenchScrewdriverIcon","XCircleIcon","XMarkIcon","DroneMarker","drone","isSelected","onSelect","getBatteryColor","getStatusColor","createDroneIcon","statusColor","batteryColor","isLowBattery","divIcon","formatLastUpdate","timestamp","date","diffMs","diffSeconds","connection","signalStrength","jsx","Marker","Popup","jsxs","BatteryIcon","alert","index","MissionPath","mission","getPathColor","status","createWaypointIcon","waypoint","isCompleted","isCurrent","getActionIcon","action","pathPositions","wp","pathColor","Fragment","Polyline","MapResizer","map","useMap","useEffect","timer","FleetMap","drones","missions","selectedDroneId","onDroneSelect","className","mapCenter","setMapCenter","useState","zoom","setZoom","mapContainerRef","useRef","validDrones","avgLat","sum","avgLng","resizeObserver","percentage","motion","MapContainer","TileLayer","BatteryIndicator","level","voltage","size","showLabel","showVoltage","getBatteryWidth","getBatteryHeight","getTextSize","color","isLow","isCritical","DroneStatusCard","onAction","getStatusConfig","formatTimeAgo","statusConfig","StatusIcon","handleAction","actionId","bar","_a","_b","_c","_e","_d","_g","_f","FleetSummary","stats","summaryItems","item","FleetStatus","onDroneAction","filterStatus","setFilterStatus","sortBy","setSortBy","filteredDrones","statusOrder","filterOptions","recentActivity","option","AnimatePresence","activity","ConnectionStatus","strength","quality","showStrength","getConnectionQuality","getBarHeight","barIndex","getBarWidth","displayConfig","TelemetryChart","data","selectedMetric","setSelectedMetric","metrics","currentMetric","formatData","point","CustomTooltip","active","payload","label","chartData","metric","ResponsiveContainer","LineChart","CartesianGrid","XAxis","YAxis","Tooltip","ReferenceLine","Line","current","previous","diff","isIncreasing","isDecreasing","stat","value","values","v","AlertsList","alerts","droneId","onAcknowledge","onResolve","onDismiss","getSeverityConfig","severity","diffMinutes","diffHours","activeAlerts","resolvedAlerts","useMemo","sortedAlerts","severityOrder","severityDiff","AlertItem","React","config","IconComponent","TelemetryPanel","isLive","activeTab","setActiveTab","telemetryHistory","setTelemetryHistory","newDataPoint","prev","tabs","SpeedIcon","tab","CompassIcon","TemperatureIcon","ConnectionState","DEFAULT_CONFIG","TelemetryWebSocketService","__publicField","error","callback","event","message","droneMessage","missionMessage","alertMessage","state","telemetryService","ConnectionStatusIndicator","connectionState","createStoreImpl","createState","listeners","setState","partial","replace","nextState","previousState","listener","getState","api","initialState","__vite_import_meta_env__","createStore","is","x","y","objectIs","useLayoutEffect","useDebugValue","useSyncExternalStore$2","subscribe","getSnapshot","_useState","inst","forceUpdate","checkIfSnapshotChanged","latestGetSnapshot","nextValue","useSyncExternalStore$1","shim","useSyncExternalStoreShim_production","shimModule","require$$1","useSyncExternalStore","withSelector_production","getServerSnapshot","selector","isEqual","instRef","memoizedSelector","nextSnapshot","hasMemo","memoizedSnapshot","currentSelection","memoizedSelection","nextSelection","maybeGetServerSnapshot","withSelectorModule","ReactExports","useSyncExternalStoreWithSelector","useSyncExternalStoreExports","didWarnAboutEqualityFn","identity","arg","useStore","equalityFn","slice","createImpl","useBoundStore","create","subscribeWithSelectorImpl","fn","set","get","origSubscribe","optListener","options","currentSlice","nextSlice","previousSlice","subscribeWithSelector","CoordinationService","pos1","pos2","1","2","","","horizontalDistance","altitudeDiff","from","to","secondsAhead","distanceAhead","headingRad","earthRadius","latOffset","lngOffset","activeDrones","now","maneuver","i","j","drone1","drone2","currentDistance","future1","future2","futureDistance","minDistance","alertId","existingAlert","distance","actionDrone","magnitude","maneuverDuration","originalHeading","applied","activeWarnings","resolvedConflicts","coordinationService","ChargingService","reason","priority","missionUrgency","missionName","estimatedArrival","existingIndex","expectedChargingTime","missionPriority","queueItem","currentBattery","targetBattery","batteryNeeded","station","nextDrone","stationId","_startBattery","endBattery","chargingTime","schedules","queueForStation","currentlyCharging","totalQueueTime","estimatedWaitTime","stations","availableCount","s","occupiedCount","maintenanceCount","totalSessions","avgChargingTime","totalWaitTime","assigned","chargingService","mockDrones","mockMissions","mockAlerts","MockTelemetryService","pattern","linear","deltaLat","deltaLng","currentWP","nextWP","wpDeltaLat","wpDeltaLng","baseSignal","baseTempVariation","remainingPercent","estimatedMinutes","etaTime","emergencyTriggered","emergency","emergenciesToResolve","key","shouldResolve","coordinationAlerts","assignedStation","existingChargingAlert","chargingRate","queueStatus","existingQueueAlert","responseType","resolution","activeEmergencies","resolvedEmergencies","emergencyTypes","acc","mockTelemetryService","useFleetStore","existingDrone","alertsToUse","existingAlertMap","newAlertMap","alertsAreEqual","id","droneList","summary","store","isAutoConnectInitialized","initializeFleetStore","connect","prevConnectionState","droneCount","prevDroneCount","useSelectedDrone","getDroneById","useConnectionStatus","EmergencyPanel","compact","showResolved","setShowResolved","emergencies","resolved","getEmergencyTypeIcon","type","getEmergencyTypeColor","time","minutes","hours","days","EmergencyCard","CoordinationPanel","isTransparent","coordinationStatus","setCoordinationStatus","setCoordinationAlerts","updateCoordinationData","interval","getAlertIcon","getAlertColor","getAvoidanceActionIcon","CoordinationAlertCard","colors","AvoidanceIcon","ChargingPanel","chargingStats","setChargingStats","chargingStations","setChargingStations","chargingSchedules","setChargingSchedules","activeView","setActiveView","updateChargingData","globalQueue","allQueueItems","schedule","arr","getStationStatusColor","getPriorityColor","getReasonIcon","formatTime","mins","QueueItemCard","ReasonIcon","StationCard","SafetyPanel","safetyStatus","setSafetyStatus","setAlerts","isConnected","setIsConnected","showAllAlerts","setShowAllAlerts","initSafetyConnection","ws","handleSafetyMessage","getSafetyStatusColor","getSafetyIcon","getAlertSeverityColor","formatTimestamp","acknowledgeAlert","resolveAlert","visibleAlerts","ResizablePanel","children","minHeight","maxHeight","initialHeight","onHeightChange","disabled","height","setHeight","isResizing","setIsResizing","showHint","setShowHint","panelRef","startY","startHeight","handleMouseDown","useCallback","handleMouseMove","deltaY","newHeight","handleMouseUp","handleKeyDown","step","hideTimer","dot","WaypointManager","waypoints","onWaypointsChange","editingIndex","setEditingIndex","showAddForm","setShowAddForm","formData","setFormData","actionOptions","resetForm","handleAddWaypoint","newWaypoint","handleEditWaypoint","handleSaveEdit","updatedWaypoints","handleCancelEdit","handleDeleteWaypoint","_","handleMoveWaypoint","direction","newIndex","getActionOption","opt","calculateDistance","lat1Rad","lat2Rad","total","WaypointForm","onChange","API_BASE_URL","WS_URL","wsConnection","reconnectAttempts","maxReconnectAttempts","useMissionStore","missionMap","missionId","missionData","response","updates","deleted","remainingMissions","progress","currentWaypoint","connected","connectWebSocket","initializeMissionWebSocket","useSelectedMission","selectedMissionId","MissionCreator","isOpen","onClose","onMissionCreated","createMission","creating","setError","priorityOptions","handleClose","validateForm","handleSubmit","err","getPriorityOption","calculateEstimatedDuration","totalTime","speed","curr","R","formatDuration","seconds","secs","DroneAssignment","onAssigned","assignMissionToDrone","setSelectedDroneId","assigning","setAssigning","droneCompatibility","setDroneCompatibility","analyzeDroneCompatibility","compatibility","issues","warnings","score","existingMission","firstWaypoint","compatible","getCompatibilityIndicator","handleAssign","estimateFlightTime","currentPos","distanceToStart","selectedCompatibility","issue","warning","QuickAssignment","showOptions","setShowOptions","getAvailableDrones","getBestDrone","availableDrones","scoredDrones","distanceScore","handleQuickAssign","bestDrone","assignedDrone","isBest","hasWarning","MissionList","missionStats","selectMission","deleteMission","updateMission","showCreator","setShowCreator","selectedMissionForAssignment","setSelectedMissionForAssignment","searchQuery","setSearchQuery","statusFilter","setStatusFilter","priorityFilter","setPriorityFilter","missionList","filteredMissions","sortedMissions","handleStatusChange","newStatus","handleDelete","formatDate","dateString","MissionPanel","activeMissions","selectedDrone","selectedMission","showWaypoints","setShowWaypoints","droneMissions","handleAssignToSelectedDrone","AssignmentManager","dronesMap","filter","setFilter","assignments","filteredAssignments","assignment","getStatusIcon","handleUnassign","getAvailableDronesCount","MissionControls","isExpanded","setIsExpanded","viewMode","setViewMode","viewOptions","App","connectionError","selectDrone","sidebarCollapsed","setSidebarCollapsed","showMissionCenter","setShowMissionCenter","safetyPanelHeight","setSafetyPanelHeight","saved","handleDroneSelect","handleDroneAction","ReactDOM"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,61,62,63,64,65,66,67]}